<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <parent>
    <artifactId>ogham-parent</artifactId>
    <groupId>fr.sii.ogham</groupId>
    <version>4.0.0-SNAPSHOT</version>
  </parent>
  <modelVersion>4.0.0</modelVersion>
  <artifactId>ogham-test-utils-dependencies</artifactId>
  <description>Uber JAR that contains all test dependencies useful for testing Email, SMS, ...
        Usage of Uber JAR is done in order to avoid classpath mess in projects that use
        Ogham and also to not have false positive (works in tests but doesn't work in runtime
        since the dependency is missing or clashes with another one).</description>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-shade-plugin</artifactId>
        <version>${maven-shade-plugin.version}</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <shadedArtifactAttached>false</shadedArtifactAttached>
              <useDependencyReducedPomInJar>true</useDependencyReducedPomInJar>
              <artifactSet>
                <excludes>
                  <exclude>org.slf4j:*</exclude>
                </excludes>
              </artifactSet>
              <relocations>
                <relocation>
                  <pattern>com.sun</pattern>
                  <shadedPattern>ogham.testing.com.sun</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>jakarta.mail</pattern>
                  <shadedPattern>ogham.testing.jakarta.mail</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>jakarta.activation</pattern>
                  <shadedPattern>ogham.testing.jakarta.activation</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>org.eclipse</pattern>
                  <shadedPattern>ogham.testing.org.eclipse</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>org.apache.commons</pattern>
                  <shadedPattern>ogham.testing.org.apache.commons</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>org.apache.commons</pattern>
                  <shadedPattern>ogham.testing.org.apache.commons</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>com.icegreen.greenmail</pattern>
                  <shadedPattern>ogham.testing.com.icegreen.greenmail</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>com.cloudhopper</pattern>
                  <shadedPattern>ogham.testing.com.cloudhopper</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>org.joda</pattern>
                  <shadedPattern>ogham.testing.org.joda</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>org.jsmpp</pattern>
                  <shadedPattern>ogham.testing.org.jsmpp</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>org.jboss.netty</pattern>
                  <shadedPattern>ogham.testing.org.jboss.netty</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>com.rits</pattern>
                  <shadedPattern>ogham.testing.com.rits</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>nl.jqno.equalsverifier</pattern>
                  <shadedPattern>ogham.testing.nl.jqno.equalsverifier</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>io.github.resilience4j</pattern>
                  <shadedPattern>ogham.testing.io.github.resilience4j</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>io.vavr</pattern>
                  <shadedPattern>ogham.testing.io.vavr</shadedPattern>
                </relocation>
                <relocation>
                  <pattern>META-INF/javamail.providers</pattern>
                  <shadedPattern>META-INF/ogham.testing.javamail.providers</shadedPattern>
                  <rawString>true</rawString>
                </relocation>
                <relocation>
                  <pattern>META-INF/javamail.default.providers</pattern>
                  <shadedPattern>META-INF/ogham.testing.javamail.default.providers</shadedPattern>
                  <rawString>true</rawString>
                </relocation>
                <relocation>
                  <pattern>META-INF/mailcap.default</pattern>
                  <shadedPattern>META-INF/ogham.testing.mailcap.default</shadedPattern>
                  <rawString>true</rawString>
                </relocation>
                <relocation>
                  <pattern>META-INF/mailcap</pattern>
                  <shadedPattern>META-INF/ogham.testing.mailcap</shadedPattern>
                  <rawString>true</rawString>
                </relocation>
              </relocations>
              <transformers>
                <transformer />
                <transformer>
                  <includes>
                    <include>META-INF/ogham.testing.javamail.providers</include>
                    <include>META-INF/ogham.testing.javamail.default.providers</include>
                    <include>META-INF/ogham.testing.mailcap.default</include>
                    <include>META-INF/ogham.testing.mailcap</include>
                  </includes>
                </transformer>
              </transformers>
            </configuration>
          </execution>
        </executions>
        <dependencies>
          <dependency>
            <groupId>fr.sii.ogham.internal</groupId>
            <artifactId>maven-shade-plugin-resource-relocation</artifactId>
            <version>${project.version}</version>
          </dependency>
        </dependencies>
      </plugin>
    </plugins>
  </build>
  <properties>
    <sonar.skip>true</sonar.skip>
    <skip.integration.tests>true</skip.integration.tests>
    <maven-shade-plugin.version>3.4.1</maven-shade-plugin.version>
    <skip.unit.tests>true</skip.unit.tests>
    <maven.javadoc.skip>true</maven.javadoc.skip>
  </properties>
</project>
