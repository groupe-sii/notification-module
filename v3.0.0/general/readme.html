<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Ogham</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="..//javascripts/steps.js"></script>
<script type="text/javascript" src="..//javascripts/sourcecode/source-utils.js"></script>
<script type="text/javascript" src="..//javascripts/sourcecode/highlight-lines.js"></script>
<script type="text/javascript" src="..//javascripts/sourcecode/collapse-lines.js"></script>
<script type="text/javascript" src="..//javascripts/tabcontainer.js"></script>
<script type="text/javascript" src="..//javascripts/toc.js"></script>
<script type="text/javascript" src="..//javascripts/sticky-title-fix.js"></script>
<script type="text/javascript" src="..//javascripts/image-viewer.js"></script>
<link rel="stylesheet" type="text/css" href="..//styles/doc-styles.css" />
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1><span class="image"><img src="../images//logo.png" alt="logo" width="30" height="30"></span> Ogham</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_resources">Resources</a></li>
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_existing_libraries">Existing libraries</a></li>
<li><a href="#_the_ogham_module">The Ogham module</a></li>
</ul>
</li>
<li><a href="#_quick_start">Quick start</a>
<ul class="sectlevel2">
<li><a href="#_standalone">Standalone</a></li>
<li><a href="#_with_spring_boot">With Spring Boot</a></li>
</ul>
</li>
<li><a href="#_select_the_features_you_need">Select the features you need</a></li>
<li><a href="#_usage">Usage</a>
<ul class="sectlevel2">
<li><a href="#_send_email">Send Email</a>
<ul class="sectlevel3">
<li><a href="#_first_email_using_an_existing_smtp_server">First email using an existing SMTP server</a></li>
<li><a href="#_use_an_html_template_for_email_body">Use an HTML template for email body</a></li>
<li><a href="#_use_html_title_as_email_subject">Use HTML title as email subject</a></li>
<li><a href="#_html_body_with_css_and_images">HTML body with CSS and images</a></li>
<li><a href="#_a_working_preview_of_the_html_body_text_alternative">A working preview of the HTML body (text alternative)</a></li>
<li><a href="#_attach_files_to_the_email">Attach files to the email</a></li>
<li><a href="#_other_email_features">Other email features</a></li>
</ul>
</li>
<li><a href="#_send_sms">Send SMS</a>
<ul class="sectlevel3">
<li><a href="#_first_sms_using_an_existing_smpp_server">First SMS using an existing SMPP server</a></li>
<li><a href="#_use_a_template_for_sms_content">Use a template for SMS content</a></li>
<li><a href="#_send_a_long_sms">Send a long SMS</a></li>
<li><a href="#_other_sms_features">Other SMS features</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_testing">Testing</a>
<ul class="sectlevel2">
<li><a href="#_include_test_utilities">Include test utilities</a></li>
<li><a href="#_testing_emails">Testing emails</a></li>
<li><a href="#_testing_sms">Testing SMS</a></li>
<li><a href="#_more_testing_features">More testing features</a></li>
</ul>
</li>
<li><a href="#_advanced_configuration">Advanced configuration</a></li>
<li><a href="#_extend">Extend</a></li>
<li><a href="#_tips">Tips</a></li>
<li><a href="#_support_developer">Support developer</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><a class="image" href="https://mvnrepository.com/artifact/fr.sii.ogham/ogham-all/"><img src="https://img.shields.io/maven-central/v/fr.sii.ogham/ogham-all.svg" alt="Latest Release Standalone"></a></span>
<span class="image"><a class="image" href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/badge/License-Apache%202.0-lightgrey.svg" alt="License"></a></span>
<span class="image"><a class="image" href="https://github.com/groupe-sii/ogham/actions?query=workflow%3ABuild"><img src="https://github.com/groupe-sii/ogham/workflows/Build/badge.svg?branch={git-branch}" alt="Build Status"></a></span></p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://sonarcloud.io/dashboard?id=fr.sii.ogham%3Aogham-parent"><img src="https://sonarcloud.io/api/project_badges/measure?project=fr.sii.ogham%3Aogham-parent&amp;metric=alert_status" alt="Sonar"></a></span>
<span class="image"><a class="image" href="https://sonarcloud.io/dashboard?id=fr.sii.ogham%3Aogham-parent"><img src="https://sonarcloud.io/api/project_badges/measure?project=fr.sii.ogham%3Aogham-parent&amp;metric=sqale_rating" alt="Sonar"></a></span>
<span class="image"><a class="image" href="https://sonarcloud.io/dashboard?id=fr.sii.ogham%3Aogham-parent"><img src="https://sonarcloud.io/api/project_badges/measure?project=fr.sii.ogham%3Aogham-parent&amp;metric=reliability_rating" alt="Sonar"></a></span>
<span class="image"><a class="image" href="https://sonarcloud.io/dashboard?id=fr.sii.ogham%3Aogham-parent"><img src="https://sonarcloud.io/api/project_badges/measure?project=fr.sii.ogham%3Aogham-parent&amp;metric=security_rating" alt="Sonar"></a></span></p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://sonarcloud.io/dashboard?id=fr.sii.ogham%3Aogham-parent"><img src="https://sonarcloud.io/api/project_badges/measure?project=fr.sii.ogham%3Aogham-parent&amp;metric=coverage" alt="Sonar"></a></span>
<span class="image"><a class="image" href="https://sonarcloud.io/dashboard?id=fr.sii.ogham%3Aogham-parent"><img src="https://sonarcloud.io/api/project_badges/measure?project=fr.sii.ogham%3Aogham-parent&amp;metric=sqale_index" alt="Sonar"></a></span>
<span class="image"><a class="image" href="https://sonarcloud.io/dashboard?id=fr.sii.ogham%3Aogham-parent"><img src="https://sonarcloud.io/api/project_badges/measure?project=fr.sii.ogham%3Aogham-parent&amp;metric=bugs" alt="Sonar"></a></span>
<span class="image"><a class="image" href="https://sonarcloud.io/dashboard?id=fr.sii.ogham%3Aogham-parent"><img src="https://sonarcloud.io/api/project_badges/measure?project=fr.sii.ogham%3Aogham-parent&amp;metric=vulnerabilities" alt="Sonar"></a></span></p>
</div>
<div class="openblock">
<div class="content">
<div class="imageblock">
<div class="content">
<a class="image" href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/showcase-video.html"><img src="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/presentation/showcase.png" alt="Showcase"></a>
</div>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources"><a class="anchor" href="#_resources"></a>Resources</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><a class="image" href="https://groupe-sii.github.io/ogham/redirects/latest-release-site.html"><img src="https://img.shields.io/endpoint?url=https://groupe-sii.github.io/ogham/badges/latest-release-version.json" alt="Latest Release"></a></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><a class="image" href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT"><img src="https://img.shields.io/static/v1?label=This%20version&amp;message=v3.1.0-SNAPSHOT" alt="This version"></a></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><a class="image" href="https://groupe-sii.github.io/ogham/redirects/nightly-build-site.html"><img src="https://img.shields.io/endpoint?url=https://groupe-sii.github.io/ogham/badges/nightly-build-version.json" alt="Nightly build"></a></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://groupe-sii.github.io/ogham/redirects/latest-release-site.html">site</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT">site</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://groupe-sii.github.io/ogham/redirects/nightly-build-site.html">site</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://groupe-sii.github.io/ogham/redirects/latest-release-code.html">code</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/groupe-sii/ogham/blob/master">code</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/groupe-sii/ogham/tree/master">code</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://groupe-sii.github.io/ogham/redirects/latest-release-showcase.html">showcase</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/presentation/showcase.html">showcase</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://groupe-sii.github.io/ogham/redirects/nightly-build-showcase.html">showcase</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_existing_libraries"><a class="anchor" href="#_existing_libraries"></a>Existing libraries</h3>
<div class="paragraph">
<p>Several libraries for sending email already exist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://commons.apache.org/proper/commons-email/">Apache Commons Email</a></p>
</li>
<li>
<p><a href="https://github.com/bbottema/simple-java-mail">Simple Java Mail/Vesijama</a></p>
</li>
<li>
<p><a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mail.html">Spring Email Integration</a></p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These libraries help you send an email but if you want to use a templated content, you will have to manually integrate a template engine.</p>
</div>
<div class="paragraph">
<p>These libraries also provide only implementations based on Java Mail API. But in some environments, you might NOT want to send the email through SMTP but to use an external service (like <a href="https://sendgrid.com/">SendGrid</a> for example). Furthermore, those libraries are bound by design to frameworks or libraries that you might not want to use in your own context.</p>
</div>
<div class="paragraph">
<p>So, now you would want to find a sending library with a high level of abstraction to avoid binding issues with any template engine, design framework or sender service&#8230;&#8203; Is email the only possible message type ? No, so why not sending SMS, Tweet or anything the same way ?</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_ogham_module"><a class="anchor" href="#_the_ogham_module"></a>The Ogham module</h3>
<div class="paragraph">
<p>This module is designed for handling any kind of message the same way. It also provides several implementations for the same message type. It selects the best implementation based on the classpath or properties for example. You can easily add your own implementation.</p>
</div>
<div class="paragraph">
<p>It also provides <strong>templating support</strong> and integrates natively several template engines. You can also add your own.</p>
</div>
<div class="paragraph">
<p>It is <strong>framework and library agnostic</strong> and provides bridges for <strong>common frameworks integration</strong> (Spring, JSF, &#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>When using the module to send email based on an HTML template, the templating system let you <strong>design your HTML like a standard HTML page</strong>. It automatically transforms the associated resources (images, css files&#8230;&#8203;) to be usable in an email context (automatic inline css, embed images&#8230;&#8203;). You don&#8217;t need to write your HTML specifically for email.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start"><a class="anchor" href="#_quick_start"></a>Quick start</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_standalone"><a class="anchor" href="#_standalone"></a>Standalone</h3>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/maven-logo.png" alt="Maven" width="118" height="30"></span></div>
<div class="content">
<div class="listingblock collapse-lines:1-14,20- highlight-lines:15-19">
<div class="title">pom.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>sample<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>all<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
    <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="tag">&lt;maven.compiler.source&gt;</span>1.8<span class="tag">&lt;/maven.compiler.source&gt;</span>
    <span class="tag">&lt;maven.compiler.target&gt;</span>1.8<span class="tag">&lt;/maven.compiler.target&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>
  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-all<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/pom.xml?ts=2">View code of an example pom.xml</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30"></span></div>
<div class="content">
<div class="listingblock collapse-lines:1-9 highlight-lines:11">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
    id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

repositories {
  mavenLocal()
  mavenCentral()
}

dependencies {
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-all:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This will include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sending email through SMTP server (using <a href="https://eclipse-ee4j.github.io/mail/">Jakarta Mail</a>, formely JavaMail)</p>
</li>
<li>
<p>Sending email through <a href="https://sendgrid.com/">SendGrid</a></p>
</li>
<li>
<p>Sending SMS through SMPP server (using <a href="https://github.com/fizzed/cloudhopper-smpp">Cloudhopper</a>)</p>
</li>
<li>
<p>Sending SMS through <a href="https://www.ovhtelecom.fr/sms/api-sms.xml">OVH SMS API</a></p>
</li>
<li>
<p><a href="http://freemarker.org/">FreeMarker</a> template engine available for building message contents</p>
</li>
<li>
<p><a href="http://www.thymeleaf.org/">ThymeLeaf</a> template engine available for building message contents</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Java version compatibility</div>
<div class="paragraph">
<p>Ogham is compatible with Java 8 and up to Java 15 (included).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_with_spring_boot"><a class="anchor" href="#_with_spring_boot"></a>With Spring Boot</h3>
<details>
<summary class="title">Getting started with Spring Boot</summary>
<div class="content">
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/maven-logo.png" alt="Maven" width="118" height="30"></span></div>
<div class="content">
<div class="listingblock collapse-lines:1-21,28- highlight-lines:22-26">
<div class="title">pom.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;parent&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.3.3.RELEASE<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;relativePath</span><span class="tag">/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span>
  <span class="tag">&lt;/parent&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>samples<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;name&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;description&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/description&gt;</span>

  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;java.version&gt;</span>11<span class="tag">&lt;/java.version&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>

  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-spring-boot-starter-all<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
      <span class="tag">&lt;exclusions&gt;</span>
        <span class="tag">&lt;exclusion&gt;</span>
          <span class="tag">&lt;groupId&gt;</span>org.junit.vintage<span class="tag">&lt;/groupId&gt;</span>
          <span class="tag">&lt;artifactId&gt;</span>junit-vintage-engine<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;/exclusions&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>

  <span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
  <span class="tag">&lt;/build&gt;</span>

<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30"></span></div>
<div class="content">
<div class="listingblock collapse-lines:1-13,17-24 highlight-lines:16">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.3.3.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">io.spring.dependency-management</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">1.0.10.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

group = <span class="string"><span class="delimiter">'</span><span class="content">samples</span><span class="delimiter">'</span></span>
version = <span class="string"><span class="delimiter">'</span><span class="content">0.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
sourceCompatibility = <span class="string"><span class="delimiter">'</span><span class="content">11</span><span class="delimiter">'</span></span>

repositories {
  mavenCentral()
}

dependencies {
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-spring-boot-starter-all:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>

  testImplementation(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-test</span><span class="delimiter">'</span></span>) {
    exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.junit.vintage</span><span class="delimiter">'</span></span>, <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">junit-vintage-engine</span><span class="delimiter">'</span></span>
  }
}

test {
  useJUnitPlatform()
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This will include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sending email through SMTP server (using <a href="https://javaee.github.io/javamail/">JavaMail</a>)</p>
</li>
<li>
<p>Sending email through <a href="https://sendgrid.com/">SendGrid</a></p>
</li>
<li>
<p>Sending SMS through SMPP server (using <a href="https://github.com/fizzed/cloudhopper-smpp">Cloudhopper</a>)</p>
</li>
<li>
<p>Sending SMS through <a href="https://www.ovhtelecom.fr/sms/api-sms.xml">OVH SMS API</a></p>
</li>
<li>
<p><a href="http://freemarker.org/">FreeMarker</a> template engine available for building message contents</p>
</li>
<li>
<p><a href="http://www.thymeleaf.org/">ThymeLeaf</a> template engine available for building message contents</p>
</li>
<li>
<p>Support of <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> auto-detection mechanism and configuration properties</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can combine Ogham with existing Spring Boot dependencies:</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="title">Example 1. Ogham adapts itself to Spring Boot features</div>
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/maven-logo.png" alt="Maven" width="118" height="30"></span></div>
<div class="content">
<div class="listingblock collapse-lines:1-21,40- highlight-lines:22-26">
<div class="title">pom.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;parent&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.3.3.RELEASE<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;relativePath</span><span class="tag">/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span>
  <span class="tag">&lt;/parent&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>samples<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;name&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;description&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/description&gt;</span>

  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;java.version&gt;</span>11<span class="tag">&lt;/java.version&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>

  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-spring-boot-starter-all<span class="tag">&lt;/artifactId&gt;</span>    <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/artifactId&gt;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/artifactId&gt;</span>    <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/artifactId&gt;</span>         <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
      <span class="tag">&lt;exclusions&gt;</span>
        <span class="tag">&lt;exclusion&gt;</span>
          <span class="tag">&lt;groupId&gt;</span>org.junit.vintage<span class="tag">&lt;/groupId&gt;</span>
          <span class="tag">&lt;artifactId&gt;</span>junit-vintage-engine<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;/exclusions&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>

  <span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
  <span class="tag">&lt;/build&gt;</span>

<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add Ogham starter for Spring Boot to benefit for all Ogham features in
your Spring Boot application.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Import FreeMarker starter as usual. Ogham will adapt to additional FreeMarker
provided by Spring Boot.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Import Thymeleaf starter as usual. Ogham will adapt to additional Thymeleaf
provided by Spring Boot.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Import Mail starter as usual. Ogham will adapt to use mail features provided
by Spring Boot.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30"></span></div>
<div class="content">
<div class="listingblock collapse-lines:1-13,21-27 highlight-lines:16">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.3.3.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">io.spring.dependency-management</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">1.0.10.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

group = <span class="string"><span class="delimiter">'</span><span class="content">samples</span><span class="delimiter">'</span></span>
version = <span class="string"><span class="delimiter">'</span><span class="content">0.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
sourceCompatibility = <span class="string"><span class="delimiter">'</span><span class="content">11</span><span class="delimiter">'</span></span>

repositories {
  mavenCentral()
}

dependencies {
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-spring-boot-starter-all:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>   <i class="conum" data-value="1"></i><b>(1)</b>

  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-freemarker</span><span class="delimiter">'</span></span>      <i class="conum" data-value="2"></i><b>(2)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-thymeleaf</span><span class="delimiter">'</span></span>       <i class="conum" data-value="3"></i><b>(3)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-mail</span><span class="delimiter">'</span></span>            <i class="conum" data-value="4"></i><b>(4)</b>
  testImplementation(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-test</span><span class="delimiter">'</span></span>) {
    exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.junit.vintage</span><span class="delimiter">'</span></span>, <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">junit-vintage-engine</span><span class="delimiter">'</span></span>
  }
}

test {
  useJUnitPlatform()
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add Ogham starter for Spring Boot to benefit for all Ogham features in
your Spring Boot application.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Import FreeMarker starter as usual. Ogham will adapt to additional FreeMarker
provided by Spring Boot.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Import Thymeleaf starter as usual. Ogham will adapt to additional Thymeleaf
provided by Spring Boot.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Import Mail starter as usual. Ogham will adapt to use mail features provided
by Spring Boot.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Ogham will auto-configure to use Spring Boot additions and support Spring Boot
configuration properties like <code>spring.mail.host</code> for example.</p>
</div>
<div class="paragraph">
<p>Ogham is compatible with following Spring Boot versions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1.4.x (currently automatically tested against 1.4.7.RELEASE, see note below)</p>
</li>
<li>
<p>1.5.x (currently automatically tested against 1.5.22.RELEASE)</p>
</li>
<li>
<p>2.1.x (currently automatically tested against 2.1.18.RELEASE)</p>
</li>
<li>
<p>2.2.x (currently automatically tested against 2.2.12.RELEASE)</p>
</li>
<li>
<p>2.3.x (currently automatically tested against 2.3.7.RELEASE)</p>
</li>
<li>
<p>2.4.x (currently automatically tested against 2.4.1.RELEASE)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Java version compatibility</div>
<div class="paragraph">
<p>Ogham is compatible with Java 8 and up to Java 15 (included).</p>
</div>
<div class="paragraph">
<p>However, Spring Boot may not be compatible with some Java versions (depending on
Spring Boot version).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Java 7</div>
<div class="paragraph">
<p>Java 7 support has been dropped since Ogham 3.0.0. Therefore, Ogham is no more
tested with Spring Boot 1.3.x</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Spring Boot 1.4.x and WireMock</div>
<div class="paragraph">
<p>Latest WireMock versions are not compatible with Spring Boot 1.4.x. So if you
are using Spring Boot 1.4.x, also using <code>ogham-test-utils</code> for writing tests and
want to use WireMock in one of your test, you may experience <code>ClassNotFoundException</code>.
This is due to different <code>org.apache.httpcomponents</code> versions.</p>
</div>
<div class="paragraph">
<p>In this case, just use a different version of WireMock by manually adding the dependency
<code>com.github.tomakehurst:wiremock-jre8:2.23.2:test</code>. This will force to use a
previous WireMock version that is compatible with Spring Boot 1.4.x.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</details>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_select_the_features_you_need"><a class="anchor" href="#_select_the_features_you_need"></a>Select the features you need</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Importing <code>ogham-all</code> dependency or <code>ogham-spring-boot-starter-all</code> dependency
is easy but may import dependencies that you
don&#8217;t need. For example, you may only need FreeMarker but not Thymeleaf. Or
you may only need to send emails through SMTP but never use SendGrid.</p>
</div>
<div class="paragraph">
<p>See how to <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#select-features-standalone">select features</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All samples with templates are using ThymeLeaf as template engine. For FreeMarker samples,
take a look at <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#freemarker">FreeMarker section</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_send_email"><a class="anchor" href="#_send_email"></a>Send Email</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The samples are available in the <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage">sample-standard-usage sub-project</a>.</p>
</div>
<div class="paragraph">
<p>All samples shown bellow are using SMTP for sending email.
See <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#sendgrid">Sending email through SendGrid</a>
to know how to send email using SendGrid HTTP API.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_first_email_using_an_existing_smtp_server"><a class="anchor" href="#_first_email_using_an_existing_smtp_server"></a>First email using an existing SMTP server</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This sample demonstrates a basic usage of Ogham. This sample doesn&#8217;t
show real improvement compared to other libraries. However, it is a
the base for understanding the other samples.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>This sample shows how to send a basic email.</p>
</div>
<div class="paragraph">
<p>The first lines configure the properties that will be used by the sender.
Then you must create the service. You can use the MessagingBuilder to help you to create the service.
Finally, the last line sends the email. The specified email is really basic. It only contains the subject, the textual content and the receiver address. The sender address is automatically added to the email by the service based on configuration properties.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSample</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()      <i class="conum" data-value="1"></i><b>(1)</b>
        .environment()
          .properties(properties)                         <i class="conum" data-value="2"></i><b>(2)</b>
          .and()
        .build();                                           <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()                                    <i class="conum" data-value="4"></i><b>(4)</b>
            .subject(<span class="string"><span class="delimiter">&quot;</span><span class="content">BasicSample</span><span class="delimiter">&quot;</span></span>)
            .body().string(<span class="string"><span class="delimiter">&quot;</span><span class="content">email content</span><span class="delimiter">&quot;</span></span>)
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>));
  }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the standard builder (predefined behavior)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Register the custom properties</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create a MessagingService instance</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Send an email with a subject and a simple body. The sender address is automatically set using <code>ogham.email.from.default-value</code> property</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/BasicSample.java?ts=2">Source code of the sample</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The construction of the email is done using a fluent API in order to chain calls and to have a more readable code.</p>
</div>
<div class="paragraph">
<p>Properties are directly provided in the code. You can instead <a href="../user-manual.html#properties-handling">use a configuration file</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Email address format</div>
<div class="paragraph">
<p>Ogham supports the personal information in email address. The format is <code>personal &lt;address&gt;</code>.</p>
</div>
<div class="paragraph">
<p>For example, the address with personal <code>Ogham Test &lt;<a href="mailto:ogham-test@yopmail.com">ogham-test@yopmail.com</a>&gt;</code> will result in
<code>ogham-test@yopmail.com</code> as email address and <code>Ogham Test</code> as personal.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_use_an_html_template_for_email_body"><a class="anchor" href="#_use_an_html_template_for_email_body"></a>Use an HTML template for email body</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This sample demonstrates templating integration to easily externalize
the email content from the source code.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>This sample shows how to send an email with a content following a template engine language.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9,34-46 irrelevant-lines:1-9,12-19 highlight-lines:28-29">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()                           <i class="conum" data-value="1"></i><b>(1)</b>
        .environment()
          .properties(properties)                                              <i class="conum" data-value="2"></i><b>(2)</b>
          .and()
        .build();                                                                <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()                                                         <i class="conum" data-value="4"></i><b>(4)</b>
            .subject(<span class="string"><span class="delimiter">&quot;</span><span class="content">HtmlTemplateSample</span><span class="delimiter">&quot;</span></span>)
            .body().template(<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:/template/thymeleaf/simple.html</span><span class="delimiter">&quot;</span></span>,    <i class="conum" data-value="5"></i><b>(5)</b>
                          <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="integer">42</span>))           <i class="conum" data-value="6"></i><b>(6)</b>
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the standard builder (predefined behavior)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Register the custom properties</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create a MessagingService instance</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Send an email with an explicit subject. The sender address is automatically set using <code>ogham.email.from.default-value</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Indicate the path to the HTML template file (in the classpath)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use any bean object for replacing variables in template</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlTemplateSample.java?ts=2">Source code of the sample</a>.</p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30"></span> ThymeLeaf template</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>        <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">utf-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${name}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${value}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>     <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Include the ThymeLeaf namespace</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use the <code>name</code> attribute value in the template</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Use the <code>value</code> attribute value in the template</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.html?ts=2">Source code of the HTML template</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Using a template is straightforward. Instead of providing a string as body (using <code>body().string(&#8230;&#8203;)</code>),
you change to <code>body().template(&#8230;&#8203;, &#8230;&#8203;)</code>.
The <code>template</code> method requires two pieces of information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The path to the template</p>
</li>
<li>
<p>The variables to evaluate in the template</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The path to the template is a string that may contain a <strong>lookup</strong> prefix. The lookup prefix is used to indicate
where to search the template (from file system, from classpath or anywhere else). Here we explicitly
ask to load the template from classpath (using prefix <code>classpath:</code>). If no lookup is defined,
classpath is used by default. See <a href="../user-manual.html#resource-resolution">Resource resolution section</a> for more information.</p>
</div>
<div class="paragraph">
<p>The variables are any object you are using in your application. No need to convert your object to a
particular format. Directly use what you want.</p>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_use_html_title_as_email_subject"><a class="anchor" href="#_use_html_title_as_email_subject"></a>Use HTML title as email subject</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This sample demonstrates that you can use a single source for both the body and
the subject (same variables and same context). This is particularly useful
for internationalization.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>This sample is a variant of the previous one. It allows you to
directly use the HTML title as subject of your email. It may be
useful to use variables in the subject too, to mutualize the code
and to avoid to create a new file or to use
a different evaluation syntax or context just for one line.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-10,35-47 irrelevant-lines:1-10,12-19">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlTemplateWithSubjectSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API (do not specify subject)</span>
    <span class="comment">// subject is set to null to let automatic mechanism to read the title</span>
    <span class="comment">// of the HTML and use it as subject of your email</span>
    service.send(<span class="keyword">new</span> Email()                                                                    <i class="conum" data-value="1"></i><b>(1)</b>
            .body().template(<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:/template/thymeleaf/simpleWithSubject.html</span><span class="delimiter">&quot;</span></span>,
                          <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="integer">42</span>))
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Subject is no more in Java code</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlTemplateWithSubjectSample.java?ts=2">Source code of the sample</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30"></span> ThymeLeaf template</div>
<div class="content">
<div class="listingblock highlight-lines:4">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>Subject of the email - [[${name}]]<span class="tag">&lt;/title&gt;</span>       <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">utf-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${name}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${value}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The subject is defined in the template and can use same evaluation context (<code>SimpleBean</code>).</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
The subject of the email will be <code>Subject of the email - Welcome foo !</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simpleWithSubject.html?ts=2">Source code of the HTML template</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For text templates, the subject is automatically used (like for HTML title) if the first line starts
with <code>Subject:</code> (spaces can be added after colon). Other lines are used as content of the email.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9,35-47 irrelevant-lines:1-9,12-19">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">TextTemplateWithSubjectSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API (do not specify subject)</span>
    <span class="comment">// subject is set to null to let automatic mechanism to read the title</span>
    <span class="comment">// of the first line if prefixed by &quot;Subject:&quot; and use it as subject of your email</span>
    service.send(<span class="keyword">new</span> Email()                                                                       <i class="conum" data-value="1"></i><b>(1)</b>
            .body().template(<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:/template/freemarker/simpleWithSubject.txt.ftl</span><span class="delimiter">&quot;</span></span>,
                          <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="integer">42</span>))
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Subject is no more in Java code</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/TextTemplateWithSubjectSample.java?ts=2">Source code of the sample</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/freemarker-logo.png" alt="freemarker logo" width="60" height="24"></span> Text template</div>
<div class="content">
<div class="listingblock highlight-lines:1">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">Subject: Welcome ${name} !
Hello ${name},

Foo bar ${value}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
The subject of the email will be <code>Welcome foo !</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/freemarker/simpleWithSubject.txt.ftl?ts=2">Source code of the text template</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_html_body_with_css_and_images"><a class="anchor" href="#_html_body_with_css_and_images"></a>HTML body with CSS and images</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This sample demonstrates that you can reference resources like CSS files or
images as usual without worrying about technical concerns and limitations for
such resources in email context.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>When you develop a Web application, you can use HTML for the content and CSS for
layout and theming. HTML and CSS can use images to make a beautiful Web page.
Each concern is separated in a different file. This is a good practice.</p>
</div>
<div class="paragraph">
<p>However, writing an HTML email is totally different. Indeed, email clients are
not as evolved as Web browsers. Even worse, some clients disable some features
on purpose (like GMail that prevents using <code>style</code> tag). To make an email work
on several clients, you should follow these rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;img&gt;</code> tags that use local images must be embedded</p>
</li>
<li>
<p>Use XHTML instead of HTML</p>
</li>
<li>
<p>Remove HTML comments (except conditional comments used to target Outlook)</p>
</li>
<li>
<p>Add border=0 on all images to avoid an ugly border</p>
</li>
<li>
<p>Do not write shortcut CSS values (<code>padding: 4px 4px 4px 4px;</code> instead of
<code>padding: 4px</code>)</p>
</li>
<li>
<p>Padding is not supported on some clients so you must use margins instead
(adding a parent just for the layout)</p>
</li>
<li>
<p>Background images on body should be moved on another node</p>
</li>
<li>
<p>CSS3 properties are not supported</p>
</li>
<li>
<p>Images must have <code>alt</code> attribute</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are many other rules but the developer should not be constrained and
should be able to write its HTML and CSS like as usual in Web browsers. Ogham
simplifies image and CSS integration and is able to partially rewrite the HTML.</p>
</div>
<div class="exampleblock tab-container  no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-10,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithImagesAndCssTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:/template/withImagesAndCss/resources</span><span class="delimiter">&quot;</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="integer">42</span>))        <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The path to the templates (<code>/template/withImagesAndCss/resources.html</code> for the main body,
<code>/template/withImagesAndCss/resources.txt.ftl</code> for the text alternative)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The template context</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithImagesAndCssTemplateSample.java?ts=2">Source code of the sample</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30"></span> ThymeLeaf template</div>
<div class="content">
<div class="listingblock highlight-lines:7-8,12,18,27,39,42">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>HtmlWithImagesAndCssTemplateSample<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">viewport</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css/layout.css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>                             <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css/theme.css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>                              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;header&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images/h1.gif</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Creating Email Magic</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>                      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${name}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>name<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${value}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>value<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images/left.gif</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">base64</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images/right.gif</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">attach</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>                 <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">social</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.twitter.com/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images/tw.gif</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Twitter</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>                       <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.facebook.com/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images/fb.gif</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Facebook</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">skip</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>           <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sender-info</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013<span class="tag">&lt;br</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">white</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-inline-styles</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">skip</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span> to this newsletter instantly  <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The CSS is parsed by Ogham and applied directly on the HTML (using <code>style</code> attribute)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The CSS is parsed by Ogham and applied directly on the HTML (using <code>style</code> attribute). The CSS may
contain rules that override some rules of other CSS files (like in a browser)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The image is automatically embedded (the path is replaced by a
<a href="https://tools.ietf.org/html/rfc4021#section-2.2.2">Content-ID (or CID)</a> and the image is attached
to the email using <code>ContentDisposition.INLINE</code> with the Content-ID header). The content type is
automatically determined</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The image is converted to a base64 string. The <code>src</code> attribute of the image is updated using
<a href="https://en.wikipedia.org/wiki/Data_URI_scheme">data URI scheme</a>. The content type is automatically
determined</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Same as &lt;3&gt;</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Same as &lt;3&gt;</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The image is not inlined by Ogham. This can be useful to embed it manually.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/withImagesAndCss/resources.html?ts=2">Source code of the HTML template</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/css.png" alt="css" width="37" height="30"></span> CSS</div>
<div class="content">
<div class="listingblock">
<div class="title">layout.css</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="tag">body</span> {
  <span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>;
  <span class="key">width</span>: <span class="float">600px</span>;
}

<span class="tag">header</span> {
  <span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>;
}

<span class="tag">header</span> <span class="tag">img</span> {
  <span class="key">display</span>: <span class="value">block</span>;
  <span class="key">margin</span>: <span class="value">auto</span>;
}


<span class="class">.content</span> {
  <span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>;
}

<span class="class">.left</span>,
<span class="class">.right</span> {
  <span class="key">width</span>: <span class="float">250px</span>;
  <span class="key">display</span>: <span class="value">inline-block</span>;
}

<span class="class">.left</span> {
  <span class="key">margin-right</span>: <span class="float">36px</span>;
}

<span class="tag">footer</span> {
  <span class="key">padding</span>: <span class="float">30px</span>;
}

<span class="tag">footer</span> <span class="class">.sender-info</span>,
<span class="tag">footer</span> <span class="class">.social</span> {
  <span class="key">text-align</span>: <span class="value">center</span>;
}
<span class="tag">footer</span> <span class="class">.social</span> <span class="tag">a</span> {
  <span class="key">display</span>: <span class="value">inline-block</span>;
}
<span class="tag">footer</span> <span class="class">.sender-info</span> {
  <span class="key">margin-top</span>: <span class="float">20px</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">theme.css</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="tag">body</span> {
  <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;
}

<span class="tag">header</span> {
  <span class="key">background</span>: <span class="color">#70bbd9</span>;
}

<span class="class">.content</span> {
  <span class="key">text-align</span>: <span class="value">justify</span>;
}

<span class="tag">footer</span> {
  <span class="key">color</span>:<span class="color">#ffffff</span>;
  <span class="key">font-family</span>:<span class="value">Arial</span>, <span class="value">sans-serif</span>;
  <span class="key">font-size</span>:<span class="float">14px</span>;
  <span class="key">background</span>: <span class="color">#ee4c50</span>;
}

<span class="tag">footer</span> <span class="class">.social</span> <span class="tag">a</span> {
  <span class="key">color</span>:<span class="color">#ffffff</span>;
}

<span class="class">.white</span> {
  <span class="key">color</span>: <span class="color">#fff</span>;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/html.png" alt="html" width="37" height="30"></span> Sent HTML</div>
<div class="content">
<div class="exampleblock TODO">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Add code of the generated HTML with all transformations</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here is the list of supported transformations:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> <code>&lt;img&gt;</code> tags that use local images are embedded (using <code>cid</code> reference)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <code>&lt;img&gt;</code> tags that use local images are embedded (using base64 data URI)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Inline CSS rules using <code>style</code> attribute</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <code>background</code> images that use local images are embedded (using <code>cid</code> reference)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <code>background</code> images that use local images are embedded (using base64 data URI)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Use XHTML instead of HTML</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Tables used for layout explicitly set default values</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Remove HTML comments (except conditional comments used to target Outlook)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Add border=0 on all images to avoid an ugly border</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Do not write shortcut CSS values (<code>padding: 4px 4px 4px 4px;</code> instead of <code>padding: 4px</code>)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Padding is not supported on some clients so you must use margins instead (adding a parent just for the layout)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Background images on body should be moved on another node</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Images must have <code>alt</code> attribute</p>
</li>
</ul>
</div>
<div class="exampleblock TODO">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>List all other rules</p>
</li>
<li>
<p>Indicate what will be supported and what won&#8217;t and why</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_a_working_preview_of_the_html_body_text_alternative"><a class="anchor" href="#_a_working_preview_of_the_html_body_text_alternative"></a>A working preview of the HTML body (text alternative)</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Have you never received an email with strange characters in a textual preview ?</p>
</div>
<div class="paragraph">
<p>This sample demonstrates how to easily provide a text alternative that is
used as textual preview.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>Sending an email with HTML content <strong>and</strong> text content might be really important, at least for
smartphones. When a smartphone receives an email, it displays the sender, the subject and also a
preview of the message, using the text alternative. If the message is only HTML, the preview might
be unreadable.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9,11-20,23-30 highlight-lines:39-40">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlAndTextSample</span> {
  <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> html = <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;!DOCTYPE html&gt;</span><span class="delimiter">&quot;</span></span>
                + <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;html&gt;</span><span class="delimiter">&quot;</span></span>
                +   <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;head&gt;&lt;meta charset=</span><span class="char">\&quot;</span><span class="content">utf-8</span><span class="char">\&quot;</span><span class="content"> /&gt;&lt;/head&gt;</span><span class="delimiter">&quot;</span></span>
                +   <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;body&gt;</span><span class="delimiter">&quot;</span></span>
                +     <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;h1 class=</span><span class="char">\&quot;</span><span class="content">title</span><span class="char">\&quot;</span><span class="content">&gt;Hello World&lt;/h1&gt;</span><span class="delimiter">&quot;</span></span>
                +     <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;p class=</span><span class="char">\&quot;</span><span class="content">text</span><span class="char">\&quot;</span><span class="content">&gt;Foo bar&lt;/p&gt;</span><span class="delimiter">&quot;</span></span>
                +   <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/body&gt;</span><span class="delimiter">&quot;</span></span>
                + <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/html&gt;</span><span class="delimiter">&quot;</span></span>;
  <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> text = <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World !</span><span class="char">\r</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
                + <span class="string"><span class="delimiter">&quot;</span><span class="content">Foo bar</span><span class="delimiter">&quot;</span></span>;

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using the fluent API</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">&quot;</span><span class="content">HtmlAndTextSample</span><span class="delimiter">&quot;</span></span>)
            .text().string(text)              <i class="conum" data-value="1"></i><b>(1)</b>
            .html().string(html)              <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>));
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Explicitly set the textual content (used as alternative body). The alternative body is used when
the email client doesn&#8217;t support HTML or as a preview of the email.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Explicitly set the HTML content (used as main body)</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The call order between <code>text()</code> and <code>html()</code> doesn&#8217;t matter (unlike using <code>.content(new MultiContent(&#8230;&#8203;))</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The underlying <code>Content</code> is a <code>MultiContent</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextSample.java?ts=2">Source code of the sample</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Obviously, you can use templates too. Even better, the following sample shows the shorthand version
that avoids specifying twice the path to the templates (a single path without extension for both HTML
and text template files).</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9,37-49 irrelevant-lines:1-9,12-19 highlight-lines:31-32">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlAndTextTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">&quot;</span><span class="content">HtmlAndTextTemplateSample</span><span class="delimiter">&quot;</span></span>)
            .body().template(<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:/template/thymeleaf/simple</span><span class="delimiter">&quot;</span></span>,          <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="integer">42</span>))    <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The body contains two parts (main body and alternative body) because there are two templates (one
for HTML located at <code>/template/thymeleaf/simple.html</code> and one for text located at
<code>/template/thymeleaf/simple.txt</code>). Only a single path is specified for both template files (without
extension).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The object used for evaluation as usual when using templates (same object used for both HTML and text)</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The underlying <code>Content</code> is a <code>MultiTemplateContent</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextTemplateSample.java?ts=2">Source code of the sample</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/thymeleaf-text.jpg" alt="thymeleaf text" width="30" height="30"></span> Text template</div>
<div class="content">
<div class="listingblock">
<div class="title">Text template located in <code>src/main/resources/template/thymeleaf/simple.txt</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">[[${name}]] [[${value}]]</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.txt?ts=2">Source code of the text template</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30"></span> HTML template</div>
<div class="content">
<div class="listingblock">
<div class="title">HTML template located at <code>src/main/resources/template/thymeleaf/simple.html</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>        <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">utf-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${name}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${value}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>     <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.html?ts=2">Source code of the HTML template</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Ogham will automatically determine file extensions to append according to the kind of message you
are sending. For email, Ogham will search a HTML and a text file by default:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using ThymeLeaf, the file extensions are <code>.html</code> and <code>.txt</code> (configurable).</p>
</li>
<li>
<p>Using FreeMarker, Ogham will search files with extensions <code>.html.ftl</code> and <code>.txt.ftl</code> (configurable).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are using <code>body()</code> (or explicitly using <code>content(new MultiTemplateContent(&#8230;&#8203;))</code>) and you only
provide one template (only <code>HTML</code> for example). Ogham will not fail by default (configurable).
Therefore, you can start your code with only a HTML template and add the text template later when you
need it. That way, your Java code doesn&#8217;t require any change.</p>
</div>
<div class="paragraph">
<p>It is possible to mix templates in the same application. Even better, you can use a template engine
that is better suited for HTML like Thymeleaf and FreeMarker that is better for textual version for
the same email. Just write your templates with the engine you want.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9,37-49 irrelevant-lines:1-9,12-19 highlight-lines:31-32">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlAndTextMixedTemplateEnginesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">&quot;</span><span class="content">HtmlAndTextMixedTemplateEnginesSample</span><span class="delimiter">&quot;</span></span>)
            .body().template(<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:/template/mixed/simple</span><span class="delimiter">&quot;</span></span>,                <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="integer">42</span>))      <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The body contains two parts (main body and alternative body) because there are two templates (one
for HTML located at <code>/template/thymeleaf/simple.html</code> and one for text located at
<code>/template/thymeleaf/simple.txt.ftl</code>). Only a single path is specified for both template files (without
extension). The HTML template uses Thymeleaf while the text template uses FreeMarker.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The object used for evaluation as usual when using templates (same object used for both HTML and text)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextMixedTemplateEnginesSample.java?ts=2">Source code of the sample</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/freemarker-logo.png" alt="freemarker logo" width="60" height="24"></span> Text template</div>
<div class="content">
<div class="listingblock">
<div class="title">Text template located in <code>src/main/resources/template/mixed/simple.txt.ftl</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">${name} ${value}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/mixed/simple.txt.ftl?ts=2">Source code of the text template</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30"></span> HTML template</div>
<div class="content">
<div class="listingblock">
<div class="title">HTML template located at <code>src/main/resources/template/mixed/simple.html</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">utf-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${name}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${value}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/mixed/simple.html?ts=2">Source code of the HTML template</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can notice that the Java code has not changed at all (only the path for the sample). The aim is
to use the template engine that best suits your needs.</p>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_attach_files_to_the_email"><a class="anchor" href="#_attach_files_to_the_email"></a>Attach files to the email</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This sample demonstrates how to send files with the email.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-12 irrelevant-lines:1-12,14-21 highlight-lines:32-33">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">java.io.InputStream</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">WithAttachmentSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">&quot;</span><span class="content">WithAttachmentSample</span><span class="delimiter">&quot;</span></span>)
            .body().string(<span class="string"><span class="delimiter">&quot;</span><span class="content">content of the email</span><span class="delimiter">&quot;</span></span>)
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">&quot;</span></span>)
            .attach().resource(<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:/attachment/test.pdf</span><span class="delimiter">&quot;</span></span>)            <i class="conum" data-value="1"></i><b>(1)</b>
            .attach().stream(<span class="string"><span class="delimiter">&quot;</span><span class="content">from-stream.pdf</span><span class="delimiter">&quot;</span></span>, loadInputStream()));        <i class="conum" data-value="2"></i><b>(2)</b>
  }

  <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">InputStream</span> loadInputStream() {
    <span class="keyword">return</span> WithAttachmentSample.class.getResourceAsStream(<span class="string"><span class="delimiter">&quot;</span><span class="content">/attachment/test.pdf</span><span class="delimiter">&quot;</span></span>);
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Attach a PDF file that exists in the classpath to the email. The name of the attachment uses the name of the file</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use an <code>InputStream</code> and name the attachment</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/WithAttachmentSample.java?ts=2">Source code of the sample</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Attaching a file to the email is quite simple. You just need to provide the path to the file.
The file is loaded from classpath but could also be loaded from file system or anywhere else
(see <a href="../user-manual.html#resource-resolution">resource resolution section</a>). In case you are using a file,
the name of the attachment displayed in the email is automatically determined (<code>test.pdf</code> in the example).</p>
</div>
<div class="paragraph">
<p>It is often not possible to handle files directly. In that case you will use <code>InputStream</code> or
<code>byte[]</code>. In that case, you need to name the attachment explicitly.</p>
</div>
<div class="paragraph">
<p>In both cases, the mimetype is automatically determined (<code>application/pdf</code> in this case).
Mimetype is really important to ensure that the recipient(s) will be able to download or view
the files correctly. It is possible to explicitly set the content type of the attachment if the
automatic behavior doesn&#8217;t fit your needs.</p>
</div>
<div class="paragraph">
<p>The file content is linked to the email using <code>ContentDisposition.ATTACHMENT</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you are using <code>InputStream</code>, you need to close the stream after sending the email.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also add a custom description for any attachment but in this case use <code>Attachment</code> class.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can link a file to the email body using <code>embed()</code> instead of <code>attach()</code>. To make the link,
the email body must contain an explicit reference using a
<a href="https://tools.ietf.org/html/rfc4021#section-2.2.2">Content-ID (or CID)</a>. The linked attachment
must provide the Content-ID header with the same CID (automatically set by Ogham). The embedded attachment
disposition is automatically set to <code>ContentDisposition.INLINE</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_other_email_features"><a class="anchor" href="#_other_email_features"></a>Other email features</h4>
<div class="paragraph">
<p>See user guide to read about <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#email-usage">the many other features</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_send_sms"><a class="anchor" href="#_send_sms"></a>Send SMS</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The samples are available in the <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage">sample-standard-usage sub-project</a>.</p>
</div>
<div class="paragraph">
<p>All samples shown bellow are using SMPP for sending SMS.
The <a href="https://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer">SMPP</a> protocol
is the standard way to send SMS. Only a subset of SMPP properties are used
in following samples. The whole list of SMPP properties is available
in <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#advanced-smpp-configuration">advanced configuration</a>.</p>
</div>
<div class="paragraph">
<p>See <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#ovh">Sending SMS through OVH</a> to know how to send SMS using OVH HTTP API.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_first_sms_using_an_existing_smpp_server"><a class="anchor" href="#_first_sms_using_an_existing_smpp_server"></a>First SMS using an existing SMPP server</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This sample demonstrates a basic usage of Ogham for sending SMS. It is a
the base for understanding the other samples.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>This sample defines two properties mandatory (system ID and password) by this protocol in order to use it.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);                                 <i class="conum" data-value="1"></i><b>(1)</b>
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);                                 <i class="conum" data-value="2"></i><b>(2)</b>
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.system-id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server system ID&gt;</span><span class="delimiter">&quot;</span></span>);                       <i class="conum" data-value="3"></i><b>(3)</b>
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.password</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server password&gt;</span><span class="delimiter">&quot;</span></span>);                         <i class="conum" data-value="4"></i><b>(4)</b>
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;phone number to display for the sender&gt;</span><span class="delimiter">&quot;</span></span>);  <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()                                               <i class="conum" data-value="6"></i><b>(6)</b>
        .environment()
          .properties(properties)                                                                  <i class="conum" data-value="7"></i><b>(7)</b>
          .and()
        .build();                                                                                    <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()                                                                               <i class="conum" data-value="9"></i><b>(9)</b>
            .message().string(<span class="string"><span class="delimiter">&quot;</span><span class="content">sms content</span><span class="delimiter">&quot;</span></span>)
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">+33752962193</span><span class="delimiter">&quot;</span></span>));
  }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Configure the SMPP server host</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Configure the SMPP server port</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The SMPP system ID</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The SMPP password</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The phone number of the sender</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use the standard builder (predefined behavior)</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Register the custom properties</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Create a MessagingService instance</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Send a SMS with a simple message. The sender phone number is automatically set using
<code>ogham.sms.from.default-value</code> property</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSample.java?ts=2">Source code of the sample</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The construction of the SMS is done using a fluent API in order to chain calls and to have a more
readable code.</p>
</div>
<div class="paragraph">
<p>Properties are directly provided in the code. You can instead <a href="../user-manual.html#properties-handling">use a configuration file</a>.</p>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_use_a_template_for_sms_content"><a class="anchor" href="#_use_a_template_for_sms_content"></a>Use a template for SMS content</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This sample demonstrates templating integration to easily externalize
the SMS content from the source code.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>This sample shows how to send a SMS with a content following a template engine language.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9,35-47 irrelevant-lines:1-9,12-21 highlight-lines:29,30">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">TemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.system-id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server system ID&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.password</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server password&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;phone number to display for the sender&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()                              <i class="conum" data-value="1"></i><b>(1)</b>
        .environment()
          .properties(properties)                                                 <i class="conum" data-value="2"></i><b>(2)</b>
          .and()
        .build();                                                                   <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()                                                              <i class="conum" data-value="4"></i><b>(4)</b>
            .message().template(<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:/template/thymeleaf/simple.txt</span><span class="delimiter">&quot;</span></span>,     <i class="conum" data-value="5"></i><b>(5)</b>
                          <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="integer">42</span>))              <i class="conum" data-value="6"></i><b>(6)</b>
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">+33752962193</span><span class="delimiter">&quot;</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the standard builder (predefined behavior)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Register the custom properties</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create a MessagingService instance</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Send a SMS with message that comes from the evaluated template. The sender address is automatically
set using <code>ogham.sms.from.default-value</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Indicate the path to the template file (in the classpath)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use any bean object for replacing variables in template</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/TemplateSample.java?ts=2">Source code of the sample</a>.</p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30"></span> ThymeLeaf template</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">[[${name}]] [[${value}]]</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.txt?ts=2">Source code of the template</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Using a template is straightforward. Instead of providing a string content (using <code>.message().string(&#8230;&#8203;)</code>),
you call <code>.message().template(&#8230;&#8203;, &#8230;&#8203;)</code>.
The <code>template</code> method requires two pieces of information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The path to the template</p>
</li>
<li>
<p>The variables to evaluate in the template</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The path to the template is a string with a <strong>lookup</strong> prefix. The lookup prefix is used to indicate
where to search the template (from file system, from classpath or anywhere else). Here we explicitly
ask to load the template from classpath (using prefix <code>classpath:</code>). If no lookup is defined,
classpath is used by default. See <a href="../user-manual.html#resource-resolution">Resource resolution section</a> for more information.</p>
</div>
<div class="paragraph">
<p>The variables are any object you are using in your application. No need to convert your object to
a particular format. Directly use what you want.</p>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_send_a_long_sms"><a class="anchor" href="#_send_a_long_sms"></a>Send a long SMS</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":grey_question:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This sample demonstrates that you don&#8217;t have to handle these kind of
technical concerns.</p>
</div>
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>As you may know, SMS stands for Short Message Service. Basically, the messages are limited to a maximum
of 160 characters if character encoding is using 7bits. Using a 8-bit character encoding decreases
the limit to 140 characters and 70 characters for a 16-bit encoding. If needed, the library will
split your messages into several parts the right way to be recomposed by clients later (according
to the message encoding). Therefore, you don&#8217;t need to handle the split of messages in your code:</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9,12-21 highlight-lines:27-30">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">LongMessageSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.system-id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server system ID&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.password</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;your server password&gt;</span><span class="delimiter">&quot;</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;phone number to display for the sender&gt;</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="predefined-type">String</span> longMessage = <span class="string"><span class="delimiter">&quot;</span><span class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad </span><span class="delimiter">&quot;</span></span>
              + <span class="string"><span class="delimiter">&quot;</span><span class="content">minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehender</span><span class="delimiter">&quot;</span></span>
              + <span class="string"><span class="delimiter">&quot;</span><span class="content">it in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui o</span><span class="delimiter">&quot;</span></span>
              + <span class="string"><span class="delimiter">&quot;</span><span class="content">fficia deserunt mollit anim id est laborum.</span><span class="delimiter">&quot;</span></span>;
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(longMessage)
            .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">+33752962193</span><span class="delimiter">&quot;</span></span>));
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/LongMessageSample.java?ts=2">Source code of the sample</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Message length depends on encoding</div>
<div class="paragraph">
<p>Larger content (concatenated SMS, multipart or segmented SMS, or "long SMS") can be sent using
multiple messages, in which case each message will start with a User Data Header (UDH) containing
segmentation information. Since UDH is part of the payload, the number of available characters per
segment is lower: 153 for 7-bit encoding, 134 for 8-bit encoding and 67 for 16-bit encoding. The
receiving handset is then responsible for reassembling the message and presenting it to the user
as one long message. While the standard theoretically permits up to 255 segments, 6 to 8 segment
messages are the practical maximum.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Default encoding</div>
<div class="paragraph">
<p>By default, Ogham sends the SMS using 8-bit encoding.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock TODO">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>explain how to use different encoding</p>
</li>
<li>
<p>link to advanced configuration section</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_other_sms_features"><a class="anchor" href="#_other_sms_features"></a>Other SMS features</h4>
<div class="paragraph">
<p>Ogham provides <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#sms-usage">many other features</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a>Testing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_include_test_utilities"><a class="anchor" href="#_include_test_utilities"></a>Include test utilities</h3>
<details>
<summary class="title">Getting started</summary>
<div class="content">
<div class="exampleblock tab-container">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/maven-logo.png" alt="Maven" width="118" height="30"></span></div>
<div class="content">
<div class="listingblock">
<div class="title">Add <code>ogham-test-utils</code> dependency to your pom.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>ogham-test-utils<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/pom.xml?ts=2">View code of an example pom.xml</a></p>
</div>
</div>
</div>
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30"></span></div>
<div class="content">
<div class="listingblock">
<div class="title">Add <code>ogham-test-utils</code> to your build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
  testImplementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-test-utils:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This will include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://junit.org/junit5/">JUnit to run tests (JUnit 4 and Junit 5)</a></p>
</li>
<li>
<p><a href="http://site.mockito.org/">Mockito for mocking Java code</a></p>
</li>
<li>
<p><a href="http://hamcrest.org/JavaHamcrest/">Hamcrest for assertions</a></p>
</li>
<li>
<p><a href="http://www.icegreen.com/greenmail/">GreenMail for mocking a SMTP server</a></p>
</li>
<li>
<p><a href="https://jsmpp.org/">jSMPP for mocking a SMPP server</a></p>
</li>
<li>
<p><a href="http://wiremock.org/">WireMock for mocking HTTP server</a></p>
</li>
<li>
<p><a href="http://spockframework.org/">Spockframework for writing very very readable unit tests</a></p>
</li>
<li>
<p>and some utilities that may be useful</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can
<a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#testing-tools-eclipse-static-imports">configure Eclipse</a>
to provide autocompletion for static imports.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_testing_emails"><a class="anchor" href="#_testing_emails"></a>Testing emails</h3>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>To test your application emails, you can start a local SMTP server. You can then use Ogham to make
assertions on your email (right recipients, right sender, right body&#8230;&#8203;). Ogham uses
<a href="http://www.icegreen.com/greenmail/">GreenMail</a> as local SMTP server.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-23 irrelevant-lines:1-23">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);              <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">&quot;</span></span>)
            .set(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.host</span><span class="delimiter">&quot;</span></span>, SMTP.getBindAddress())            <i class="conum" data-value="2"></i><b>(2)</b>
            .set(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail.smtp.port</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))   <i class="conum" data-value="3"></i><b>(3)</b>
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">&quot;</span><span class="content">Simple</span><span class="delimiter">&quot;</span></span>)
                .body().string(<span class="string"><span class="delimiter">&quot;</span><span class="content">string body</span><span class="delimiter">&quot;</span></span>)
                .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">&quot;</span></span>));
    assertThat(greenMail).receivedMessages()                                 <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>))                                                        <i class="conum" data-value="5"></i><b>(5)</b>
      .message(<span class="integer">0</span>)                                                          <i class="conum" data-value="6"></i><b>(6)</b>
        .subject(is(<span class="string"><span class="delimiter">&quot;</span><span class="content">Simple</span><span class="delimiter">&quot;</span></span>))                                           <i class="conum" data-value="7"></i><b>(7)</b>
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">test.sender@sii.fr</span><span class="delimiter">&quot;</span></span>))                     <i class="conum" data-value="8"></i><b>(8)</b>
          .personal(hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sender Name</span><span class="delimiter">&quot;</span></span>)).and()                     <i class="conum" data-value="9"></i><b>(9)</b>
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">recipient@sii.fr</span><span class="delimiter">&quot;</span></span>))                       <i class="conum" data-value="10"></i><b>(10)</b>
          .personal(hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">Recipient Name</span><span class="delimiter">&quot;</span></span>)).and()                  <i class="conum" data-value="11"></i><b>(11)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">&quot;</span><span class="content">string body</span><span class="delimiter">&quot;</span></span>))                          <i class="conum" data-value="12"></i><b>(12)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/plain</span><span class="delimiter">&quot;</span></span>)).and()                 <i class="conum" data-value="13"></i><b>(13)</b>
        .alternative(nullValue())                                        <i class="conum" data-value="14"></i><b>(14)</b>
        .attachments(emptyIterable());                                   <i class="conum" data-value="15"></i><b>(15)</b>
    <span class="comment">// @formatter:on</span>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare and initialize the GreenMail JUnit rule to start a local SMTP server</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Get the local SMTP server host address and configure Ogham to use this value</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Get the local SMTP server port and configure Ogham to use this value</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Entry point for declaring assertion on received emails using a fluent API</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Assert that one and only one email has been received</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Access the first received message for declaring assertions for that message using fluent API</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Assert that the subject of the first message is exactly <code>Simple</code> string</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Assert that the sender email address is exactly <code>test.sender@sii.fr</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Assert that the sender name is exactly <code>Sender Name</code></td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Assert that the recipient email address is exactly <code>recipient@sii.fr</code></td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Assert that the recipient name is exactly <code>Recipient Name</code></td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>Assert that the body of the received email is exactly <code>string body</code></td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td>Assert that the mimetype of the body of the received email starts with <code>text/plain</code></td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td>Assert that received email has no alternative content</td>
</tr>
<tr>
<td><i class="conum" data-value="15"></i><b>15</b></td>
<td>Assert that received email has no attachment</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailTestSample.java?ts=2">Source code of the sample</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_testing_sms"><a class="anchor" href="#_testing_sms"></a>Testing SMS</h3>
<details>
<summary class="title">Explanations &amp; sample</summary>
<div class="content">
<div class="paragraph">
<p>To test your application SMS, you can start a local SMPP server. You can then use Ogham to make assertions on you SMS (recipient phone number, sender phone number and message). Ogham uses <a href="https://jsmpp.org/">jSMPP</a> as local SMPP server.</p>
</div>
<div class="exampleblock tab-container no-max-height">
<div class="content">
<div class="openblock tab">
<div class="title"><span class="image"><img src="../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</div>
<div class="content">
<div class="listingblock collapse-lines:1-19 irrelevant-lines:1-19">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.jsmpp.bean.SubmitSm</span>;
<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.sms.JsmppServerRule</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.sms.SmppServerRule</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">SmsTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> SmppServerRule&lt;SubmitSm&gt; smppServer = <span class="keyword">new</span> JsmppServerRule();    <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">+33603040506</span><span class="delimiter">&quot;</span></span>)
            .set(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>)                 <i class="conum" data-value="2"></i><b>(2)</b>
            .set(<span class="string"><span class="delimiter">&quot;</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">&quot;</span></span>, smppServer.getPort())        <i class="conum" data-value="3"></i><b>(3)</b>
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Sms()
              .message().string(<span class="string"><span class="delimiter">&quot;</span><span class="content">sms content</span><span class="delimiter">&quot;</span></span>)
              .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">0601020304</span><span class="delimiter">&quot;</span></span>));
    assertThat(smppServer).receivedMessages()                                <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>))                                                        <i class="conum" data-value="5"></i><b>(5)</b>
      .message(<span class="integer">0</span>)                                                          <i class="conum" data-value="6"></i><b>(6)</b>
        .content(is(<span class="string"><span class="delimiter">&quot;</span><span class="content">sms content</span><span class="delimiter">&quot;</span></span>))                                      <i class="conum" data-value="7"></i><b>(7)</b>
        .from()
          .number(is(<span class="string"><span class="delimiter">&quot;</span><span class="content">+33603040506</span><span class="delimiter">&quot;</span></span>))                                  <i class="conum" data-value="8"></i><b>(8)</b>
          .and()
        .to()
          .number(is(<span class="string"><span class="delimiter">&quot;</span><span class="content">0601020304</span><span class="delimiter">&quot;</span></span>));                                   <i class="conum" data-value="9"></i><b>(9)</b>
    <span class="comment">// @formatter:on</span>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare and initialize the JUnit rule that encapsulates jSMPP for starting a local SMPP server in tests (you can set a different port than the default one)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Configure Ogham to use <code>localhost</code> for SMPP host</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Get the local SMPP server port and configure Ogham to use this value</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Entry point for declaring assertion on received SMS using a fluent API</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Assert that one and only one SMS has been received</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Access the first received message for declaring assertions for that message using fluent API</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Assert that the received message text is exactly <code>sms content</code></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Assert that the sender phone number is <code>+33603040506</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Assert that the recipient phone number is <code>0601020304</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/SmsTestSample.java?ts=2">Source code of the sample</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_more_testing_features"><a class="anchor" href="#_more_testing_features"></a>More testing features</h3>
<div class="paragraph">
<p>Ogham provides many other tool features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#testing-email">Email assertions and tools</a>.</p>
</li>
<li>
<p><a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#testing-sms">SMS assertions and tools</a>.</p>
</li>
<li>
<p><a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#random-ports">Use random ports to parallelize tests</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_configuration"><a class="anchor" href="#_advanced_configuration"></a>Advanced configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#section-advanced-configuration">See advanced configuration in full documentation</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extend"><a class="anchor" href="#_extend"></a>Extend</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#section-extend">See how to extend Ogham in full documentation</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tips"><a class="anchor" href="#_tips"></a>Tips</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/user-manual.html#section-tips">See tips in full documentation</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_support_developer"><a class="anchor" href="#_support_developer"></a>Support developer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I am currently the single developer on this project for several years.
I have many ideas for this project to ease other developer work.</p>
</div>
<div class="paragraph">
<p>You can help me by either <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/contribute.html">contributing</a> or by <a href="https://groupe-sii.github.io/ogham/v3.1.0-SNAPSHOT/donate.html">making a donation</a>.</p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://www.paypal.com/donate?hosted_button_id=KQKEFU5LE5K2J"><img src="../images//donation/paypal-small.png" alt="Donate with PayPal"></a></span>
<span class="image"><a class="image" href="https://commerce.coinbase.com/checkout/7c322363-b8ef-4624-8957-a750b631f859"><img src="../images//donation/coinbase-small.png" alt="Donate crypto (Bitcoin, Ethereum, &#8230;&#8203;)"></a></span></p>
</div>
<div class="paragraph">
<p>Thank you !</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-01-20 03:52:15 UTC
</div>
</div>
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</body>
</html>