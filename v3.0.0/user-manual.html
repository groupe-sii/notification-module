 


  <!doctype html>
<!--
 Generated by Apache Maven Doxia  at 2021-01-20  Rendered using Reflow Maven Skin 2.3.0 (http://devacfr.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">
        <head>
    <meta charset="UTF-8" />
    <title>Ogham User Manual | ogham</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
      <meta http-equiv="content-language" content="en" />
                                                        <link href="./css/themes/cerulean/bootstrap.min.css" rel="stylesheet" />
    <link href="./css/fontawesome/all.min.css" rel="stylesheet" />
    <link href="./css/reflow-skin.css" rel="stylesheet" />

    <link href="./css/lightbox.css" rel="stylesheet" />
    <link href="./css/site.css" rel="stylesheet" />
    <link href="./css/print.css" rel="stylesheet" media="print" />
<link rel="icon" href="./favicon.ico" type="image/x-icon" />
			<link rel="shortcut icon" href="./favicon.ico" type="image/x-icon" />
			<link rel="author" href="https://github.com/aurelien-baudet" />
			<!--link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700" crossorigin="anonymous" /-->
			<!-- 
				TODO: Asciidoctor uses Font Awesome 4 while Reflow skin uses Font Awesome 5.
				Therefore, we need to manually provide missing icons until Asciidoctor upgrades Font Awesome.
			-->
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
			<link rel="stylesheet" href="./styles/doc-styles.css" />
			<link rel="stylesheet" href="./css/site-styles.css" />
        </head> <!-- end : head -->
<body class="page-user-manual project-ogham-parent anchorjs-enabled">
    <nav id="m-top-navbar" class="navbar navbar-expand-lg fixed-top border-bottom">
<div class="container">            <a class="navbar-brand mb-0 h1" href="https://groupe-sii.github.io/ogham">
            Ogham
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#top-navbar-collapse-1" aria-controls="top-navbar-collapse-1" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar-collapse-1">
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item " ><a  href="user-manual.html#install"  title="Download"  class="nav-link" >Download</a></li>
                    <li class="nav-item " ><a  href="https://github.com/groupe-sii/ogham"  title="GitHub project"  target="_blank"   class="externalLink nav-link" >GitHub project</a></li>
                    <li class="nav-item dropdown active">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation <b class="caret"></b></a>
                        <div class="dropdown-menu">
                            <a href="" title="User manual"  class="dropdown-item active">User manual</a>
                            <a href="apidocs/index.html" title="Javadoc"  class="dropdown-item ">Javadoc</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Samples <b class="caret"></b></a>
                        <div class="dropdown-menu">
                            <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email" title="Email"  class="dropdown-item ">Email</a>
                            <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms" title="SMS"  class="dropdown-item ">SMS</a>
                            <a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/java/fr/sii/ogham/sample/springboot/" title="Spring"  class="dropdown-item ">Spring</a>
                            <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/template/thymeleaf" title="Thymeleaf"  class="dropdown-item ">Thymeleaf</a>
                            <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/template/freemarker" title="FreeMarker"  class="dropdown-item ">FreeMarker</a>
                            <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextMixedTemplateEnginesSample.java?ts=4" title="Mixing Thymeleaf & FreeMarker"  class="dropdown-item ">Mixing Thymeleaf & FreeMarker</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Versions <b class="caret"></b></a>
                        <div class="dropdown-menu">
                            <a href="release-notes.html" title="[version]"  class="dropdown-item ">[version]</a>
                        </div>
                    </li>
                </ul><!--/ul.navbar-nav -->
            </div><!--/.nav-collapse -->
</div> <!--/.container -->    </nav> <!--/.navbar -->
    <div class="main-body">
    <div class="header " role="main">
        <div class="container container-fluid">
    <div id="banner" class="header--banner">
        <div class="row m-1">
          <div class="col-md-12">
            <div class="float-left header--banner--left bannerLeft">
                    <a href=".">
            <h1>Ogham</h1>
            </a>
                    <p class="lead">Sending email, sms or whatever is a piece of cake</p>
            </div>
            <div class="float-right header--banner--right bannerRight">
            </div>
          </div>
        </div>
    </div>
        </div>
    </div> <!-- end : header -->
    <div class="row mt-5">
        <div class="d-xs-none d-sm-none d-md-none d-lg-block col-lg-2">
        </div>
        <main class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-8" role="main">
        <h1>Ogham User Manual</h1> 
<div id="toc" class="toc"> 
 <div id="toctitle">
   Table of Contents 
 </div> 
 <ul class="sectlevel1"> 
  <li><a href="#introduction">1. Introduction</a> 
   <ul class="sectlevel2"> 
    <li><a href="#existing_libraries">1.1. Existing libraries</a></li> 
    <li><a href="#the_ogham_module">1.2. The Ogham module</a> 
     <ul class="sectlevel3"> 
      <li><a href="#code_once_adapt_to_environment">1.2.1. Code once, adapt to environment</a></li> 
     </ul> </li> 
   </ul> </li> 
  <li><a href="#quick_start">2. Quick start</a> 
   <ul class="sectlevel2"> 
    <li><a href="#install">2.1. Quick and simple inclusion</a> 
     <ul class="sectlevel3"> 
      <li><a href="#install-standalone">2.1.1. Standalone</a></li> 
      <li><a href="#install-spring-boot">2.1.2. With Spring Boot</a></li> 
     </ul> </li> 
    <li><a href="#select_the_features_you_need">2.2. Select the features you need</a> 
     <ul class="sectlevel3"> 
      <li><a href="#select-features-standalone">2.2.1. Standalone</a></li> 
      <li><a href="#select-features-spring-boot">2.2.2. With Spring Boot</a></li> 
     </ul> </li> 
   </ul> </li> 
  <li><a href="#usage">3. Usage</a> 
   <ul class="sectlevel2"> 
    <li><a href="#email-usage">3.1. Send Email</a> 
     <ul class="sectlevel3"> 
      <li><a href="#first_email_using_an_existing_smtp_server">3.1.1. First email using an existing SMTP server</a></li> 
      <li><a href="#email-template">3.1.2. Use an HTML template for email body</a></li> 
      <li><a href="#html-title-subject">3.1.3. Use HTML title as email subject</a></li> 
      <li><a href="#css-images-inlining">3.1.4. HTML body with CSS and images</a></li> 
      <li><a href="#text-alternative">3.1.5. A working preview of the HTML body (text alternative)</a></li> 
      <li><a href="#attach_files_to_the_email">3.1.6. Attach files to the email</a></li> 
      <li><a href="#globally_configure_default_email_fields">3.1.7. Globally configure default email fields</a></li> 
      <li><a href="#provide_smtp_authentication">3.1.8. Provide SMTP authentication</a></li> 
      <li><a href="#use_ssl">3.1.9. Use SSL</a></li> 
      <li><a href="#gmail">3.1.10. Send email through GMail</a></li> 
      <li><a href="#sendgrid">3.1.11. Sending email through SendGrid</a></li> 
      <li><a href="#internationalization">3.1.12. Internationalization</a></li> 
     </ul> </li> 
    <li><a href="#sms-usage">3.2. Send SMS</a> 
     <ul class="sectlevel3"> 
      <li><a href="#first_sms_using_an_existing_smpp_server">3.2.1. First SMS using an existing SMPP server</a></li> 
      <li><a href="#sms-template">3.2.2. Use a template for SMS content</a></li> 
      <li><a href="#auto-split-sms">3.2.3. Send a long SMS</a></li> 
      <li><a href="#sending_sms_through_smsglobal">3.2.4. Sending SMS through SmsGlobal</a></li> 
      <li><a href="#sending_sms_through_ovh">3.2.5. Sending SMS through OVH</a></li> 
      <li><a href="#globally_configure_default_sender_phone_number">3.2.6. Globally configure default sender phone number</a></li> 
     </ul> </li> 
    <li><a href="#resource-resolution">3.3. Resource handling</a> 
     <ul class="sectlevel3"> 
      <li><a href="#resource_resolution">3.3.1. Resource resolution</a></li> 
      <li><a href="#resources_referenced_in_templates">3.3.2. Resources referenced in templates</a></li> 
     </ul> </li> 
    <li><a href="#properties-handling">3.4. Properties handling</a> 
     <ul class="sectlevel3"> 
      <li><a href="#properties_priority">3.4.1. Properties priority</a></li> 
      <li><a href="#files_location">3.4.2. Files location</a></li> 
      <li><a href="#configuration_profiles">3.4.3. Configuration profiles</a></li> 
     </ul> </li> 
    <li><a href="#templating">3.5. Templating</a> 
     <ul class="sectlevel3"> 
      <li><a href="#freemarker">3.5.1. FreeMarker</a></li> 
      <li><a href="#thymeleaf">3.5.2. ThymeLeaf</a></li> 
      <li><a href="#mixed">3.5.3. Mixed</a></li> 
     </ul> </li> 
    <li><a href="#spring-boot-usage">3.6. Using Ogham in a Spring Boot application</a> 
     <ul class="sectlevel3"> 
      <li><a href="#send_email">3.6.1. Send email</a></li> 
      <li><a href="#send_sms">3.6.2. Send SMS</a></li> 
     </ul> </li> 
   </ul> </li> 
  <li><a href="#testing">4. Testing</a> 
   <ul class="sectlevel2"> 
    <li><a href="#testing-tools">4.1. Include test utilities</a> 
     <ul class="sectlevel3"> 
      <li><a href="#testing-tools-eclipse-static-imports">4.1.1. Configure static method imports for Eclipse</a></li> 
     </ul> </li> 
    <li><a href="#testing-email">4.2. Testing emails</a> 
     <ul class="sectlevel3"> 
      <li><a href="#first_test">4.2.1. First test</a></li> 
      <li><a href="#testing_html_message">4.2.2. Testing HTML message</a></li> 
      <li><a href="#help_in_eclipse_for_failing_tests">4.2.3. Help in Eclipse for failing tests</a></li> 
      <li><a href="#testing_email_with_an_html_body_and_text_alternative_2">4.2.4. Testing email with an HTML body and text alternative</a></li> 
      <li><a href="#testing_attachments_2">4.2.5. Testing attachments</a></li> 
      <li><a href="#testing_several_emails_at_once_2">4.2.6. Testing several emails at once</a></li> 
      <li><a href="#testing_with_smtp_authentication_2">4.2.7. Testing with SMTP authentication</a></li> 
      <li><a href="#testing_with_sendgrid">4.2.8. Testing with SendGrid</a></li> 
     </ul> </li> 
    <li><a href="#testing-sms">4.3. Testing SMS</a> 
     <ul class="sectlevel3"> 
      <li><a href="#first_test_2">4.3.1. First test</a></li> 
      <li><a href="#testing_long_messages_and_several_recipients">4.3.2. Testing long messages and several recipients</a></li> 
     </ul> </li> 
    <li><a href="#assertall">4.4. Fail at end</a></li> 
    <li><a href="#random-ports">4.5. Random ports</a> 
     <ul class="sectlevel3"> 
      <li><a href="#standalone_tests">4.5.1. Standalone tests</a></li> 
      <li><a href="#spring_boot_tests">4.5.2. Spring Boot tests</a></li> 
     </ul> </li> 
   </ul> </li> 
  <li><a href="#section-tips">5. Tips</a> 
   <ul class="sectlevel2"> 
    <li><a href="#automatic-configuration">5.1. Automatic configuration</a> 
     <ul class="sectlevel3"> 
      <li><a href="#concepts">5.1.1. Concepts</a></li> 
      <li><a href="#auto_configuration_lifecycle_and_configuration_phases">5.1.2. Auto-configuration lifecycle and configuration phases</a></li> 
     </ul> </li> 
    <li><a href="#mimetype-detection">5.2. Automatic MimeType detection</a></li> 
    <li><a href="#service-providers">5.3. Automatic configuration for well-known service providers</a></li> 
   </ul> </li> 
  <li><a href="#section-advanced-configuration">6. Advanced configuration</a> 
   <ul class="sectlevel2"> 
    <li><a href="#auto_re_send_messages">6.1. Auto re-send messages</a> 
     <ul class="sectlevel3"> 
      <li><a href="#retry-strategy">6.1.1. Retry handling</a></li> 
      <li><a href="#retry-executor">6.1.2. RetryExecutor</a></li> 
      <li><a href="#skip-custom-exceptions">6.1.3. Skip custom exceptions</a></li> 
     </ul> </li> 
    <li><a href="#email">6.2. Email</a> 
     <ul class="sectlevel3"> 
      <li><a href="#custom-cid-generation">6.2.1. Content-ID generator</a></li> 
      <li><a href="#catalog_of_smtp_properties">6.2.2. Catalog of SMTP properties</a></li> 
     </ul> </li> 
    <li><a href="#sms">6.3. SMS</a> 
     <ul class="sectlevel3"> 
      <li><a href="#message-encoding">6.3.1. Message encoding</a></li> 
      <li><a href="#session-strategy">6.3.2. Session management</a></li> 
      <li><a href="#advanced-smpp-configuration">6.3.3. Catalog of SMPP properties</a></li> 
     </ul> </li> 
    <li><a href="#use_the_builder_to_define_your_own_behaviors">6.4. Use the builder to define your own behaviors</a> 
     <ul class="sectlevel3"> 
      <li><a href="#standard_builder">6.4.1. Standard builder</a></li> 
      <li><a href="#minimal_builder">6.4.2. Minimal builder</a></li> 
      <li><a href="#empty_builder">6.4.3. Empty builder</a></li> 
     </ul> </li> 
    <li><a href="#intercept_messages_just_before_sending">6.5. Intercept messages just before sending</a></li> 
   </ul> </li> 
  <li><a href="#section-extend">7. Extend</a> 
   <ul class="sectlevel2"> 
    <li><a href="#custom_email_sender_implementation">7.1. Custom email sender implementation</a></li> 
    <li><a href="#custom_sms_sender_implementation">7.2. Custom SMS sender implementation</a></li> 
    <li><a href="#use_your_custom_template_engine">7.3. Use your custom template engine</a></li> 
    <li><a href="#create_your_own_configurer">7.4. Create your own configurer</a></li> 
    <li><a href="#custom-resource-resolver">7.5. Create custom resource resolver</a></li> 
    <li><a href="#add_new_type_of_message">7.6. Add new type of message</a></li> 
   </ul> </li> 
 </ul> 
</div> 
<div class="sect1"> 
 <h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="existing_libraries"><a class="anchor" href="#existing_libraries"></a>1.1. Existing libraries</h3> 
   <div class="paragraph"> 
    <p>Several libraries for sending email already exist:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p><a href="https://commons.apache.org/proper/commons-email/">Apache Commons Email</a></p> </li> 
     <li> <p><a href="https://github.com/bbottema/simple-java-mail">Simple Java Mail/Vesijama</a></p> </li> 
     <li> <p><a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mail.html">Spring Email Integration</a></p> </li> 
     <li> <p>…​</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>These libraries help you send an email but if you want to use a templated content, you will have to manually integrate a template engine.</p> 
   </div> 
   <div class="paragraph"> 
    <p>These libraries also provide only implementations based on Java Mail API. But in some environments, you might NOT want to send the email through SMTP but to use an external service (like <a href="https://sendgrid.com/">SendGrid</a> for example). Furthermore, those libraries are bound by design to frameworks or libraries that you might not want to use in your own context.</p> 
   </div> 
   <div class="paragraph"> 
    <p>So, now you would want to find a sending library with a high level of abstraction to avoid binding issues with any template engine, design framework or sender service…​ Is email the only possible message type ? No, so why not sending SMS, Tweet or anything the same way ?</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="the_ogham_module"><a class="anchor" href="#the_ogham_module"></a>1.2. The Ogham module</h3> 
   <div class="paragraph"> 
    <p>This module is designed for handling any kind of message the same way. It also provides several implementations for the same message type. It selects the best implementation based on the classpath or properties for example. You can easily add your own implementation.</p> 
   </div> 
   <div class="paragraph"> 
    <p>It also provides <strong>templating support</strong> and integrates natively several template engines. You can also add your own.</p> 
   </div> 
   <div class="paragraph"> 
    <p>It is <strong>framework and library agnostic</strong> and provides bridges for <strong>common frameworks integration</strong> (Spring, JSF, …​).</p> 
   </div> 
   <div class="paragraph"> 
    <p>When using the module to send email based on an HTML template, the templating system let you <strong>design your HTML like a standard HTML page</strong>. It automatically transforms the associated resources (images, css files…​) to be usable in an email context (automatic inline css, embed images…​). You don’t need to write your HTML specifically for email.</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="code_once_adapt_to_environment"><a class="anchor" href="#code_once_adapt_to_environment"></a>1.2.1. Code once, adapt to environment</h4> 
    <div class="paragraph"> 
     <p>You write your business code once. Ogham handles environment switching just by providing different configuration:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title">
         Development 
       </div> 
       <div class="content"> 
        <div class="paragraph"> 
         <p>In development phase, you may want to send email through any SMTP server (GMail for example) and SMS through any SMPP server (SmsGlobal for example). Your templates can be embedded in classpath.</p> 
        </div> 
        <div class="imageblock code-once-diagram text-center"> 
         <div class="content"> 
          <img src="diag-4d054048ef810aadd6180fe4ba2ef667.png" alt="diag 4d054048ef810aadd6180fe4ba2ef667" width="840" height="364" class="img-fluid"> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title">
         Tests 
       </div> 
       <div class="content"> 
        <div class="paragraph"> 
         <p>You can test your emails content through an embedded local SMTP. You can do the same with SMS through an embedded local SMPP server.</p> 
        </div> 
        <div class="paragraph"> 
         <p>Ogham directly provides embedded servers for testing. Your templates can be embedded in test sources.</p> 
        </div> 
        <div class="imageblock code-once-diagram text-center"> 
         <div class="content"> 
          <img src="diag-8385a83b1fbd518b9455ee2564ba8a34.png" alt="diag 8385a83b1fbd518b9455ee2564ba8a34" width="890" height="364" class="img-fluid"> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title">
         Production 
       </div> 
       <div class="content"> 
        <div class="paragraph"> 
         <p>In production, your enterprise may use external services for sending emails or SMS (like SendGrid HTTP API for emails and OVH HTTP API for SMS).</p> 
        </div> 
        <div class="paragraph"> 
         <p>Externalizing templates let the possibility to update them without needing to deploy the application again.</p> 
        </div> 
        <div class="imageblock code-once-diagram text-center"> 
         <div class="content"> 
          <img src="diag-e1248c0af6c5ff8753a903b803e002e2.png" alt="diag e1248c0af6c5ff8753a903b803e002e2" width="810" height="364" class="img-fluid"> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>In all cases, the code never changes. Only Ogham configuration differs.</p> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="quick_start"><a class="anchor" href="#quick_start"></a>2. Quick start</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="install"><a class="anchor" href="#install"></a>2.1. Quick and simple inclusion</h3> 
   <div class="sect3"> 
    <h4 id="install-standalone"><a class="anchor" href="#install-standalone"></a>2.1.1. Standalone</h4> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/maven-logo.png" alt="Maven" width="118" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-14,20- highlight-lines:15-19"> 
         <div class="title">
           pom.xml 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span>
    <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>sample<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>all<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
    <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="tag">&lt;maven.compiler.source&gt;</span>1.8<span class="tag">&lt;/maven.compiler.source&gt;</span>
    <span class="tag">&lt;maven.compiler.target&gt;</span>1.8<span class="tag">&lt;/maven.compiler.target&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>
  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-all<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/pom.xml?ts=2">View code of an example pom.xml</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 highlight-lines:11"> 
         <div class="title">
           build.gradle 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="groovy">plugins {
    id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

repositories {
  mavenLocal()
  mavenCentral()
}

dependencies {
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-all:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>
}</code></pre> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>This will include:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>Sending email through SMTP server (using <a href="https://eclipse-ee4j.github.io/mail/">Jakarta Mail</a>, formely JavaMail)</p> </li> 
      <li> <p>Sending email through <a href="https://sendgrid.com/">SendGrid</a></p> </li> 
      <li> <p>Sending SMS through SMPP server (using <a href="https://github.com/fizzed/cloudhopper-smpp">Cloudhopper</a>)</p> </li> 
      <li> <p>Sending SMS through <a href="https://www.ovhtelecom.fr/sms/api-sms.xml">OVH SMS API</a></p> </li> 
      <li> <p><a href="http://freemarker.org/">FreeMarker</a> template engine available for building message contents</p> </li> 
      <li> <p><a href="http://www.thymeleaf.org/">ThymeLeaf</a> template engine available for building message contents</p> </li> 
     </ul> 
    </div> 
    <div class="admonitionblock note"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
        <td class="content"> 
         <div class="title">
           Java version compatibility 
         </div> 
         <div class="paragraph"> 
          <p>Ogham is compatible with Java 8 and up to Java 15 (included).</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="install-spring-boot"><a class="anchor" href="#install-spring-boot"></a>2.1.2. With Spring Boot</h4> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/maven-logo.png" alt="Maven" width="118" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-21,28- highlight-lines:22-26"> 
         <div class="title">
           pom.xml 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;parent&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.3.3.RELEASE<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;relativePath</span><span class="tag">/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span>
  <span class="tag">&lt;/parent&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>samples<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;name&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;description&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/description&gt;</span>

  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;java.version&gt;</span>11<span class="tag">&lt;/java.version&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>

  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-spring-boot-starter-all<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
      <span class="tag">&lt;exclusions&gt;</span>
        <span class="tag">&lt;exclusion&gt;</span>
          <span class="tag">&lt;groupId&gt;</span>org.junit.vintage<span class="tag">&lt;/groupId&gt;</span>
          <span class="tag">&lt;artifactId&gt;</span>junit-vintage-engine<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;/exclusions&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>

  <span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
  <span class="tag">&lt;/build&gt;</span>

<span class="tag">&lt;/project&gt;</span></code></pre> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-13,17-24 highlight-lines:16"> 
         <div class="title">
           build.gradle 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.3.3.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">io.spring.dependency-management</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">1.0.10.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

group = <span class="string"><span class="delimiter">'</span><span class="content">samples</span><span class="delimiter">'</span></span>
version = <span class="string"><span class="delimiter">'</span><span class="content">0.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
sourceCompatibility = <span class="string"><span class="delimiter">'</span><span class="content">11</span><span class="delimiter">'</span></span>

repositories {
  mavenCentral()
}

dependencies {
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-spring-boot-starter-all:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>

  testImplementation(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-test</span><span class="delimiter">'</span></span>) {
    exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.junit.vintage</span><span class="delimiter">'</span></span>, <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">junit-vintage-engine</span><span class="delimiter">'</span></span>
  }
}

test {
  useJUnitPlatform()
}</code></pre> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>This will include:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>Sending email through SMTP server (using <a href="https://javaee.github.io/javamail/">JavaMail</a>)</p> </li> 
      <li> <p>Sending email through <a href="https://sendgrid.com/">SendGrid</a></p> </li> 
      <li> <p>Sending SMS through SMPP server (using <a href="https://github.com/fizzed/cloudhopper-smpp">Cloudhopper</a>)</p> </li> 
      <li> <p>Sending SMS through <a href="https://www.ovhtelecom.fr/sms/api-sms.xml">OVH SMS API</a></p> </li> 
      <li> <p><a href="http://freemarker.org/">FreeMarker</a> template engine available for building message contents</p> </li> 
      <li> <p><a href="http://www.thymeleaf.org/">ThymeLeaf</a> template engine available for building message contents</p> </li> 
      <li> <p>Support of <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> auto-detection mechanism and configuration properties</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>You can combine Ogham with existing Spring Boot dependencies:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="title">
       Example 1. Ogham adapts itself to Spring Boot features 
     </div> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/maven-logo.png" alt="Maven" width="118" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-21,40- highlight-lines:22-26"> 
         <div class="title">
           pom.xml 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;parent&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.3.3.RELEASE<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;relativePath</span><span class="tag">/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span>
  <span class="tag">&lt;/parent&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>samples<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;name&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;description&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/description&gt;</span>

  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;java.version&gt;</span>11<span class="tag">&lt;/java.version&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>

  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-spring-boot-starter-all<span class="tag">&lt;/artifactId&gt;</span>    <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/artifactId&gt;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/artifactId&gt;</span>    <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/artifactId&gt;</span>         <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
      <span class="tag">&lt;exclusions&gt;</span>
        <span class="tag">&lt;exclusion&gt;</span>
          <span class="tag">&lt;groupId&gt;</span>org.junit.vintage<span class="tag">&lt;/groupId&gt;</span>
          <span class="tag">&lt;artifactId&gt;</span>junit-vintage-engine<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;/exclusions&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>

  <span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
  <span class="tag">&lt;/build&gt;</span>

<span class="tag">&lt;/project&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Add Ogham starter for Spring Boot to benefit for all Ogham features in your Spring Boot application.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Import FreeMarker starter as usual. Ogham will adapt to additional FreeMarker provided by Spring Boot.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Import Thymeleaf starter as usual. Ogham will adapt to additional Thymeleaf provided by Spring Boot.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Import Mail starter as usual. Ogham will adapt to use mail features provided by Spring Boot.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-13,21-27 highlight-lines:16"> 
         <div class="title">
           build.gradle 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.3.3.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">io.spring.dependency-management</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">1.0.10.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

group = <span class="string"><span class="delimiter">'</span><span class="content">samples</span><span class="delimiter">'</span></span>
version = <span class="string"><span class="delimiter">'</span><span class="content">0.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
sourceCompatibility = <span class="string"><span class="delimiter">'</span><span class="content">11</span><span class="delimiter">'</span></span>

repositories {
  mavenCentral()
}

dependencies {
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-spring-boot-starter-all:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>   <i class="conum" data-value="1"></i><b>(1)</b>

  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-freemarker</span><span class="delimiter">'</span></span>      <i class="conum" data-value="2"></i><b>(2)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-thymeleaf</span><span class="delimiter">'</span></span>       <i class="conum" data-value="3"></i><b>(3)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-mail</span><span class="delimiter">'</span></span>            <i class="conum" data-value="4"></i><b>(4)</b>
  testImplementation(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-test</span><span class="delimiter">'</span></span>) {
    exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.junit.vintage</span><span class="delimiter">'</span></span>, <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">junit-vintage-engine</span><span class="delimiter">'</span></span>
  }
}

test {
  useJUnitPlatform()
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Add Ogham starter for Spring Boot to benefit for all Ogham features in your Spring Boot application.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Import FreeMarker starter as usual. Ogham will adapt to additional FreeMarker provided by Spring Boot.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Import Thymeleaf starter as usual. Ogham will adapt to additional Thymeleaf provided by Spring Boot.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Import Mail starter as usual. Ogham will adapt to use mail features provided by Spring Boot.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Ogham will auto-configure to use Spring Boot additions and support Spring Boot configuration properties like <code>spring.mail.host</code> for example.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Ogham is compatible with following Spring Boot versions:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>1.4.x (currently automatically tested against 1.4.7.RELEASE, see note below)</p> </li> 
      <li> <p>1.5.x (currently automatically tested against 1.5.22.RELEASE)</p> </li> 
      <li> <p>2.1.x (currently automatically tested against 2.1.18.RELEASE)</p> </li> 
      <li> <p>2.2.x (currently automatically tested against 2.2.12.RELEASE)</p> </li> 
      <li> <p>2.3.x (currently automatically tested against 2.3.7.RELEASE)</p> </li> 
      <li> <p>2.4.x (currently automatically tested against 2.4.1.RELEASE)</p> </li> 
     </ul> 
    </div> 
    <div class="admonitionblock note"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
        <td class="content"> 
         <div class="title">
           Java version compatibility 
         </div> 
         <div class="paragraph"> 
          <p>Ogham is compatible with Java 8 and up to Java 15 (included).</p> 
         </div> 
         <div class="paragraph"> 
          <p>However, Spring Boot may not be compatible with some Java versions (depending on Spring Boot version).</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock important"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
        <td class="content"> 
         <div class="title">
           Java 7 
         </div> 
         <div class="paragraph"> 
          <p>Java 7 support has been dropped since Ogham 3.0.0. Therefore, Ogham is no more tested with Spring Boot 1.3.x</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock important"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
        <td class="content"> 
         <div class="title">
           Spring Boot 1.4.x and WireMock 
         </div> 
         <div class="paragraph"> 
          <p>Latest WireMock versions are not compatible with Spring Boot 1.4.x. So if you are using Spring Boot 1.4.x, also using <code>ogham-test-utils</code> for writing tests and want to use WireMock in one of your test, you may experience <code>ClassNotFoundException</code>. This is due to different <code>org.apache.httpcomponents</code> versions.</p> 
         </div> 
         <div class="paragraph"> 
          <p>In this case, just use a different version of WireMock by manually adding the dependency <code>com.github.tomakehurst:wiremock-jre8:2.23.2:test</code>. This will force to use a previous WireMock version that is compatible with Spring Boot 1.4.x.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="select_the_features_you_need"><a class="anchor" href="#select_the_features_you_need"></a>2.2. Select the features you need</h3> 
   <div class="sect3"> 
    <h4 id="select-features-standalone"><a class="anchor" href="#select-features-standalone"></a>2.2.1. Standalone</h4> 
    <div class="paragraph"> 
     <p>Importing <code>ogham-all</code> dependency is easy but may import dependencies that you don’t need. For example, you may only need FreeMarker but not Thymeleaf. Or you may only need to send emails through SMTP but never use SendGrid.</p> 
    </div> 
    <div class="paragraph"> 
     <p>That’s why Ogham provides different modules so you can compose as you like:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="title">
       Example 2. Jakarta Mail and FreeMarker only 
     </div> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/maven-logo.png" alt="Maven" width="118" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-14,25-, highlight-lines:15-24"> 
         <div class="title">
           pom.xml 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span>
    <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>sample<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>javamail-and-freemarker<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
    <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="tag">&lt;maven.compiler.source&gt;</span>1.8<span class="tag">&lt;/maven.compiler.source&gt;</span>
    <span class="tag">&lt;maven.compiler.target&gt;</span>1.8<span class="tag">&lt;/maven.compiler.target&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>
  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-email-javamail<span class="tag">&lt;/artifactId&gt;</span>        <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-template-freemarker<span class="tag">&lt;/artifactId&gt;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Import only dependencies needed to send emails through SMTP (using Jakarta Mail).</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Import only dependencies needed to handle FreeMarker templates.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 highlight-lines:11-12"> 
         <div class="title">
           build.gradle 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="groovy">plugins {
    id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

repositories {
  mavenLocal()
  mavenCentral()
}

dependencies {
    implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-email-javamail:3.0.0-SNAPSHOT</span><span class="delimiter">'</span></span>        <i class="conum" data-value="1"></i><b>(1)</b>
    implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-template-freemarker:3.0.0-SNAPSHOT</span><span class="delimiter">'</span></span>   <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Import only dependencies needed to send emails through SMTP (using Jakarta Mail).</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Import only dependencies needed to handle FreeMarker templates.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Another example for sending SMS only:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="title">
       Example 3. SMPP only without using templates 
     </div> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/maven-logo.png" alt="Maven" width="118" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-14,20- highlight-lines:15-19"> 
         <div class="title">
           pom.xml 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span>
    <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>sample<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>sms-only<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
    <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="tag">&lt;maven.compiler.source&gt;</span>1.8<span class="tag">&lt;/maven.compiler.source&gt;</span>
    <span class="tag">&lt;maven.compiler.target&gt;</span>1.8<span class="tag">&lt;/maven.compiler.target&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>
  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-sms-cloudhopper<span class="tag">&lt;/artifactId&gt;</span>    <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Import only dependencies needed to send SMS through SMPP (using Cloudhopper).</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 highlight-lines:11"> 
         <div class="title">
           build.gradle 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="groovy">plugins {
    id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

repositories {
  mavenLocal()
  mavenCentral()
}

dependencies {
    implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-sms-cloudhopper:3.0.0-SNAPSHOT</span><span class="delimiter">'</span></span>    <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Import only dependencies needed to send SMS through SMPP (using Cloudhopper).</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="select-features-spring-boot"><a class="anchor" href="#select-features-spring-boot"></a>2.2.2. With Spring Boot</h4> 
    <div class="paragraph"> 
     <p>Ogham provides starters like Spring Boot does. If you are just interested in sending emails, just include the <code>ogham-spring-boot-starter-email</code>. It includes everything to work with email in Ogham plus FreeMarker and Thymeleaf but it doesn’t import anything to deal with SMS.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="title">
       Example 4. Email with all features 
     </div> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/maven-logo.png" alt="Maven" width="118" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-21,40- highlight-lines:22-26"> 
         <div class="title">
           pom.xml 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;parent&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.3.3.RELEASE<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;relativePath</span><span class="tag">/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span>
  <span class="tag">&lt;/parent&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>samples<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;name&gt;</span>ogham-and-spring-boot-email-only<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;description&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/description&gt;</span>

  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;java.version&gt;</span>11<span class="tag">&lt;/java.version&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>

  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-spring-boot-starter-email<span class="tag">&lt;/artifactId&gt;</span>  <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/artifactId&gt;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/artifactId&gt;</span>    <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/artifactId&gt;</span>         <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
      <span class="tag">&lt;exclusions&gt;</span>
        <span class="tag">&lt;exclusion&gt;</span>
          <span class="tag">&lt;groupId&gt;</span>org.junit.vintage<span class="tag">&lt;/groupId&gt;</span>
          <span class="tag">&lt;artifactId&gt;</span>junit-vintage-engine<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;/exclusions&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>

  <span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
  <span class="tag">&lt;/build&gt;</span>

<span class="tag">&lt;/project&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Add Ogham starter for Spring Boot to benefit for Ogham email features in your Spring Boot application.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Import FreeMarker starter as usual. Ogham will adapt to additional FreeMarker provided by Spring Boot.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Import Thymeleaf starter as usual. Ogham will adapt to additional Thymeleaf provided by Spring Boot.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Import Mail starter as usual. Ogham will adapt to use mail features provided by Spring Boot.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-13,21-27 highlight-lines:16"> 
         <div class="title">
           build.gradle 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.3.3.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">io.spring.dependency-management</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">1.0.10.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

group = <span class="string"><span class="delimiter">'</span><span class="content">samples</span><span class="delimiter">'</span></span>
version = <span class="string"><span class="delimiter">'</span><span class="content">0.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
sourceCompatibility = <span class="string"><span class="delimiter">'</span><span class="content">11</span><span class="delimiter">'</span></span>

repositories {
  mavenCentral()
}

dependencies {
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-spring-boot-starter-email:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>  <i class="conum" data-value="1"></i><b>(1)</b>

  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-freemarker</span><span class="delimiter">'</span></span>       <i class="conum" data-value="2"></i><b>(2)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-thymeleaf</span><span class="delimiter">'</span></span>        <i class="conum" data-value="3"></i><b>(3)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-mail</span><span class="delimiter">'</span></span>             <i class="conum" data-value="4"></i><b>(4)</b>
  testImplementation(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-test</span><span class="delimiter">'</span></span>) {
    exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.junit.vintage</span><span class="delimiter">'</span></span>, <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">junit-vintage-engine</span><span class="delimiter">'</span></span>
  }
}

test {
  useJUnitPlatform()
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Add Ogham starter for Spring Boot to benefit for email Ogham features in your Spring Boot application.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Import FreeMarker starter as usual. Ogham will adapt to additional FreeMarker provided by Spring Boot.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Import Thymeleaf starter as usual. Ogham will adapt to additional Thymeleaf provided by Spring Boot.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Import Mail starter as usual. Ogham will adapt to use mail features provided by Spring Boot.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>If you want to be even more selective, you can manually select Ogham libraries. To benefit from Spring Boot auto-configuration, you just need to add <code>ogham-spring-boot-autoconfigure</code>.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="title">
       Example 5. Email and FreeMarker only using Spring Boot features 
     </div> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/maven-logo.png" alt="Maven" width="118" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-21,47- highlight-lines:22-36"> 
         <div class="title">
           pom.xml 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
  <span class="tag">&lt;parent&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.3.3.RELEASE<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;relativePath</span><span class="tag">/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span>
  <span class="tag">&lt;/parent&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>samples<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>ogham-and-spring-boot<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;name&gt;</span>ogham-and-spring-boot-email-only<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;description&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/description&gt;</span>

  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;java.version&gt;</span>11<span class="tag">&lt;/java.version&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>

  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-spring-boot-autoconfigure<span class="tag">&lt;/artifactId&gt;</span>    <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-email-javamail<span class="tag">&lt;/artifactId&gt;</span>               <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>ogham-template-freemarker<span class="tag">&lt;/artifactId&gt;</span>          <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/artifactId&gt;</span>     <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/artifactId&gt;</span>           <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
      <span class="tag">&lt;exclusions&gt;</span>
        <span class="tag">&lt;exclusion&gt;</span>
          <span class="tag">&lt;groupId&gt;</span>org.junit.vintage<span class="tag">&lt;/groupId&gt;</span>
          <span class="tag">&lt;artifactId&gt;</span>junit-vintage-engine<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;/exclusions&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>

  <span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
  <span class="tag">&lt;/build&gt;</span>

<span class="tag">&lt;/project&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Provides auto-configuration to register Ogham beans in Spring Boot application. Also configures Ogham to use Spring Boot beans.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Provides Ogham features to send emails through SMTP (using Jakarta Mail).</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Provides Ogham features to handle FreeMarker template engine.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Import Spring Boot FreeMarker starter as usual. Ogham will automatically adapt itself to use Spring Boot features.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Import Spring Boot Mail starter. Ogham will automatically adapt itself to use Spring Boot features.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30" class="img-fluid"></span> 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-13,22-28 highlight-lines:16-18"> 
         <div class="title">
           build.gradle 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.3.3.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">io.spring.dependency-management</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">1.0.10.RELEASE</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

group = <span class="string"><span class="delimiter">'</span><span class="content">samples</span><span class="delimiter">'</span></span>
version = <span class="string"><span class="delimiter">'</span><span class="content">0.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
sourceCompatibility = <span class="string"><span class="delimiter">'</span><span class="content">11</span><span class="delimiter">'</span></span>

repositories {
  mavenCentral()
}

dependencies {
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-spring-boot-autoconfigure:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>   <i class="conum" data-value="1"></i><b>(1)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-email-javamail:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>              <i class="conum" data-value="2"></i><b>(2)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-template-freemarker:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>         <i class="conum" data-value="3"></i><b>(3)</b>

  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-freemarker</span><span class="delimiter">'</span></span>        <i class="conum" data-value="4"></i><b>(4)</b>
  implementation <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-mail</span><span class="delimiter">'</span></span>              <i class="conum" data-value="5"></i><b>(5)</b>
  testImplementation(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-test</span><span class="delimiter">'</span></span>) {
    exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.junit.vintage</span><span class="delimiter">'</span></span>, <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">junit-vintage-engine</span><span class="delimiter">'</span></span>
  }
}

test {
  useJUnitPlatform()
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Provides auto-configuration to register Ogham beans in Spring Boot application. Also configures Ogham to use Spring Boot beans.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Provides Ogham features to send emails through SMTP (using Jakarta Mail).</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Provides Ogham features to handle FreeMarker template engine.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Import Spring Boot FreeMarker starter as usual. Ogham will automatically adapt itself to use Spring Boot features.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Import Spring Boot Mail starter. Ogham will automatically adapt itself to use Spring Boot features.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="usage"><a class="anchor" href="#usage"></a>3. Usage</h2> 
 <div class="sectionbody"> 
  <div class="admonitionblock note"> 
   <table> 
    <tbody> 
     <tr> 
      <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
      <td class="content"> All samples with templates are using ThymeLeaf as template engine. For FreeMarker samples, take a look at <a href="./user-manual.html#freemarker">FreeMarker section</a>. </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="sect2"> 
   <h3 id="email-usage"><a class="anchor" href="#email-usage"></a>3.1. Send Email</h3> 
   <div class="paragraph"> 
    <p>The samples are available in the <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage">sample-standard-usage sub-project</a>.</p> 
   </div> 
   <div class="paragraph"> 
    <p>All samples shown bellow are using SMTP for sending email and are also valid for sending email using any other protocol/API. Only the configuration part differs.</p> 
   </div> 
   <div class="paragraph"> 
    <p>See <a href="./user-manual.html#sendgrid">Sending email through SendGrid</a> to know how to configure Ogham for sending email using SendGrid HTTP API.</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="first_email_using_an_existing_smtp_server"><a class="anchor" href="#first_email_using_an_existing_smtp_server"></a>3.1.1. First email using an existing SMTP server</h4> 
    <div class="paragraph"> 
     <p>This sample shows how to send a basic email.</p> 
    </div> 
    <div class="paragraph"> 
     <p>The first lines configure the properties that will be used by the sender. Then you must create the service. You can use the MessagingBuilder to help you to create the service. Finally, the last line sends the email. The specified email is really basic. It only contains the subject, the textual content and the receiver address. The sender address is automatically added to the email by the service based on configuration properties.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSample</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()      <i class="conum" data-value="1"></i><b>(1)</b>
        .environment()
          .properties(properties)                         <i class="conum" data-value="2"></i><b>(2)</b>
          .and()
        .build();                                           <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()                                    <i class="conum" data-value="4"></i><b>(4)</b>
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">BasicSample</span><span class="delimiter">"</span></span>)
            .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Use the standard builder (predefined behavior)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Register the custom properties</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Create a MessagingService instance</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Send an email with a subject and a simple body. The sender address is automatically set using <code>ogham.email.from.default-value</code> property</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/BasicSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>The construction of the email is done using a fluent API in order to chain calls and to have a more readable code.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Properties are directly provided in the code. You can instead <a href="./user-manual.html#properties-handling">use a configuration file</a>.</p> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> 
         <div class="title">
           Email address format 
         </div> 
         <div class="paragraph"> 
          <p>Ogham supports the personal information in email address. The format is <code>personal &lt;address&gt;</code>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example, the address with personal <code>Ogham Test &lt;<a href="mailto:ogham-test@yopmail.com">ogham-test@yopmail.com</a>&gt;</code> will result in <code>ogham-test@yopmail.com</code> as email address and <code>Ogham Test</code> as personal.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="email-template"><a class="anchor" href="#email-template"></a>3.1.2. Use an HTML template for email body</h4> 
    <div class="paragraph"> 
     <p>This sample shows how to send an email with a content following a template engine language.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9,34-46 irrelevant-lines:1-9,12-19 highlight-lines:28-29"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()                           <i class="conum" data-value="1"></i><b>(1)</b>
        .environment()
          .properties(properties)                                              <i class="conum" data-value="2"></i><b>(2)</b>
          .and()
        .build();                                                                <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()                                                         <i class="conum" data-value="4"></i><b>(4)</b>
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">HtmlTemplateSample</span><span class="delimiter">"</span></span>)
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/thymeleaf/simple.html</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="5"></i><b>(5)</b>
                          <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))           <i class="conum" data-value="6"></i><b>(6)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Use the standard builder (predefined behavior)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Register the custom properties</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Create a MessagingService instance</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Send an email with an explicit subject. The sender address is automatically set using <code>ogham.email.from.default-value</code> property</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Indicate the path to the HTML template file (in the classpath)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Use any bean object for replacing variables in template</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlTemplateSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>        <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>     <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Include the ThymeLeaf namespace</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Use the <code>name</code> attribute value in the template</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Use the <code>value</code> attribute value in the template</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.html?ts=2">Source code of the HTML template</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Using a template is straightforward. Instead of providing a string as body (using <code>body().string(…​)</code>), you change to <code>body().template(…​, …​)</code>. The <code>template</code> method requires two pieces of information:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>The path to the template</p> </li> 
      <li> <p>The variables to evaluate in the template</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>The path to the template is a string that may contain a <strong>lookup</strong> prefix. The lookup prefix is used to indicate where to search the template (from file system, from classpath or anywhere else). Here we explicitly ask to load the template from classpath (using prefix <code>classpath:</code>). If no lookup is defined, classpath is used by default. See <a href="./user-manual.html#resource-resolution">Resource resolution section</a> for more information.</p> 
    </div> 
    <div class="paragraph"> 
     <p>The variables are any object you are using in your application. No need to convert your object to a particular format. Directly use what you want.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="html-title-subject"><a class="anchor" href="#html-title-subject"></a>3.1.3. Use HTML title as email subject</h4> 
    <div class="paragraph"> 
     <p>This sample is a variant of the previous one. It allows you to directly use the HTML title as subject of your email. It may be useful to use variables in the subject too, to mutualize the code and to avoid to create a new file or to use a different evaluation syntax or context just for one line.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-10,35-47 irrelevant-lines:1-10,12-19"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlTemplateWithSubjectSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API (do not specify subject)</span>
    <span class="comment">// subject is set to null to let automatic mechanism to read the title</span>
    <span class="comment">// of the HTML and use it as subject of your email</span>
    service.send(<span class="keyword">new</span> Email()                                                                    <i class="conum" data-value="1"></i><b>(1)</b>
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/thymeleaf/simpleWithSubject.html</span><span class="delimiter">"</span></span>,
                          <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Subject is no more in Java code</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlTemplateWithSubjectSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
       </div> 
       <div class="content"> 
        <div class="listingblock highlight-lines:4"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>Subject of the email - [[${name}]]<span class="tag">&lt;/title&gt;</span>       <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The subject is defined in the template and can use same evaluation context (<code>SimpleBean</code>).</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> The subject of the email will be <code>Subject of the email - Welcome foo !</code> </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simpleWithSubject.html?ts=2">Source code of the HTML template</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>For text templates, the subject is automatically used (like for HTML title) if the first line starts with <code>Subject:</code> (spaces can be added after colon). Other lines are used as content of the email.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9,35-47 irrelevant-lines:1-9,12-19"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">TextTemplateWithSubjectSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API (do not specify subject)</span>
    <span class="comment">// subject is set to null to let automatic mechanism to read the title</span>
    <span class="comment">// of the first line if prefixed by "Subject:" and use it as subject of your email</span>
    service.send(<span class="keyword">new</span> Email()                                                                       <i class="conum" data-value="1"></i><b>(1)</b>
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/freemarker/simpleWithSubject.txt.ftl</span><span class="delimiter">"</span></span>,
                          <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Subject is no more in Java code</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/TextTemplateWithSubjectSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/freemarker-logo.png" alt="freemarker logo" width="60" height="24" class="img-fluid"></span> Text template 
       </div> 
       <div class="content"> 
        <div class="listingblock highlight-lines:1"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="text">Subject: Welcome ${name} !
Hello ${name},

Foo bar ${value}</code></pre> 
         </div> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> The subject of the email will be <code>Welcome foo !</code> </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/freemarker/simpleWithSubject.txt.ftl?ts=2">Source code of the text template</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="css-images-inlining"><a class="anchor" href="#css-images-inlining"></a>3.1.4. HTML body with CSS and images</h4> 
    <div class="paragraph"> 
     <p>When you develop a Web application, you can use HTML for the content and CSS for layout and theming. HTML and CSS can use images to make a beautiful Web page. Each concern is separated in a different file. This is a good practice.</p> 
    </div> 
    <div class="paragraph"> 
     <p>However, writing an HTML email is totally different. Indeed, email clients are not as evolved as Web browsers. Even worse, some clients disable some features on purpose (like GMail that prevents using <code>style</code> tag). To make an email work on several clients, you should follow these rules:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p><code>&lt;img&gt;</code> tags that use local images must be embedded</p> </li> 
      <li> <p>Use XHTML instead of HTML</p> </li> 
      <li> <p>Remove HTML comments (except conditional comments used to target Outlook)</p> </li> 
      <li> <p>Add border=0 on all images to avoid an ugly border</p> </li> 
      <li> <p>Do not write shortcut CSS values (<code>padding: 4px 4px 4px 4px;</code> instead of <code>padding: 4px</code>)</p> </li> 
      <li> <p>Padding is not supported on some clients so you must use margins instead (adding a parent just for the layout)</p> </li> 
      <li> <p>Background images on body should be moved on another node</p> </li> 
      <li> <p>CSS3 properties are not supported</p> </li> 
      <li> <p>Images must have <code>alt</code> attribute</p> </li> 
      <li> <p>…​</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>There are many other rules but the developer should not be constrained and should be able to write its HTML and CSS like as usual in Web browsers. Ogham simplifies image and CSS integration and is able to partially rewrite the HTML.</p> 
    </div> 
    <div class="exampleblock tab-container  no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-10,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithImagesAndCssTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/withImagesAndCss/resources</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))        <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The path to the templates (<code>/template/withImagesAndCss/resources.html</code> for the main body, <code>/template/withImagesAndCss/resources.txt.ftl</code> for the text alternative)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>The template context</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithImagesAndCssTemplateSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
       </div> 
       <div class="content"> 
        <div class="listingblock highlight-lines:7-8,12,18,27,39,42"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>HtmlWithImagesAndCssTemplateSample<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/layout.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                             <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/theme.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;header&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/h1.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>name<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>value<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/left.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">base64</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/right.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">attach</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                 <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/tw.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                       <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>           <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013<span class="tag">&lt;br</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-styles</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span> to this newsletter instantly  <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The CSS is parsed by Ogham and applied directly on the HTML (using <code>style</code> attribute)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>The CSS is parsed by Ogham and applied directly on the HTML (using <code>style</code> attribute). The CSS may contain rules that override some rules of other CSS files (like in a browser)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>The image is automatically embedded (the path is replaced by a <a href="https://tools.ietf.org/html/rfc4021#section-2.2.2">Content-ID (or CID)</a> and the image is attached to the email using <code>ContentDisposition.INLINE</code> with the Content-ID header). The content type is automatically determined</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>The image is converted to a base64 string. The <code>src</code> attribute of the image is updated using <a href="https://en.wikipedia.org/wiki/Data_URI_scheme">data URI scheme</a>. The content type is automatically determined</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Same as &lt;3&gt;</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Same as &lt;3&gt;</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>The image is not inlined by Ogham. This can be useful to embed it manually.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/withImagesAndCss/resources.html?ts=2">Source code of the HTML template</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="title">
           layout.css 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="css"><span class="tag">body</span> {
  <span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>;
  <span class="key">width</span>: <span class="float">600px</span>;
}

<span class="tag">header</span> {
  <span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>;
}

<span class="tag">header</span> <span class="tag">img</span> {
  <span class="key">display</span>: <span class="value">block</span>;
  <span class="key">margin</span>: <span class="value">auto</span>;
}


<span class="class">.content</span> {
  <span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>;
}

<span class="class">.left</span>,
<span class="class">.right</span> {
  <span class="key">width</span>: <span class="float">250px</span>;
  <span class="key">display</span>: <span class="value">inline-block</span>;
}

<span class="class">.left</span> {
  <span class="key">margin-right</span>: <span class="float">36px</span>;
}

<span class="tag">footer</span> {
  <span class="key">padding</span>: <span class="float">30px</span>;
}

<span class="tag">footer</span> <span class="class">.sender-info</span>,
<span class="tag">footer</span> <span class="class">.social</span> {
  <span class="key">text-align</span>: <span class="value">center</span>;
}
<span class="tag">footer</span> <span class="class">.social</span> <span class="tag">a</span> {
  <span class="key">display</span>: <span class="value">inline-block</span>;
}
<span class="tag">footer</span> <span class="class">.sender-info</span> {
  <span class="key">margin-top</span>: <span class="float">20px</span>;
}</code></pre> 
         </div> 
        </div> 
        <div class="listingblock"> 
         <div class="title">
           theme.css 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="css"><span class="tag">body</span> {
  <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;
}

<span class="tag">header</span> {
  <span class="key">background</span>: <span class="color">#70bbd9</span>;
}

<span class="class">.content</span> {
  <span class="key">text-align</span>: <span class="value">justify</span>;
}

<span class="tag">footer</span> {
  <span class="key">color</span>:<span class="color">#ffffff</span>;
  <span class="key">font-family</span>:<span class="value">Arial</span>, <span class="value">sans-serif</span>;
  <span class="key">font-size</span>:<span class="float">14px</span>;
  <span class="key">background</span>: <span class="color">#ee4c50</span>;
}

<span class="tag">footer</span> <span class="class">.social</span> <span class="tag">a</span> {
  <span class="key">color</span>:<span class="color">#ffffff</span>;
}

<span class="class">.white</span> {
  <span class="key">color</span>: <span class="color">#fff</span>;
}</code></pre> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Sent HTML 
       </div> 
       <div class="content"> 
        <div class="exampleblock TODO"> 
         <div class="content"> 
          <div class="ulist"> 
           <ul> 
            <li> <p>Add code of the generated HTML with all transformations</p> </li> 
           </ul> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Here is the list of supported transformations:</p> 
    </div> 
    <div class="ulist checklist"> 
     <ul class="checklist"> 
      <li> <p><i class="fa fa-check-square-o"></i> <code>&lt;img&gt;</code> tags that use local images are embedded (using <code>cid</code> reference)</p> </li> 
      <li> <p><i class="fa fa-check-square-o"></i> <code>&lt;img&gt;</code> tags that use local images are embedded (using base64 data URI)</p> </li> 
      <li> <p><i class="fa fa-check-square-o"></i> Inline CSS rules using <code>style</code> attribute</p> </li> 
      <li> <p><i class="fa fa-check-square-o"></i> <code>background</code> images that use local images are embedded (using <code>cid</code> reference)</p> </li> 
      <li> <p><i class="fa fa-check-square-o"></i> <code>background</code> images that use local images are embedded (using base64 data URI)</p> </li> 
      <li> <p><i class="fa fa-square-o"></i> Use XHTML instead of HTML</p> </li> 
      <li> <p><i class="fa fa-square-o"></i> Tables used for layout explicitly set default values</p> </li> 
      <li> <p><i class="fa fa-square-o"></i> Remove HTML comments (except conditional comments used to target Outlook)</p> </li> 
      <li> <p><i class="fa fa-square-o"></i> Add border=0 on all images to avoid an ugly border</p> </li> 
      <li> <p><i class="fa fa-square-o"></i> Do not write shortcut CSS values (<code>padding: 4px 4px 4px 4px;</code> instead of <code>padding: 4px</code>)</p> </li> 
      <li> <p><i class="fa fa-square-o"></i> Padding is not supported on some clients so you must use margins instead (adding a parent just for the layout)</p> </li> 
      <li> <p><i class="fa fa-square-o"></i> Background images on body should be moved on another node</p> </li> 
      <li> <p><i class="fa fa-square-o"></i> Images must have <code>alt</code> attribute</p> </li> 
     </ul> 
    </div> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>List all other rules</p> </li> 
        <li> <p>Indicate what will be supported and what won’t and why</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="inline_images"><a class="anchor" href="#inline_images"></a>3.1.4.1. Inline images</h5> 
     <div class="paragraph"> 
      <p>Images can be referenced externally but there are many constraints to do so. You have to provide the URL of the image. However, while you are coding or testing the feature that sends an email with images (for example testing account creation with confirmation email), the URL must point to an existing and accessible image. And even then, the email client might block those images for safety purpose (prevent tracking). Not mentioning offline issues.</p> 
     </div> 
     <div class="paragraph"> 
      <p>That’s why Ogham provides automatic inlining on local images. Therefore, no need to use a server to serve the images and no need to configure the URLs to point to those images. The images are:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Either attached with the email and referenced in the HTML using a <a href="https://tools.ietf.org/html/rfc2392">Content-ID</a>.</p> </li> 
       <li> <p>Or images are converted to a base64 string and embedded in the HTML using the <a href="https://tools.ietf.org/html/rfc2397">data URL scheme</a></p> </li> 
       <li> <p>Or not inlined at all (if the image points to an external URL or it is explicitly skipped)</p> </li> 
      </ul> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> 
          <div class="title">
            More explanation 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://blog.mailtrap.io/embedding-images-in-html-email-have-the-rules-changed/">Additional information about image inlining</a>.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> 
          <div class="title">
            Sender implementation independent 
          </div> 
          <div class="paragraph"> 
           <p>Inlining of images not only work when sending an email using Java Mail but also works for any other email sender (like SendGrid).</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="sect5"> 
      <h6 id="attach_and_reference_images"><a class="anchor" href="#attach_and_reference_images"></a>Attach and reference images</h6> 
      <div class="paragraph"> 
       <p>By default, if the HTML contains <code>&lt;img&gt;</code> tag with <code>src</code> attribute that points to a local image, the image is automatically attached and referenced using a <a href="https://tools.ietf.org/html/rfc2392">Content-ID</a> that is automatically generated.</p> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> 
           <div class="title">
             Default choice explanation 
           </div> 
           <div class="paragraph"> 
            <p>The attach strategy has been chosen by default as it is handled by more email clients than base64 strategy.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> 
           <div class="title">
             Customize CID generation 
           </div> 
           <div class="paragraph"> 
            <p>Default Content-ID generation simply uses a incremental number. It is possible to use <a href="./user-manual.html#custom-cid-generation">custom Content-ID generation</a>.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>As Ogham is fully configurable, the default strategy can be changed. Therefore if you want to use this strategy for a particular image, you need to explicitly indicate it. You can do so by setting the <code>data-inline-image</code> attribute with the <code>"attach"</code> value directly on the <code>&lt;img&gt;</code> tag.</p> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> 
           <div class="title">
             Change default strategy 
           </div> 
           <div class="paragraph"> 
            <p>It is possible to configure Ogham to use a <a href="./user-manual.html#custom-image-inlining-strategy">different inlining strategy by default</a>.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="exampleblock tab-container  no-max-height"> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,12-28,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithImagesAndCssTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/withImagesAndCss/resources</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))        <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The path to the templates (<code>/template/withImagesAndCss/resources.html</code> for the main body, <code>/template/withImagesAndCss/resources.txt.ftl</code> for the text alternative)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The template context</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithImagesAndCssTemplateSample.java?ts=2">Source code of the sample</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,14-25,28-37,41- highlight-lines:12,27,39"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>HtmlWithImagesAndCssTemplateSample<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/layout.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                             <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/theme.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;header&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/h1.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>name<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>value<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/left.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">base64</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/right.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">attach</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                 <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/tw.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                       <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>           <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013<span class="tag">&lt;br</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-styles</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span> to this newsletter instantly  <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>As nothing is specified and <code>src</code> points to a local image, the image will be inlined (using <code>attach</code> strategy)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>Same as &lt;3&gt; but strategy is explicitly indicated</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td>Same as &lt;3&gt;</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/withImagesAndCss/resources.html?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Generated HTML 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-8,12-24,27-35,39- highlight-lines:10,26,37"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>                                                <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;title&gt;</span>Demystifying Email Design<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>; <span class="key">width</span>: <span class="float">600px</span>; <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>         <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;header</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">background</span>: <span class="color">#70bbd9</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:0</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">block</span>; <span class="key">margin</span>: <span class="value">auto</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">text-align</span>: <span class="value">justify</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>              <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;span&gt;</span>foo<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p&gt;</span>42<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">margin-right</span>: <span class="float">36px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">data:image/gif;base64,R0lGODlh+gCMANUAAOxRVfySUllNTaNvTPS1j</span>
            <span class="content">[...]</span>
            <span class="content">K1KIa9ahITapSl8rUpjr1qVCNqlSHFAQAOw==</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                   <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:1</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                   <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">30px</span>; <span class="key">color</span>: <span class="color">#ffffff</span>; <span class="key">font-family</span>: <span class="value">Arial</span>, <span class="value">sans-serif</span>; <span class="key">font-size</span>: <span class="float">14px</span>; <span class="key">background</span>: <span class="color">#ee4c50</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="7"></i><b>(7)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:2</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                           <i class="conum" data-value="8"></i><b>(8)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>    <i class="conum" data-value="9"></i><b>(9)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                      <i class="conum" data-value="10"></i><b>(10)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>; <span class="key">margin-top</span>: <span class="float">20px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013 <span class="tag">&lt;br&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span>to this newsletter instantly         <i class="conum" data-value="11"></i><b>(11)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>The image is attached and the generated Content-ID is <code>0</code>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td>The image is attached and the generated Content-ID is <code>1</code>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="7"></i><b>7</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="8"></i><b>8</b></td> 
              <td>The image is attached and the generated Content-ID is <code>2</code>.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect5"> 
      <h6 id="embed_using_data_url_scheme"><a class="anchor" href="#embed_using_data_url_scheme"></a>Embed using data URL scheme</h6> 
      <div class="paragraph"> 
       <p>As stated before, by default images are attached. So if you want to embed an image directly as a base64 string, you need to set the <code>data-inline-image</code> attribute with the <code>"base64"</code> value directly on the <code>&lt;img&gt;</code> tag.</p> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> 
           <div class="title">
             Mimetype detection 
           </div> 
           <div class="paragraph"> 
            <p>The data URL scheme needs the mediatype information. Ogham automatically provides this information for you thanks to <a href="./user-manual.html#mimetype-detection">automatic mimetype detection</a>.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="exampleblock tab-container  no-max-height"> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,12-28,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithImagesAndCssTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/withImagesAndCss/resources</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))        <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The path to the templates (<code>/template/withImagesAndCss/resources.html</code> for the main body, <code>/template/withImagesAndCss/resources.txt.ftl</code> for the text alternative)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The template context</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithImagesAndCssTemplateSample.java?ts=2">Source code of the sample</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-16,19-24,26- highlight-lines:18"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>HtmlWithImagesAndCssTemplateSample<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/layout.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                             <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/theme.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;header&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/h1.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>name<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>value<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/left.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">base64</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/right.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">attach</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                 <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/tw.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                       <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>           <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013<span class="tag">&lt;br</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-styles</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span> to this newsletter instantly  <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>Indicate to Ogham to inline using <code>base64</code> strategy</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/withImagesAndCss/resources.html?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Generated HTML 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-14,19-23,25- highlight-lines:16-18"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>                                                <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;title&gt;</span>Demystifying Email Design<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>; <span class="key">width</span>: <span class="float">600px</span>; <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>         <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;header</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">background</span>: <span class="color">#70bbd9</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:0</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">block</span>; <span class="key">margin</span>: <span class="value">auto</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">text-align</span>: <span class="value">justify</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>              <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;span&gt;</span>foo<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p&gt;</span>42<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">margin-right</span>: <span class="float">36px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">data:image/gif;base64,R0lGODlh+gCMANUAAOxRVfySUllNTaNvTPS1j</span>
            <span class="content">[...]</span>
            <span class="content">K1KIa9ahITapSl8rUpjr1qVCNqlSHFAQAOw==</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                   <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:1</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                   <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">30px</span>; <span class="key">color</span>: <span class="color">#ffffff</span>; <span class="key">font-family</span>: <span class="value">Arial</span>, <span class="value">sans-serif</span>; <span class="key">font-size</span>: <span class="float">14px</span>; <span class="key">background</span>: <span class="color">#ee4c50</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="7"></i><b>(7)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:2</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                           <i class="conum" data-value="8"></i><b>(8)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>    <i class="conum" data-value="9"></i><b>(9)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                      <i class="conum" data-value="10"></i><b>(10)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>; <span class="key">margin-top</span>: <span class="float">20px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013 <span class="tag">&lt;br&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span>to this newsletter instantly         <i class="conum" data-value="11"></i><b>(11)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>The data URL starts with <code>data:</code> followed by the mimetype (<code>image/gif</code>) and the image converted to a base64 string (the base64 string is partially shown here for readability).</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect5"> 
      <h6 id="skip_some_images"><a class="anchor" href="#skip_some_images"></a>Skip some images</h6> 
      <div class="paragraph"> 
       <p>In the case you need to inline an image manually, you can tell Ogham to skip the image by placing the <code>data-inline-image</code> attribute with the <code>"skip"</code> value on the <code>&lt;img&gt;</code> tag.</p> 
      </div> 
      <div class="exampleblock tab-container  no-max-height"> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,12-28,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithImagesAndCssTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/withImagesAndCss/resources</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))        <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The path to the templates (<code>/template/withImagesAndCss/resources.html</code> for the main body, <code>/template/withImagesAndCss/resources.txt.ftl</code> for the text alternative)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The template context</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithImagesAndCssTemplateSample.java?ts=2">Source code of the sample</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-40,44- highlight-lines:42"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>HtmlWithImagesAndCssTemplateSample<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/layout.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                             <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/theme.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;header&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/h1.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>name<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>value<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/left.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">base64</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/right.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">attach</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                 <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/tw.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                       <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>           <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013<span class="tag">&lt;br</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-styles</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span> to this newsletter instantly  <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="7"></i><b>7</b></td> 
              <td>Indicate to Ogham to skip inlining using <code>skip</code> value</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/withImagesAndCss/resources.html?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Generated HTML 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-38,42- highlight-lines:40"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>                                                <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;title&gt;</span>Demystifying Email Design<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>; <span class="key">width</span>: <span class="float">600px</span>; <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>         <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;header</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">background</span>: <span class="color">#70bbd9</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:0</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">block</span>; <span class="key">margin</span>: <span class="value">auto</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">text-align</span>: <span class="value">justify</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>              <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;span&gt;</span>foo<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p&gt;</span>42<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">margin-right</span>: <span class="float">36px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">data:image/gif;base64,R0lGODlh+gCMANUAAOxRVfySUllNTaNvTPS1j</span>
            <span class="content">[...]</span>
            <span class="content">K1KIa9ahITapSl8rUpjr1qVCNqlSHFAQAOw==</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                   <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:1</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                   <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">30px</span>; <span class="key">color</span>: <span class="color">#ffffff</span>; <span class="key">font-family</span>: <span class="value">Arial</span>, <span class="value">sans-serif</span>; <span class="key">font-size</span>: <span class="float">14px</span>; <span class="key">background</span>: <span class="color">#ee4c50</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="7"></i><b>(7)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:2</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                           <i class="conum" data-value="8"></i><b>(8)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>    <i class="conum" data-value="9"></i><b>(9)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                      <i class="conum" data-value="10"></i><b>(10)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>; <span class="key">margin-top</span>: <span class="float">20px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013 <span class="tag">&lt;br&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span>to this newsletter instantly         <i class="conum" data-value="11"></i><b>(11)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="7"></i><b>7</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="8"></i><b>8</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="9"></i><b>9</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="10"></i><b>10</b></td> 
              <td>The image is not inlined at all (the original <code>src</code> attribute is unchanged)</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> 
           <div class="title">
             Future thoughts 
           </div> 
           <div class="paragraph"> 
            <p>In future version of Ogham, a new strategy may be added in order to automatically serve local images and fill the HTML with the associated URL.</p> 
           </div> 
           <div class="paragraph"> 
            <p>The images may be automatically served by:</p> 
           </div> 
           <div class="ulist"> 
            <ul> 
             <li> <p>first uploading them somewhere before sending the email</p> </li> 
             <li> <p>automatically registering endpoints into your web application (adding Spring controller for example) that uses Ogham</p> </li> 
             <li> <p>starting a local server (by running a command or a docker image for example)</p> </li> 
             <li> <p>using tools like ngrok to expose local files/http server</p> </li> 
             <li> <p>…​</p> </li> 
            </ul> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="inline_css"><a class="anchor" href="#inline_css"></a>3.1.4.2. Inline CSS</h5> 
     <div class="paragraph"> 
      <p>Email clients doesn’t handle external CSS files at all. Styles can be included in a <code>style</code> tag but some email clients like Gmail doesn’t support it. So all rules provided in the CSS <strong>MUST</strong> be inlined directly in the HTML. Writing code like this is really bad practice:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>code is difficult to read</p> </li> 
       <li> <p>it is error prone as updating for example the base color need to ensure that styles are updated everywhere</p> </li> 
       <li> <p>code can’t be mutualized between several HTML files</p> </li> 
       <li> <p>…​</p> </li> 
      </ul> 
     </div> 
     <div class="paragraph"> 
      <p>HTML files are then hard to maintain.</p> 
     </div> 
     <div class="paragraph"> 
      <p>That’s why Ogham will automatically inline CSS rules directly on the HTML.</p> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> 
          <div class="title">
            Sender implementation independent 
          </div> 
          <div class="paragraph"> 
           <p>CSS inlining not only work when sending an email using Java Mail but also works for any other email sender (like SendGrid).</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="sect5"> 
      <h6 id="inline_styles_on_html_nodes"><a class="anchor" href="#inline_styles_on_html_nodes"></a>Inline styles on HTML nodes</h6> 
      <div class="paragraph"> 
       <p>By default, the CSS rules contained in CSS files referenced in the HTML are inlined. Each node has their <code>style</code> attribute updated to add the CSS rules that match that node.</p> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> 
           <div class="title">
             Default choice explanation 
           </div> 
           <div class="paragraph"> 
            <p>Most of email clients only support theming using <code>style</code> attribute. Even modern email clients doesn’t support other strategies such as using <code>&lt;style&gt;</code> tags.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> 
           <div class="title">
             Inlining of 
            <code>&lt;style&gt;</code> nodes 
           </div> 
           <div class="paragraph"> 
            <p>As <code>&lt;style&gt;</code> may not be supported, the styles contained in <code>&lt;style&gt;</code> nodes in the HTML are also inlined using <code>style</code> attribute.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="exampleblock TODO"> 
       <div class="content"> 
        <div class="ulist"> 
         <ul> 
          <li> <p>When Ogham provides several CSS inlining modes, add information about how to change default strategy</p> </li> 
         </ul> 
        </div> 
       </div> 
      </div> 
      <div class="exampleblock tab-container  no-max-height"> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,12-28,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithImagesAndCssTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/withImagesAndCss/resources</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))        <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The path to the templates (<code>/template/withImagesAndCss/resources.html</code> for the main body, <code>/template/withImagesAndCss/resources.txt.ftl</code> for the text alternative)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The template context</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithImagesAndCssTemplateSample.java?ts=2">Source code of the sample</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:7-8"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>HtmlWithImagesAndCssTemplateSample<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/layout.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                             <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/theme.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;header&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/h1.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>name<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>value<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/left.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">base64</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/right.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">attach</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                 <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/tw.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                       <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>           <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013<span class="tag">&lt;br</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-styles</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span> to this newsletter instantly  <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Reference a CSS file that contains general layout rules</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Reference a CSS file that contains theming (like colors) rules</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/withImagesAndCss/resources.html?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS files 
         </div> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             layout.css 
           </div> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="tag">body</span> {
  <span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>;
  <span class="key">width</span>: <span class="float">600px</span>;
}

<span class="tag">header</span> {
  <span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>;
}

<span class="tag">header</span> <span class="tag">img</span> {
  <span class="key">display</span>: <span class="value">block</span>;
  <span class="key">margin</span>: <span class="value">auto</span>;
}


<span class="class">.content</span> {
  <span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>;
}

<span class="class">.left</span>,
<span class="class">.right</span> {
  <span class="key">width</span>: <span class="float">250px</span>;
  <span class="key">display</span>: <span class="value">inline-block</span>;
}

<span class="class">.left</span> {
  <span class="key">margin-right</span>: <span class="float">36px</span>;
}

<span class="tag">footer</span> {
  <span class="key">padding</span>: <span class="float">30px</span>;
}

<span class="tag">footer</span> <span class="class">.sender-info</span>,
<span class="tag">footer</span> <span class="class">.social</span> {
  <span class="key">text-align</span>: <span class="value">center</span>;
}
<span class="tag">footer</span> <span class="class">.social</span> <span class="tag">a</span> {
  <span class="key">display</span>: <span class="value">inline-block</span>;
}
<span class="tag">footer</span> <span class="class">.sender-info</span> {
  <span class="key">margin-top</span>: <span class="float">20px</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="listingblock"> 
           <div class="title">
             theme.css 
           </div> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="tag">body</span> {
  <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;
}

<span class="tag">header</span> {
  <span class="key">background</span>: <span class="color">#70bbd9</span>;
}

<span class="class">.content</span> {
  <span class="key">text-align</span>: <span class="value">justify</span>;
}

<span class="tag">footer</span> {
  <span class="key">color</span>:<span class="color">#ffffff</span>;
  <span class="key">font-family</span>:<span class="value">Arial</span>, <span class="value">sans-serif</span>;
  <span class="key">font-size</span>:<span class="float">14px</span>;
  <span class="key">background</span>: <span class="color">#ee4c50</span>;
}

<span class="tag">footer</span> <span class="class">.social</span> <span class="tag">a</span> {
  <span class="key">color</span>:<span class="color">#ffffff</span>;
}

<span class="class">.white</span> {
  <span class="key">color</span>: <span class="color">#fff</span>;
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Generated HTML 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:8,9,10,12,15,25,34,35,36,39,43"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>                                                <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;title&gt;</span>Demystifying Email Design<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>; <span class="key">width</span>: <span class="float">600px</span>; <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>         <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;header</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">background</span>: <span class="color">#70bbd9</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:0</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">block</span>; <span class="key">margin</span>: <span class="value">auto</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">text-align</span>: <span class="value">justify</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>              <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;span&gt;</span>foo<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p&gt;</span>42<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">margin-right</span>: <span class="float">36px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">data:image/gif;base64,R0lGODlh+gCMANUAAOxRVfySUllNTaNvTPS1j</span>
            <span class="content">[...]</span>
            <span class="content">K1KIa9ahITapSl8rUpjr1qVCNqlSHFAQAOw==</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                   <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:1</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                   <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">30px</span>; <span class="key">color</span>: <span class="color">#ffffff</span>; <span class="key">font-family</span>: <span class="value">Arial</span>, <span class="value">sans-serif</span>; <span class="key">font-size</span>: <span class="float">14px</span>; <span class="key">background</span>: <span class="color">#ee4c50</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="7"></i><b>(7)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:2</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                           <i class="conum" data-value="8"></i><b>(8)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>    <i class="conum" data-value="9"></i><b>(9)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                      <i class="conum" data-value="10"></i><b>(10)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>; <span class="key">margin-top</span>: <span class="float">20px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013 <span class="tag">&lt;br&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span>to this newsletter instantly         <i class="conum" data-value="11"></i><b>(11)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The <code>&lt;style&gt;</code> tags are removed from the head</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Apply <code>body</code> rules using <code>style</code> attribute. The rules from both files are merged.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>Apply <code>.content</code> rules using <code>style</code> attribute. The rules from both files are merged.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="7"></i><b>7</b></td> 
              <td>Apply <code>footer .social a</code> rules using <code>style</code> attribute. The rules from both files are merged.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="8"></i><b>8</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="9"></i><b>9</b></td> 
              <td>As <code>footer .social a</code> also matches this node, the same rules as &lt;7&gt; are applied.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect5"> 
      <h6 id="skip_some_styles"><a class="anchor" href="#skip_some_styles"></a>Skip some styles</h6> 
      <div class="paragraph"> 
       <p>If you don’t want to apply styles on a particular node, you can set the attribute <code>data-inline-styles</code> to <code>"skip"</code> value.</p> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> 
           <div class="title">
             Skip some rules 
           </div> 
           <div class="paragraph"> 
            <p>If you set <code>data-inline-styles</code> attribute to <code>"skip"</code> value on <code>&lt;link&gt;</code> or <code>&lt;style&gt;</code> nodes, the whole contained rules are not applied at all.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="exampleblock tab-container  no-max-height"> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,12-28,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithImagesAndCssTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/withImagesAndCss/resources</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))        <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The path to the templates (<code>/template/withImagesAndCss/resources.html</code> for the main body, <code>/template/withImagesAndCss/resources.txt.ftl</code> for the text alternative)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The template context</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithImagesAndCssTemplateSample.java?ts=2">Source code of the sample</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-44 highlight-lines:47"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>HtmlWithImagesAndCssTemplateSample<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/layout.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                             <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/theme.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;header&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/h1.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>name<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>value<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/left.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">base64</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/right.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">attach</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                 <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/tw.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>                       <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-image</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>           <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013<span class="tag">&lt;br</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span> <span class="attribute-name">data-inline-styles</span>=<span class="string"><span class="delimiter">"</span><span class="content">skip</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span> to this newsletter instantly  <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Reference a CSS file that contains general layout rules</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Reference a CSS file that contains theming (like colors) rules</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="7"></i><b>7</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="8"></i><b>8</b></td> 
              <td>Indicate Ogham to not apply styles on this node</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/withImagesAndCss/resources.html?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS files 
         </div> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             layout.css 
           </div> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="tag">body</span> {
  <span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>;
  <span class="key">width</span>: <span class="float">600px</span>;
}

<span class="tag">header</span> {
  <span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>;
}

<span class="tag">header</span> <span class="tag">img</span> {
  <span class="key">display</span>: <span class="value">block</span>;
  <span class="key">margin</span>: <span class="value">auto</span>;
}


<span class="class">.content</span> {
  <span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>;
}

<span class="class">.left</span>,
<span class="class">.right</span> {
  <span class="key">width</span>: <span class="float">250px</span>;
  <span class="key">display</span>: <span class="value">inline-block</span>;
}

<span class="class">.left</span> {
  <span class="key">margin-right</span>: <span class="float">36px</span>;
}

<span class="tag">footer</span> {
  <span class="key">padding</span>: <span class="float">30px</span>;
}

<span class="tag">footer</span> <span class="class">.sender-info</span>,
<span class="tag">footer</span> <span class="class">.social</span> {
  <span class="key">text-align</span>: <span class="value">center</span>;
}
<span class="tag">footer</span> <span class="class">.social</span> <span class="tag">a</span> {
  <span class="key">display</span>: <span class="value">inline-block</span>;
}
<span class="tag">footer</span> <span class="class">.sender-info</span> {
  <span class="key">margin-top</span>: <span class="float">20px</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="listingblock"> 
           <div class="title">
             theme.css 
           </div> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="tag">body</span> {
  <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;
}

<span class="tag">header</span> {
  <span class="key">background</span>: <span class="color">#70bbd9</span>;
}

<span class="class">.content</span> {
  <span class="key">text-align</span>: <span class="value">justify</span>;
}

<span class="tag">footer</span> {
  <span class="key">color</span>:<span class="color">#ffffff</span>;
  <span class="key">font-family</span>:<span class="value">Arial</span>, <span class="value">sans-serif</span>;
  <span class="key">font-size</span>:<span class="float">14px</span>;
  <span class="key">background</span>: <span class="color">#ee4c50</span>;
}

<span class="tag">footer</span> <span class="class">.social</span> <span class="tag">a</span> {
  <span class="key">color</span>:<span class="color">#ffffff</span>;
}

<span class="class">.white</span> {
  <span class="key">color</span>: <span class="color">#fff</span>;
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Generated HTML 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-42 highlight-lines:45"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>                                                <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;title&gt;</span>Demystifying Email Design<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">margin</span>: <span class="float">10px</span> <span class="value">auto</span> <span class="float">30px</span> <span class="value">auto</span>; <span class="key">width</span>: <span class="float">600px</span>; <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#ccc</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>         <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;header</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">background</span>: <span class="color">#70bbd9</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:0</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Creating Email Magic</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">block</span>; <span class="key">margin</span>: <span class="value">auto</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>      <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">40px</span> <span class="float">30px</span>; <span class="key">text-align</span>: <span class="value">justify</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>              <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;span&gt;</span>foo<span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;p&gt;</span>42<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">left</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">margin-right</span>: <span class="float">36px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">data:image/gif;base64,R0lGODlh+gCMANUAAOxRVfySUllNTaNvTPS1j</span>
            <span class="content">[...]</span>
            <span class="content">K1KIa9ahITapSl8rUpjr1qVCNqlSHFAQAOw==</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                   <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">width</span>: <span class="float">250px</span>; <span class="key">display</span>: <span class="value">inline-block</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:1</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                   <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Lorem ipsum dolor sit amet, consectetur
        adipiscing elit. In tempus adipiscing felis, sit amet blandit ipsum
        volutpat sed. Morbi porttitor, eget accumsan dictum, nisi libero
        ultricies ipsum, in posuere mauris neque at erat.
      <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;footer</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">padding</span>: <span class="float">30px</span>; <span class="key">color</span>: <span class="color">#ffffff</span>; <span class="key">font-family</span>: <span class="value">Arial</span>, <span class="value">sans-serif</span>; <span class="key">font-size</span>: <span class="float">14px</span>; <span class="key">background</span>: <span class="color">#ee4c50</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">social</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.twitter.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="7"></i><b>(7)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">cid:2</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Twitter</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                           <i class="conum" data-value="8"></i><b>(8)</b>
      <span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.facebook.com/</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">display</span>: <span class="value">inline-block</span>; <span class="key">color</span>: <span class="color">#ffffff</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>    <i class="conum" data-value="9"></i><b>(9)</b>
        <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">images/fb.gif</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">Facebook</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                      <i class="conum" data-value="10"></i><b>(10)</b>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">sender-info</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">text-align</span>: <span class="value">center</span>; <span class="key">margin-top</span>: <span class="float">20px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="entity">&amp;reg;</span> Someone, somewhere 2013 <span class="tag">&lt;br&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">#</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">white</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Unsubscribe<span class="tag">&lt;/a&gt;</span>to this newsletter instantly         <i class="conum" data-value="11"></i><b>(11)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/footer&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="6"></i><b>6</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="7"></i><b>7</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="8"></i><b>8</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="9"></i><b>9</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="10"></i><b>10</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="11"></i><b>11</b></td> 
              <td><code>.white</code> rule defined in <code>theming.css</code> matches this node however, you can notice that no <code>style</code> attribute has been added</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> 
           <div class="title">
             Future thoughts 
           </div> 
           <div class="paragraph"> 
            <p>In future version of Ogham, a new strategy may be added in order to include styles using <code>&lt;style&gt;</code> tags.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="inline_background_images"><a class="anchor" href="#inline_background_images"></a>3.1.4.3. Inline background images</h5> 
     <div class="paragraph"> 
      <p>As developer you may need to use background images to make your email more attractive. As for <code>&lt;img&gt;</code> tags, the images have to be either served from a server that is available online (and referenced by an URL) or embedded with the email.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Ogham provides automatic inlining of images included through CSS. It works for the following properties:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p><code>background</code>, <code>background-image</code></p> </li> 
       <li> <p><code>list-style</code>, <code>list-style-image</code></p> </li> 
       <li> <p><code>cursor</code></p> </li> 
      </ul> 
     </div> 
     <div class="admonitionblock important"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
         <td class="content"> 
          <div class="title">
            Email client support 
          </div> 
          <div class="paragraph"> 
           <p>Even if the properties <code>background</code>, <code>background-image</code>, <code>list-style</code>, <code>list-style-image</code> and <code>cursor</code> can be inlined by Ogham, it doesn’t mean that email clients support those properties.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> 
          <div class="title">
            Use a background color as fallback 
          </div> 
          <div class="paragraph"> 
           <p>We recommend that you provide a background color in addition to a background image as fallback in case that the image is not displayed by the email client.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>As well as <code>&lt;img&gt;</code> inlining, Ogham provides the following strategies:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Either attached with the email and referenced in the HTML using a <a href="https://tools.ietf.org/html/rfc2392">Content-ID</a>.</p> </li> 
       <li> <p>Or images are converted to a base64 string and embedded in the HTML using the <a href="https://tools.ietf.org/html/rfc2397">data URL scheme</a></p> </li> 
       <li> <p>Or not inlined at all (if the image points to an external URL or it is explicitly skipped)</p> </li> 
      </ul> 
     </div> 
     <div class="admonitionblock note"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
         <td class="content"> 
          <div class="title">
            Automatically skip external URLs 
          </div> 
          <div class="paragraph"> 
           <p>If the <code>url()</code> value references an external image (starting with <code>http://</code> or <code>https://</code>), the image is not inlined at all.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="admonitionblock note"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
         <td class="content"> 
          <div class="title">
            Images referenced in the HTML 
          </div> 
          <div class="paragraph"> 
           <p>In addition to CSS rules defined in external CSS file, Ogham also supports inlining of images referenced either in <code>&lt;style&gt;</code> tags or directly on HTML tags using <code>style</code> attribute.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="sect5"> 
      <h6 id="attach_and_reference_images_2"><a class="anchor" href="#attach_and_reference_images_2"></a>Attach and reference images</h6> 
      <div class="paragraph"> 
       <p>By default, if a CSS rule contains one of <code>background</code>, <code>background-image</code>, <code>list-style</code>, <code>list-style-image</code> or <code>cursor</code> properties with an <code>url()</code> that points to a local image, the image is automatically attached and referenced using a <a href="https://tools.ietf.org/html/rfc2392">Content-ID</a> that is automatically generated.</p> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> 
           <div class="title">
             Default choice explanation 
           </div> 
           <div class="paragraph"> 
            <p>Like <code>&lt;img&gt;</code> inlining, attach strategy is handled by more clients than base64 strategy.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> 
           <div class="title">
             Customize CID generation 
           </div> 
           <div class="paragraph"> 
            <p>Default Content-ID generation simply uses a incremental number. It is possible to use <a href="./user-manual.html#custom-cid-generation">custom Content-ID generation</a>.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>Instead of using default strategy, it is possible to explicitly indicate which inlining strategy to use for a particular image. This is done through <code>--inline-image</code> property.</p> 
      </div> 
      <div class="exampleblock tab-container no-max-height"> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,12-28,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithBackgroundImagesTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template (if provided)</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/thymeleaf/background-images</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                    <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))                             <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The path to the templates (<code>/template/thymeleaf/background-images.html</code> for the main body</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The template context</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithBackgroundImagesTemplateSample.java?ts=2">Source code of the sample</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:7,10"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>Inline background images<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">/resources/css/background-images.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>       <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">header</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                    <i class="conum" data-value="2"></i><b>(2)</b>
    Hello [[${name}]] !
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                   <i class="conum" data-value="3"></i><b>(3)</b>
    content
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">footer</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                    <i class="conum" data-value="4"></i><b>(4)</b>
    footer
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Include CSS file that contains rules with <code>background</code> images</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>A node that is targeted by a CSS rule that uses a background image. The background image will be inlined (using <code>attach</code> strategy).</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/background-images.html?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:2"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="class">.header</span> {
  <span class="key">background</span>: <span class="color">#ccc</span> <span class="function"><span class="delimiter">url(</span><span class="content">"../images/header.jpg"</span><span class="delimiter">)</span></span> <span class="value">repeat-x</span>;    <span class="comment">/* <i class="conum" data-value="1"></i><b>(1)</b>
  */</span>
  <span class="key">height</span>: <span class="float">200px</span>;
}

<span class="class">.footer</span> {
  <span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">"../images/footer.jpg"</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;        <span class="comment">/* <i class="conum" data-value="2"></i><b>(2)</b>
  */</span>
  <span class="key">height</span>: <span class="float">200px</span>;
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">base64</span>;                                   <span class="comment">/* <i class="conum" data-value="3"></i><b>(3)</b>
  */</span>
}

<span class="class">.content</span> {
  <span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">"../images/h1.gif"</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;            <span class="comment">/* <i class="conum" data-value="4"></i><b>(4)</b>
  */</span>
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">skip</span>;                                     <span class="comment">/* <i class="conum" data-value="5"></i><b>(5)</b>
  */</span>
  <span class="key">height</span>: <span class="float">400px</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>A <code>background</code> property that references a local image using <code>url()</code>. As nothing is specified, the image will be inlined using <code>attach</code> strategy.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>_</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/resources/css/background-images.css?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Generated HTML 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:7,10"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
 <span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;title&gt;</span>Inline background images<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
                                                                                                                                                             <i class="conum" data-value="1"></i><b>(1)</b>
 <span class="tag">&lt;/head&gt;</span>
 <span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">header</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="color">#ccc</span> <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;cid:0&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">repeat-x</span>;  <span class="key">height</span>: <span class="float">200px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                             <i class="conum" data-value="2"></i><b>(2)</b>
   Hello foo !
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;classpath:/resources/images/h1.gif&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;  <span class="key">height</span>: <span class="float">400px</span>;  <span class="delimiter">"</span></span><span class="tag">&gt;</span>                               <i class="conum" data-value="3"></i><b>(3)</b>
   content
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">footer</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkq[...]JpRFcBO8BIP/2Q==&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>; <span class="key">height</span>: <span class="float">200px</span>;  <span class="delimiter">"</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="4"></i><b>(4)</b>
   footer
  <span class="tag">&lt;/div&gt;</span>
 <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The CSS file is inlined (so the inclusion is removed)</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The image is attached and the generated Content-ID is <code>0</code>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect5"> 
      <h6 id="embed_using_data_url_scheme_2"><a class="anchor" href="#embed_using_data_url_scheme_2"></a>Embed using data URL scheme</h6> 
      <div class="paragraph"> 
       <p>Instead of attaching the image with the email, it is possible to inline images included through CSS rules directly as a base64 string. To enable it, you need to provide the <code>--inline-image</code> property with <code>base64</code> value.</p> 
      </div> 
      <div class="exampleblock tab-container no-max-height"> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,12-28,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithBackgroundImagesTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template (if provided)</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/thymeleaf/background-images</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                    <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))                             <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The path to the templates (<code>/template/thymeleaf/background-images.html</code> for the main body</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The template context</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithBackgroundImagesTemplateSample.java?ts=2">Source code of the sample</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:7,16"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>Inline background images<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">/resources/css/background-images.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>       <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">header</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                    <i class="conum" data-value="2"></i><b>(2)</b>
    Hello [[${name}]] !
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                   <i class="conum" data-value="3"></i><b>(3)</b>
    content
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">footer</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                    <i class="conum" data-value="4"></i><b>(4)</b>
    footer
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Include CSS file that contains rules with <code>background</code> images</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>A node that is targeted by a CSS rule that uses a background image. The background image will be inlined (using <code>base64</code> strategy).</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/background-images.html?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:8,11"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="class">.header</span> {
  <span class="key">background</span>: <span class="color">#ccc</span> <span class="function"><span class="delimiter">url(</span><span class="content">"../images/header.jpg"</span><span class="delimiter">)</span></span> <span class="value">repeat-x</span>;    <span class="comment">/* <i class="conum" data-value="1"></i><b>(1)</b>
  */</span>
  <span class="key">height</span>: <span class="float">200px</span>;
}

<span class="class">.footer</span> {
  <span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">"../images/footer.jpg"</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;        <span class="comment">/* <i class="conum" data-value="2"></i><b>(2)</b>
  */</span>
  <span class="key">height</span>: <span class="float">200px</span>;
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">base64</span>;                                   <span class="comment">/* <i class="conum" data-value="3"></i><b>(3)</b>
  */</span>
}

<span class="class">.content</span> {
  <span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">"../images/h1.gif"</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;            <span class="comment">/* <i class="conum" data-value="4"></i><b>(4)</b>
  */</span>
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">skip</span>;                                     <span class="comment">/* <i class="conum" data-value="5"></i><b>(5)</b>
  */</span>
  <span class="key">height</span>: <span class="float">400px</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>A <code>background</code> property that references a local image using <code>url()</code>. The inline strategy is specified using <code>--inline-image</code> property on the same CSS rule.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>Indicate the inlining strategy: use <code>base64</code> for all images contained in <code>.footer</code> rule.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>_</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/resources/css/background-images.css?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Generated HTML 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:16"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
 <span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;title&gt;</span>Inline background images<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
                                                                                                                                                             <i class="conum" data-value="1"></i><b>(1)</b>
 <span class="tag">&lt;/head&gt;</span>
 <span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">header</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="color">#ccc</span> <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;cid:0&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">repeat-x</span>;  <span class="key">height</span>: <span class="float">200px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                             <i class="conum" data-value="2"></i><b>(2)</b>
   Hello foo !
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;classpath:/resources/images/h1.gif&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;  <span class="key">height</span>: <span class="float">400px</span>;  <span class="delimiter">"</span></span><span class="tag">&gt;</span>                               <i class="conum" data-value="3"></i><b>(3)</b>
   content
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">footer</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkq[...]JpRFcBO8BIP/2Q==&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>; <span class="key">height</span>: <span class="float">200px</span>;  <span class="delimiter">"</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="4"></i><b>(4)</b>
   footer
  <span class="tag">&lt;/div&gt;</span>
 <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>The <code>style</code> attribute contains the <code>background</code> property with the image content converted as a base64 string (the base64 string is partially shown here for readability).</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> 
           <div class="title">
             Use different strategies for images defined in the same CSS rule 
           </div> 
           <div class="paragraph"> 
            <p>It is possible to reference several images (either <code>background</code> property with multiple background images or several properties) on the same CSS rule. <code>--inline-image</code> allows a more advanced syntax that allows to provide <a href="./user-manual.html#background-image-specific-image-strategy">a strategy for a specific image</a>.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
     </div> 
     <div class="sect5"> 
      <h6 id="skip_some_images_2"><a class="anchor" href="#skip_some_images_2"></a>Skip some images</h6> 
      <div class="exampleblock tab-container no-max-height"> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
         </div> 
         <div class="content"> 
          <div class="listingblock collapse-lines:1-10,12-28,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlWithBackgroundImagesTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template (if provided)</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/thymeleaf/background-images</span><span class="delimiter">"</span></span>,    <i class="conum" data-value="1"></i><b>(1)</b>
                    <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))                             <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>The path to the templates (<code>/template/thymeleaf/background-images.html</code> for the main body</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>The template context</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithBackgroundImagesTemplateSample.java?ts=2">Source code of the sample</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:7,13"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;title&gt;</span>Inline background images<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">/resources/css/background-images.css</span><span class="delimiter">"</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>       <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">header</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                    <i class="conum" data-value="2"></i><b>(2)</b>
    Hello [[${name}]] !
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                   <i class="conum" data-value="3"></i><b>(3)</b>
    content
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">footer</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                    <i class="conum" data-value="4"></i><b>(4)</b>
    footer
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Include CSS file that contains rules with <code>background</code> images</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>A node that is targeted by a CSS rule that uses a background image. The background image will not be inlined.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/background-images.html?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:16,18"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="class">.header</span> {
  <span class="key">background</span>: <span class="color">#ccc</span> <span class="function"><span class="delimiter">url(</span><span class="content">"../images/header.jpg"</span><span class="delimiter">)</span></span> <span class="value">repeat-x</span>;    <span class="comment">/* <i class="conum" data-value="1"></i><b>(1)</b>
  */</span>
  <span class="key">height</span>: <span class="float">200px</span>;
}

<span class="class">.footer</span> {
  <span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">"../images/footer.jpg"</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;        <span class="comment">/* <i class="conum" data-value="2"></i><b>(2)</b>
  */</span>
  <span class="key">height</span>: <span class="float">200px</span>;
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">base64</span>;                                   <span class="comment">/* <i class="conum" data-value="3"></i><b>(3)</b>
  */</span>
}

<span class="class">.content</span> {
  <span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">"../images/h1.gif"</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;            <span class="comment">/* <i class="conum" data-value="4"></i><b>(4)</b>
  */</span>
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">skip</span>;                                     <span class="comment">/* <i class="conum" data-value="5"></i><b>(5)</b>
  */</span>
  <span class="key">height</span>: <span class="float">400px</span>;
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>A <code>background</code> property that references a local image using <code>url()</code>. The inline strategy is specified using <code>--inline-image</code> property on the same CSS rule.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>Indicate the inlining strategy (<code>skip</code>): do not inline any image contained in <code>.content</code> rule.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/resources/css/background-images.css?ts=2">Source code of the HTML template</a></p> 
          </div> 
         </div> 
        </div> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Generated HTML 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:13"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
 <span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">"</span><span class="content">Content-Type</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;title&gt;</span>Inline background images<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">viewport</span><span class="delimiter">"</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">"</span><span class="content">width=device-width, initial-scale=1.0</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
                                                                                                                                                             <i class="conum" data-value="1"></i><b>(1)</b>
 <span class="tag">&lt;/head&gt;</span>
 <span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">header</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="color">#ccc</span> <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;cid:0&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">repeat-x</span>;  <span class="key">height</span>: <span class="float">200px</span>;<span class="delimiter">"</span></span><span class="tag">&gt;</span>                                                             <i class="conum" data-value="2"></i><b>(2)</b>
   Hello foo !
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">content</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;classpath:/resources/images/h1.gif&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>;  <span class="key">height</span>: <span class="float">400px</span>;  <span class="delimiter">"</span></span><span class="tag">&gt;</span>                               <i class="conum" data-value="3"></i><b>(3)</b>
   content
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">footer</span><span class="delimiter">"</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">"</span><span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">&amp;quot;data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkq[...]JpRFcBO8BIP/2Q==&amp;quot;</span><span class="delimiter">)</span></span> <span class="value">no-repeat</span>; <span class="key">height</span>: <span class="float">200px</span>;  <span class="delimiter">"</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="4"></i><b>(4)</b>
   footer
  <span class="tag">&lt;/div&gt;</span>
 <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>_</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>The <code>style</code> attribute contains the <code>background</code> property with unchanged url to the image (except for the path, see note below).</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>_</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> 
           <div class="title">
             Relative resources 
           </div> 
           <div class="paragraph"> 
            <p>It is possible to reference images from CSS using relative path. When Ogham inlines the CSS rules in the HTML using <code>style</code> attribute, the path to local images relative to the CSS file are updated to the absolute path. This way, the path in the HTML points to the right file.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
     </div> 
     <div class="sect5"> 
      <h6 id="background-image-specific-image-strategy"><a class="anchor" href="#background-image-specific-image-strategy"></a>Indicate a different strategy for specific images</h6> 
      <div class="paragraph"> 
       <p><code>background</code> and <code>background-image</code> properties allow to <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Backgrounds_and_Borders/Using_multiple_backgrounds">use multiple backgrounds</a>. Moreover, you could use several properties that reference different images on the same CSS rule. That’s why Ogham provides a more advanced syntax to be able to specify which strategy to use for which image.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The possible syntaxes are:</p> 
      </div> 
      <div class="ulist"> 
       <ul> 
        <li> <p><code>--inline-image: &lt;strategy&gt;;</code> to apply the same stategy to all images that need to be inlined.</p> </li> 
        <li> <p><code>--inline-image: &lt;image1&gt;=&lt;strategy1&gt; &lt;image2&gt;=&lt;strategy2&gt; …​ &lt;imageN&gt;=&lt;strategyN&gt;;</code> to apply <code>&lt;strategy1&gt;</code> on image that matches the path defined by <code>&lt;image1&gt;</code>, <code>&lt;strategy2&gt;</code> on image that matches the path defined by <code>&lt;image2&gt;</code>, and so on.</p> </li> 
        <li> <p><code>--inline-image: &lt;image1&gt;=&lt;strategy1&gt; &lt;image2&gt;=&lt;strategy2&gt; …​ &lt;imageN&gt;=&lt;strategyN&gt; &lt;default strategy&gt;;</code>: same as before but for all images that don’t match any path, it applies the <code>&lt;default strategy&gt;</code>.</p> </li> 
       </ul> 
      </div> 
      <div class="exampleblock tab-container no-max-height"> 
       <div class="title">
         Example 6. Same strategy for all images 
       </div> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:6"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="class">.same-strategy-for-all-images</span> {
  <span class="key">background-image</span>:
    <span class="value">no-repeat</span> <span class="function"><span class="delimiter">url(</span><span class="content">'/static/images/h1.gif'</span><span class="delimiter">)</span></span> <span class="value">top</span> <span class="value">center</span>,     <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="function"><span class="delimiter">url(</span><span class="content">'../images/right.gif'</span><span class="delimiter">)</span></span>;                            <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="key">list-style-image</span>: <span class="function"><span class="delimiter">url(</span><span class="content">'../images/disc.png'</span><span class="delimiter">)</span></span>;               <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">base64</span>;                                    <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>A first background that references the image <code>h1.gif</code> available in classpath subfolder <code>static/images</code>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>A second background that references the local image <code>right.gif</code> that is relative to the CSS file.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>Use the local image <code>disc.png</code> to style the list bullets.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>Indicate the inlining strategy (<code>base64</code>) for the three images.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="exampleblock tab-container no-max-height"> 
       <div class="title">
         Example 7. Strategy per image 
       </div> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:6"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="class">.strategy-per-images</span> {
  <span class="key">background-image</span>:
    <span class="value">no-repeat</span> <span class="function"><span class="delimiter">url(</span><span class="content">'/static/images/h1.gif'</span><span class="delimiter">)</span></span> <span class="value">top</span> <span class="value">center</span>,              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="function"><span class="delimiter">url(</span><span class="content">'../images/right.gif'</span><span class="delimiter">)</span></span>;                                     <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="key">list-style-image</span>: <span class="function"><span class="delimiter">url(</span><span class="content">'../images/disc.png'</span><span class="delimiter">)</span></span>;                        <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">h1</span>=<span class="value">base64</span> <span class="value">images</span>/<span class="value">right</span>.<span class="value">gif</span>=<span class="value">attach</span> <span class="value">disc</span>.<span class="value">png</span>=<span class="value">skip</span>;    <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>A first background that references the image <code>h1.gif</code> available in classpath folder <code>static/images</code>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>A second background that references the local image <code>right.gif</code> that is relative to the CSS file.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>Use the local image <code>disc.png</code> to style the list bullets.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>Indicate the inlining strategy per image: 
               <div class="ulist"> 
                <ul> 
                 <li> <p>Use <code>base64</code> strategy for image <code>h1.gif</code></p> </li> 
                 <li> <p>Use <code>attach</code> strategy for image <code>right.gif</code></p> </li> 
                 <li> <p>Skip inlining for image <code>disc.png</code></p> </li> 
                </ul> 
               </div></td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> 
           <div class="title">
             Image matching 
           </div> 
           <div class="paragraph"> 
            <p>The image matching is simply a <code>contains</code> test. It means that if you write <code>--inline-image: gif=base64 png=attach;</code>, <code>base64</code> strategy is applied on <code>h1.gif</code> and <code>right.gif</code> while <code>attach</code> strategy is used for <code>disc.png</code> in the example above.</p> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="exampleblock tab-container no-max-height"> 
       <div class="title">
         Example 8. Strategy per image with default 
       </div> 
       <div class="content"> 
        <div class="openblock tab"> 
         <div class="title"> 
          <span class="image"><img src="./images//icons/css.png" alt="css" width="37" height="30" class="img-fluid"></span> CSS 
         </div> 
         <div class="content"> 
          <div class="listingblock highlight-lines:6"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="css"><span class="class">.strategy-per-images-with-default</span> {
  <span class="key">background-image</span>:
    <span class="value">no-repeat</span> <span class="function"><span class="delimiter">url(</span><span class="content">'/static/images/h1.gif'</span><span class="delimiter">)</span></span> <span class="value">top</span> <span class="value">center</span>,              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="function"><span class="delimiter">url(</span><span class="content">'../images/right.gif'</span><span class="delimiter">)</span></span>;                                     <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="key">list-style-image</span>: <span class="function"><span class="delimiter">url(</span><span class="content">'../images/disc.png'</span><span class="delimiter">)</span></span>;                        <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="error">-</span><span class="key">-inline-image</span>: <span class="value">h1</span>=<span class="value">base64</span> <span class="value">attach</span>;                                   <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>A first background that references the image <code>h1.gif</code> available in classpath folder <code>static/images</code>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>A second background that references the local image <code>right.gif</code> that is relative to the CSS file.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>Use the local image <code>disc.png</code> to style the list bullets.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>Indicate the inlining strategies: 
               <div class="ulist"> 
                <ul> 
                 <li> <p>Use <code>base64</code> strategy for image <code>h1.gif</code></p> </li> 
                 <li> <p>Use <code>attach</code> strategy for all other images defined in the rule (<code>right.gif</code> and <code>disc.png</code>)</p> </li> 
                </ul> 
               </div></td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="text-alternative"><a class="anchor" href="#text-alternative"></a>3.1.5. A working preview of the HTML body (text alternative)</h4> 
    <div class="paragraph"> 
     <p>Sending an email with HTML content <strong>and</strong> text content might be really important, at least for smartphones. When a smartphone receives an email, it displays the sender, the subject and also a preview of the message, using the text alternative. If the message is only HTML, the preview might be unreadable.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9,11-20,23-30 highlight-lines:39-40"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlAndTextSample</span> {
  <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> html = <span class="string"><span class="delimiter">"</span><span class="content">&lt;!DOCTYPE html&gt;</span><span class="delimiter">"</span></span>
                + <span class="string"><span class="delimiter">"</span><span class="content">&lt;html&gt;</span><span class="delimiter">"</span></span>
                +   <span class="string"><span class="delimiter">"</span><span class="content">&lt;head&gt;&lt;meta charset=</span><span class="char">\"</span><span class="content">utf-8</span><span class="char">\"</span><span class="content"> /&gt;&lt;/head&gt;</span><span class="delimiter">"</span></span>
                +   <span class="string"><span class="delimiter">"</span><span class="content">&lt;body&gt;</span><span class="delimiter">"</span></span>
                +     <span class="string"><span class="delimiter">"</span><span class="content">&lt;h1 class=</span><span class="char">\"</span><span class="content">title</span><span class="char">\"</span><span class="content">&gt;Hello World&lt;/h1&gt;</span><span class="delimiter">"</span></span>
                +     <span class="string"><span class="delimiter">"</span><span class="content">&lt;p class=</span><span class="char">\"</span><span class="content">text</span><span class="char">\"</span><span class="content">&gt;Foo bar&lt;/p&gt;</span><span class="delimiter">"</span></span>
                +   <span class="string"><span class="delimiter">"</span><span class="content">&lt;/body&gt;</span><span class="delimiter">"</span></span>
                + <span class="string"><span class="delimiter">"</span><span class="content">&lt;/html&gt;</span><span class="delimiter">"</span></span>;
  <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> text = <span class="string"><span class="delimiter">"</span><span class="content">Hello World !</span><span class="char">\r</span><span class="char">\n</span><span class="delimiter">"</span></span>
                + <span class="string"><span class="delimiter">"</span><span class="content">Foo bar</span><span class="delimiter">"</span></span>;

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using the fluent API</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">HtmlAndTextSample</span><span class="delimiter">"</span></span>)
            .text().string(text)              <i class="conum" data-value="1"></i><b>(1)</b>
            .html().string(html)              <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Explicitly set the textual content (used as alternative body). The alternative body is used when the email client doesn’t support HTML or as a preview of the email.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Explicitly set the HTML content (used as main body)</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>The call order between <code>text()</code> and <code>html()</code> doesn’t matter (unlike using <code>.content(new MultiContent(…​))</code>).</p> 
             </div> </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>The underlying <code>Content</code> is a <code>MultiContent</code>.</p> 
             </div> </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Obviously, you can use templates too. Even better, the following sample shows the shorthand version that avoids specifying twice the path to the templates (a single path without extension for both HTML and text template files).</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9,37-49 irrelevant-lines:1-9,12-19 highlight-lines:31-32"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlAndTextTemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">HtmlAndTextTemplateSample</span><span class="delimiter">"</span></span>)
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/thymeleaf/simple</span><span class="delimiter">"</span></span>,          <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))    <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The body contains two parts (main body and alternative body) because there are two templates (one for HTML located at <code>/template/thymeleaf/simple.html</code> and one for text located at <code>/template/thymeleaf/simple.txt</code>). Only a single path is specified for both template files (without extension).</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>The object used for evaluation as usual when using templates (same object used for both HTML and text)</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>The underlying <code>Content</code> is a <code>MultiTemplateContent</code>.</p> 
             </div> </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextTemplateSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf-text.jpg" alt="thymeleaf text" width="30" height="30" class="img-fluid"></span> Text template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="title">
           Text template located in 
          <code>src/main/resources/template/thymeleaf/simple.txt</code> 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="txt">[[${name}]] [[${value}]]</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.txt?ts=2">Source code of the text template</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30" class="img-fluid"></span> HTML template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="title">
           HTML template located at 
          <code>src/main/resources/template/thymeleaf/simple.html</code> 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>        <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>     <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.html?ts=2">Source code of the HTML template</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Ogham will automatically determine file extensions to append according to the kind of message you are sending. For email, Ogham will search a HTML and a text file by default:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>Using ThymeLeaf, the file extensions are <code>.html</code> and <code>.txt</code> (configurable).</p> </li> 
      <li> <p>Using FreeMarker, Ogham will search files with extensions <code>.html.ftl</code> and <code>.txt.ftl</code> (configurable).</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>If you are using <code>body()</code> (or explicitly using <code>content(new MultiTemplateContent(…​))</code>) and you only provide one template (only <code>HTML</code> for example). Ogham will not fail by default (configurable). Therefore, you can start your code with only a HTML template and add the text template later when you need it. That way, your Java code doesn’t require any change.</p> 
    </div> 
    <div class="paragraph"> 
     <p>It is possible to mix templates in the same application. Even better, you can use a template engine that is better suited for HTML like Thymeleaf and FreeMarker that is better for textual version for the same email. Just write your templates with the engine you want.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9,37-49 irrelevant-lines:1-9,12-19 highlight-lines:31-32"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HtmlAndTextMixedTemplateEnginesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// Note that the extension of the template is not given. This version</span>
    <span class="comment">// automatically takes the provided path and adds the '.html' extension</span>
    <span class="comment">// for the HTML template and '.txt.ftl' for text template</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">HtmlAndTextMixedTemplateEnginesSample</span><span class="delimiter">"</span></span>)
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/mixed/simple</span><span class="delimiter">"</span></span>,                <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))      <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The body contains two parts (main body and alternative body) because there are two templates (one for HTML located at <code>/template/thymeleaf/simple.html</code> and one for text located at <code>/template/thymeleaf/simple.txt.ftl</code>). Only a single path is specified for both template files (without extension). The HTML template uses Thymeleaf while the text template uses FreeMarker.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>The object used for evaluation as usual when using templates (same object used for both HTML and text)</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextMixedTemplateEnginesSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/freemarker-logo.png" alt="freemarker logo" width="60" height="24" class="img-fluid"></span> Text template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="title">
           Text template located in 
          <code>src/main/resources/template/mixed/simple.txt.ftl</code> 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="txt">${name} ${value}</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/mixed/simple.txt.ftl?ts=2">Source code of the text template</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> HTML template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="title">
           HTML template located at 
          <code>src/main/resources/template/mixed/simple.html</code> 
         </div> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/mixed/simple.html?ts=2">Source code of the HTML template</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>You can notice that the Java code has not changed at all (only the path for the sample). The aim is to use the template engine that best suits your needs.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="attach_files_to_the_email"><a class="anchor" href="#attach_files_to_the_email"></a>3.1.6. Attach files to the email</h4> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-12 irrelevant-lines:1-12,14-21 highlight-lines:32-33"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">java.io.InputStream</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">WithAttachmentSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;email address to display for the sender user&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">WithAttachmentSample</span><span class="delimiter">"</span></span>)
            .body().string(<span class="string"><span class="delimiter">"</span><span class="content">content of the email</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>)
            .attach().resource(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/attachment/test.pdf</span><span class="delimiter">"</span></span>)            <i class="conum" data-value="1"></i><b>(1)</b>
            .attach().stream(<span class="string"><span class="delimiter">"</span><span class="content">from-stream.pdf</span><span class="delimiter">"</span></span>, loadInputStream()));        <i class="conum" data-value="2"></i><b>(2)</b>
  }

  <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">InputStream</span> loadInputStream() {
    <span class="keyword">return</span> WithAttachmentSample.class.getResourceAsStream(<span class="string"><span class="delimiter">"</span><span class="content">/attachment/test.pdf</span><span class="delimiter">"</span></span>);
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Attach a PDF file that exists in the classpath to the email. The name of the attachment uses the name of the file</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Use an <code>InputStream</code> and name the attachment</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/WithAttachmentSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Attaching a file to the email is quite simple. You just need to provide the path to the file. The file is loaded from classpath but could also be loaded from file system or anywhere else (see <a href="./user-manual.html#resource-resolution">resource resolution section</a>). In case you are using a file, the name of the attachment displayed in the email is automatically determined (<code>test.pdf</code> in the example).</p> 
    </div> 
    <div class="paragraph"> 
     <p>It is often not possible to handle files directly. In that case you will use <code>InputStream</code> or <code>byte[]</code>. In that case, you need to name the attachment explicitly.</p> 
    </div> 
    <div class="paragraph"> 
     <p>In both cases, the mimetype is automatically determined (<code>application/pdf</code> in this case). Mimetype is really important to ensure that the recipient(s) will be able to download or view the files correctly. It is possible to explicitly set the content type of the attachment if the automatic behavior doesn’t fit your needs.</p> 
    </div> 
    <div class="paragraph"> 
     <p>The file content is linked to the email using <code>ContentDisposition.ATTACHMENT</code>.</p> 
    </div> 
    <div class="admonitionblock important"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
        <td class="content"> If you are using <code>InputStream</code>, you need to close the stream after sending the email. </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> You can also add a custom description for any attachment but in this case use <code>Attachment</code> class. </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> 
         <div class="paragraph"> 
          <p>You can link a file to the email body using <code>embed()</code> instead of <code>attach()</code>. To make the link, the email body must contain an explicit reference using a <a href="https://tools.ietf.org/html/rfc4021#section-2.2.2">Content-ID (or CID)</a>. The linked attachment must provide the Content-ID header with the same CID (automatically set by Ogham). The embedded attachment disposition is automatically set to <code>ContentDisposition.INLINE</code>.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="globally_configure_default_email_fields"><a class="anchor" href="#globally_configure_default_email_fields"></a>3.1.7. Globally configure default email fields</h4> 
    <div class="sect4"> 
     <h5 id="globally_configure_default_sender"><a class="anchor" href="#globally_configure_default_sender"></a>3.1.7.1. Globally configure default sender</h5> 
     <div class="paragraph"> 
      <p>You can configure sender address for all sent email by setting the property <code>ogham.email.from.default-value</code>. The value can either be an email address (<code>user@domain.host</code>) or an address with personal information (<code>User Name &lt;<a href="mailto:user@domain.host">user@domain.host</a>&gt;</code>). This property is used for every implementation (through SMTP, through SendGrid, …​).</p> 
     </div> 
     <div class="paragraph"> 
      <p>This global address is used only if nothing is specified in the email. If you explicitly set the sender address in the email constructor or using the setter, this value is used instead of the global one.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9 highlight-lines:17,35"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">OverrideDefaultSenderSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">foo.bar@test.com</span><span class="delimiter">"</span></span>);  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()                                               <i class="conum" data-value="2"></i><b>(2)</b>
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">OverrideDefaultSenderSample</span><span class="delimiter">"</span></span>)
            .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
    <span class="comment">// =&gt; the sender address is foo.bar@test.com</span>

    service.send(<span class="keyword">new</span> Email()
        .subject(<span class="string"><span class="delimiter">"</span><span class="content">subject</span><span class="delimiter">"</span></span>)
        .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
        .from(<span class="string"><span class="delimiter">"</span><span class="content">override@test.com</span><span class="delimiter">"</span></span>)                                     <i class="conum" data-value="3"></i><b>(3)</b>
        .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
    <span class="comment">// =&gt; the sender address is now override@test.com</span>
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the default sender address globally using properties</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Do not provide <code>from</code> field so the sender address is <code>foo.bar@test.com</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Override the default sender address by providing a <code>from</code> field. The address is now <code>override@test.com</code></td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/OverrideDefaultSenderSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> <code>mail.from</code> and <code>mail.smtp.from</code> also work </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="globally_configure_default_subject"><a class="anchor" href="#globally_configure_default_subject"></a>3.1.7.2. Globally configure default subject</h5> 
     <div class="paragraph"> 
      <p>As for sender address, you can define globally a default subject for emails if none is explicitly provided (neither using <code>.subject(String)</code> method nor defining a subject directly in the template). The property is <code>ogham.email.subject.default-value</code>.</p> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="globally_configure_default_recipients"><a class="anchor" href="#globally_configure_default_recipients"></a>3.1.7.3. Globally configure default recipients</h5> 
     <div class="paragraph"> 
      <p>You can also use properties to define default recipients if none are provided:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p><code>ogham.email.to.default-value</code>: set one or several recipient addresses (<code>to</code> field)</p> </li> 
       <li> <p><code>ogham.email.cc.default-value</code>: set one or several recipient addresses (<code>cc</code> field)</p> </li> 
       <li> <p><code>ogham.email.bcc.default-value</code>: set one or several recipient addresses (<code>bcc</code> field)</p> </li> 
      </ul> 
     </div> 
     <div class="paragraph"> 
      <p>This can be convenient to set a <code>bcc</code> address for all sent messages for example (the <code>bcc</code> address will never be seen in received emails).</p> 
     </div> 
     <div class="paragraph"> 
      <p>To define several recipient addresses, you can provide a string separated by <code>,</code>.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-24,26-34,51-70 irrelevant-lines:1-24 highlight-lines:41-43"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">oghamall.it.email</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.contains</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.containsInAnyOrder</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.LoggingTestRule</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.email.RandomPortGreenMailRule</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailPropertiesTest</span> {

  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> LoggingTestRule loggingRule = <span class="keyword">new</span> LoggingTestRule();

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> RandomPortGreenMailRule();

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    <span class="predefined-type">Properties</span> additional = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    additional.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, greenMail.getSmtp().getBindTo());
    additional.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(greenMail.getSmtp().getPort()));
    additional.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>);
    additional.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.to.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient.to1@sii.fr,  recipient.to2@sii.fr , recipient.to3@sii.fr</span><span class="delimiter">"</span></span>);   <i class="conum" data-value="1"></i><b>(1)</b>
    additional.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.cc.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient.cc1@sii.fr,recipient.cc2@sii.fr</span><span class="delimiter">"</span></span>);                            <i class="conum" data-value="2"></i><b>(2)</b>
    additional.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.bcc.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient.bcc@sii.fr</span><span class="delimiter">"</span></span>);                                                <i class="conum" data-value="3"></i><b>(3)</b>
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/application.properties</span><span class="delimiter">"</span></span>)
          .properties(additional)
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    oghamService.send(<span class="keyword">new</span> Email()
              .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
              .content(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
        .count(is(<span class="integer">6</span>))
        .every()
          .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))
          .body()
            .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>))
            .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
          .from()
            .address(contains(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>)).and()
          .to()
            .address(containsInAnyOrder(<span class="string"><span class="delimiter">"</span><span class="content">recipient.to1@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient.to2@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient.to3@sii.fr</span><span class="delimiter">"</span></span>)).and()
          .cc()
            .address(containsInAnyOrder(<span class="string"><span class="delimiter">"</span><span class="content">recipient.cc1@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient.cc2@sii.fr</span><span class="delimiter">"</span></span>));
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Define 3 <code>to</code> recipients</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Define 2 <code>cc</code> recipients</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Define a single <code>bcc</code> recipient</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/ogham-all/src/test/java/oghamall/it/email/EmailPropertiesTest.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> 
          <div class="paragraph"> 
           <p>The email addresses are trimmed:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java">additional.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.to.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">  foo@example.com  ,    John Doe &lt;bar@example.com&gt;,   abc@example.com</span><span class="delimiter">"</span></span>);</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The email addresses will be:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><code>foo@example.com</code></p> </li> 
            <li> <p><code>John Doe &lt;<a href="mailto:bar@example.com">bar@example.com</a>&gt;</code></p> </li> 
            <li> <p><code>abc@example.com</code></p> </li> 
           </ul> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="provide_smtp_authentication"><a class="anchor" href="#provide_smtp_authentication"></a>3.1.8. Provide SMTP authentication</h4> 
    <div class="sect4"> 
     <h5 id="configure_username_and_password"><a class="anchor" href="#configure_username_and_password"></a>3.1.8.1. Configure username and password</h5> 
     <div class="paragraph"> 
      <p>Some SMTP servers need credentials. When using Java Mail API, you need to provide an <code>Authenticator</code>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Ogham has a shortcut to declare default authentication mechanism using a username and a password. Just set the two following properties:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p><code>ogham.email.javamail.authenticator.username</code></p> </li> 
       <li> <p><code>ogham.email.javamail.authenticator.password</code></p> </li> 
      </ul> 
     </div> 
     <div class="paragraph"> 
      <p>It will automatically create an <code>Authenticator</code> with the provided values.</p> 
     </div> 
     <div class="paragraph"> 
      <p>See <a href="./user-manual.html#gmail">Send email through GMail sample</a>.</p> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="custom_authenticator"><a class="anchor" href="#custom_authenticator"></a>3.1.8.2. Custom Authenticator</h5> 
     <div class="exampleblock TODO"> 
      <div class="content"> 
       <div class="ulist"> 
        <ul> 
         <li> <p>Explain how to add a custom Authenticator implementation</p> </li> 
        </ul> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="use_ssl"><a class="anchor" href="#use_ssl"></a>3.1.9. Use SSL</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Add samples for ssl</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="gmail"><a class="anchor" href="#gmail"></a>3.1.10. Send email through GMail</h4> 
    <div class="paragraph"> 
     <p>This sample shows how to send a basic email through GMail. Sending through GMail is simply using username/password authentication and enabling SSL.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:-7 irrelevant-lines:-7 highlight-lines:16-22"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email.gmail</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">GmailSSLBasicSample</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties (properties can be externalized)</span>
    MessagingService service = MessagingBuilder.standard()                                      <i class="conum" data-value="1"></i><b>(1)</b>
      .environment()
        .properties()                                                                       <i class="conum" data-value="2"></i><b>(2)</b>
          .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.auth</span><span class="delimiter">"</span></span>, <span class="predefined-constant">true</span>)                                                    <i class="conum" data-value="3"></i><b>(3)</b>
          .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">smtp.gmail.com</span><span class="delimiter">"</span></span>)                                        <i class="conum" data-value="4"></i><b>(4)</b>
          .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="integer">465</span>)                                                     <i class="conum" data-value="5"></i><b>(5)</b>
          .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.socketFactory.class</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">javax.net.ssl.SSLSocketFactory</span><span class="delimiter">"</span></span>)         <i class="conum" data-value="6"></i><b>(6)</b>
          .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.javamail.authenticator.username</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your gmail username&gt;</span><span class="delimiter">"</span></span>)    <i class="conum" data-value="7"></i><b>(7)</b>
          .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.javamail.authenticator.password</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your gmail password&gt;</span><span class="delimiter">"</span></span>)    <i class="conum" data-value="8"></i><b>(8)</b>
          .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your gmail address&gt;</span><span class="delimiter">"</span></span>)                  <i class="conum" data-value="9"></i><b>(9)</b>
          .and()
        .and()
      .build();
    <span class="comment">// send the mail using fluent API</span>
    service.send(<span class="keyword">new</span> Email()                                                                    <i class="conum" data-value="10"></i><b>(10)</b>
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">GmailSSLBasicSample</span><span class="delimiter">"</span></span>)
            .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Use the standard builder to configure and instantiate the MessagingService as usual</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Use the fluent API to provide configuration properties (this is exactly the same as providing <code>java.util.Properties</code> object)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>GMail requires authentication so property <code>mail.smtp.auth</code> must be set to true (this is the standard JavaMail behavior)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>GMail SMTP host (using JavaMail standard property)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>GMail SMTP port (using JavaMail standard property)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>GMail uses SSL (JavaMail requires this special property to enable SSL)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>Provide your GMail username</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="8"></i><b>8</b></td> 
            <td>Provide your Gmail password</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="9"></i><b>9</b></td> 
            <td>Provide your GMail email address</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="10"></i><b>10</b></td> 
            <td>Send the email</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/gmail/GmailSSLBasicSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Using GMail server is quite easy. This samples shows several things:</p> 
    </div> 
    <div class="olist arabic"> 
     <ol class="arabic"> 
      <li> <p>The code to send email is still the same.</p> </li> 
      <li> <p>The properties can be provided in a fluent way.</p> </li> 
      <li> <p>SSL is enabled using standard JavaMail property.</p> </li> 
      <li> <p>Authentication is done using properties. JavaMail doesn’t provide this shortcut. Without Ogham, you have to implement an <a href="http://docs.oracle.com/javaee/7/api/javax/mail/Authenticator.html">Authenticator</a>.</p> </li> 
     </ol> 
    </div> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain that GMail now doesn’t allow to use account password. It requires an application password</p> </li> 
        <li> <p>Show how to create application password (or just link to guide or documentation)</p> </li> 
        <li> <p>Show sample with port 587</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="sendgrid"><a class="anchor" href="#sendgrid"></a>3.1.11. Sending email through SendGrid</h4> 
    <div class="paragraph"> 
     <p>Sending an email using SendGrid HTTP API is exactly the same in term of code. The only difference is the configuration of Ogham.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java (SendGrid) 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-40,60-72 irrelevant-lines:1-40"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email.sendgrid</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="comment">/**
 * This sample shows how to send email with following characteristics:
 * &lt;ul&gt;
 * &lt;li&gt;Use templates&lt;/li&gt;
 * &lt;li&gt;Use template prefix&lt;/li&gt;
 * &lt;li&gt;The HTML template uses external CSS and images&lt;/li&gt;
 * &lt;li&gt;The HTML template loads page fragments&lt;/li&gt;
 * &lt;li&gt;The subject is extracted from templates&lt;/li&gt;
 * &lt;li&gt;Send HTML email with text fallback&lt;/li&gt;
 * &lt;li&gt;Add attachments to the email&lt;/li&gt;
 * &lt;li&gt;Properties are loaded from external file and API key is set in code&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;p&gt;
 * The templates are available in src/main/resources/template/thymeleaf/email:
 * &lt;ul&gt;
 * &lt;li&gt;full.html&lt;/li&gt;
 * &lt;li&gt;full.txt&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;p&gt;
 * The HTML template uses a page fragment that is available in
 * src/main/resources/template/thymeleaf/email/fragments/header.html.
 *
 * &lt;p&gt;
 * The HTML template also references external CSS and images that are available
 * in src/main/resources/resources.
 *
 * @author Aurélien Baudet
 *
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SendGridFullSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sendgrid-template.properties</span><span class="delimiter">"</span></span>)                <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// @formatter:off</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">full</span><span class="delimiter">"</span></span>, <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))     <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>)
            .attach().resource(<span class="string"><span class="delimiter">"</span><span class="content">/attachment/test.pdf</span><span class="delimiter">"</span></span>));
    <span class="comment">// @formatter:on</span>
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Load properties from a file that is in the classpath.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Use a resource present in the classpath.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/sendgrid/SendGridFullSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties (SendGrid) 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="python"><span class="comment"># ogham additional properties</span>
ogham.email.sendgrid.api-key=&lt;your sendgrid API key&gt;           <i class="conum" data-value="1"></i><b>(1)</b>
ogham.email.from.default-value=&lt;sender email address&gt;          <i class="conum" data-value="2"></i><b>(2)</b>
ogham.email.template.path-prefix=/template/thymeleaf/email/    <i class="conum" data-value="3"></i><b>(3)</b></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The SendGrid API key instead of SMTP configuration</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>The sender email address (same as JavaMail)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>A prefix for all template paths. In this example, the template paths are <code>/template/thymeleaf/email/full.html</code> and <code>/template/thymeleaf/email/full.txt</code> (same as JavaMail).</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/sendgrid-template.properties?ts=2">Source code of the configuration file</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java (JavaMail) 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-40,60-72 irrelevant-lines:1-40"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="comment">/**
 * This sample shows how to send email with following characteristics:
 * &lt;ul&gt;
 * &lt;li&gt;Use templates&lt;/li&gt;
 * &lt;li&gt;Use template prefix&lt;/li&gt;
 * &lt;li&gt;The HTML template uses external CSS and images&lt;/li&gt;
 * &lt;li&gt;The HTML template loads page fragments&lt;/li&gt;
 * &lt;li&gt;The subject is extracted from templates&lt;/li&gt;
 * &lt;li&gt;Send HTML email with text fallback&lt;/li&gt;
 * &lt;li&gt;Add attachments to the email&lt;/li&gt;
 * &lt;li&gt;Properties are loaded from external file&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;p&gt;
 * The templates are available in src/main/resources/template/thymeleaf/email:
 * &lt;ul&gt;
 * &lt;li&gt;full.html&lt;/li&gt;
 * &lt;li&gt;full.txt&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;p&gt;
 * The HTML template uses a page fragment that is available in
 * src/main/resources/template/thymeleaf/email/fragments/header.html.
 *
 * &lt;p&gt;
 * The HTML template also references external CSS and images that are available
 * in src/main/resources/resources.
 *
 * @author Aurélien Baudet
 *
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">FullSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/email-template.properties</span><span class="delimiter">"</span></span>)                   <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    <span class="comment">// @formatter:off</span>
    service.send(<span class="keyword">new</span> Email()
            .body().template(<span class="string"><span class="delimiter">"</span><span class="content">full</span><span class="delimiter">"</span></span>, <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))     <i class="conum" data-value="2"></i><b>(2)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>)
            .attach().resource(<span class="string"><span class="delimiter">"</span><span class="content">/attachment/test.pdf</span><span class="delimiter">"</span></span>));
    <span class="comment">// @formatter:on</span>
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Load properties from a file that is in the classpath.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Use a resource present in the classpath.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/FullSample.java?ts=2">Source code of the sample</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties (JavaMail) 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="python"><span class="comment"># general SMTP server</span>
mail.smtp.host=&lt;your server host&gt;                                   <i class="conum" data-value="1"></i><b>(1)</b>
mail.smtp.port=&lt;your server port&gt;                                   <i class="conum" data-value="2"></i><b>(2)</b>
<span class="comment"># using with Gmail</span>
<span class="comment">#mail.smtp.auth=true</span>
<span class="comment">#mail.smtp.host=smtp.gmail.com</span>
<span class="comment">#mail.smtp.port=465</span>
<span class="comment">#mail.smtp.socketFactory.port=465</span>
<span class="comment">#mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory</span>
<span class="comment">#ogham.email.javamail.authenticator.username=&lt;your gmail username&gt;</span>
<span class="comment">#ogham.email.javamail.authenticator.password=&lt;your gmail password&gt;</span>


<span class="comment"># ogham additional properties</span>
ogham.email.from.default-value=&lt;sender email address&gt;               <i class="conum" data-value="3"></i><b>(3)</b>
ogham.email.template.path-prefix=/template/thymeleaf/email/         <i class="conum" data-value="4"></i><b>(4)</b></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The SMTP host used by JavaMail</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>The SMTP port used by JavaMail</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>The sender email address</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>A prefix for all template paths. In this example, the template paths are <code>/template/thymeleaf/email/full.html</code> and <code>/template/thymeleaf/email/full.txt</code>.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/email-template.properties?ts=2">Source code of the configuration file</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="internationalization"><a class="anchor" href="#internationalization"></a>3.1.12. Internationalization</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Add sample to show how to use <code>LocaleContext</code></p> </li> 
        <li> <p>Explain ideas and future work about locale manamement</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="sms-usage"><a class="anchor" href="#sms-usage"></a>3.2. Send SMS</h3> 
   <div class="paragraph"> 
    <p>The samples are available in the <a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage">sample-standard-usage sub-project</a>.</p> 
   </div> 
   <div class="paragraph"> 
    <p>All samples shown bellow are using SMPP for sending SMS and are also valid for send SMS using any other protocol/API. Only the configuration part differs.</p> 
   </div> 
   <div class="paragraph"> 
    <p>See <a href="./user-manual.html#ovh">Sending SMS through OVH</a> to know how to configure Ogham for sending SMS using OVH HTTP API.</p> 
   </div> 
   <div class="admonitionblock tip"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
       <td class="content"> 
        <div class="title">
          SMPP protocol 
        </div> 
        <div class="paragraph"> 
         <p>The <a href="https://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer">SMPP</a> protocol is the standard way to send SMS. Only a subset of SMPP properties are used in following samples. The whole list of SMPP properties is available in <a href="./user-manual.html#advanced-smpp-configuration">advanced configuration</a>.</p> 
        </div> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="sect3"> 
    <h4 id="first_sms_using_an_existing_smpp_server"><a class="anchor" href="#first_sms_using_an_existing_smpp_server"></a>3.2.1. First SMS using an existing SMPP server</h4> 
    <div class="paragraph"> 
     <p>This sample defines two properties mandatory (system ID and password) by this protocol in order to use it.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);                                 <i class="conum" data-value="1"></i><b>(1)</b>
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);                                 <i class="conum" data-value="2"></i><b>(2)</b>
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.system-id</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server system ID&gt;</span><span class="delimiter">"</span></span>);                       <i class="conum" data-value="3"></i><b>(3)</b>
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.password</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server password&gt;</span><span class="delimiter">"</span></span>);                         <i class="conum" data-value="4"></i><b>(4)</b>
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;phone number to display for the sender&gt;</span><span class="delimiter">"</span></span>);  <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()                                               <i class="conum" data-value="6"></i><b>(6)</b>
        .environment()
          .properties(properties)                                                                  <i class="conum" data-value="7"></i><b>(7)</b>
          .and()
        .build();                                                                                    <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()                                                                               <i class="conum" data-value="9"></i><b>(9)</b>
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Configure the SMPP server host</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Configure the SMPP server port</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>The SMPP system ID</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>The SMPP password</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>The phone number of the sender</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Use the standard builder (predefined behavior)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>Register the custom properties</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="8"></i><b>8</b></td> 
            <td>Create a MessagingService instance</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="9"></i><b>9</b></td> 
            <td>Send a SMS with a simple message. The sender phone number is automatically set using <code>ogham.sms.from.default-value</code> property</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>The construction of the SMS is done using a fluent API in order to chain calls and to have a more readable code.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Properties are directly provided in the code. You can instead <a href="./user-manual.html#properties-handling">use a configuration file</a>.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="sms-template"><a class="anchor" href="#sms-template"></a>3.2.2. Use a template for SMS content</h4> 
    <div class="paragraph"> 
     <p>This sample shows how to send a SMS with a content following a template engine language.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9,35-47 irrelevant-lines:1-9,12-21 highlight-lines:29,30"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">TemplateSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.system-id</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server system ID&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.password</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server password&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;phone number to display for the sender&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()                              <i class="conum" data-value="1"></i><b>(1)</b>
        .environment()
          .properties(properties)                                                 <i class="conum" data-value="2"></i><b>(2)</b>
          .and()
        .build();                                                                   <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()                                                              <i class="conum" data-value="4"></i><b>(4)</b>
            .message().template(<span class="string"><span class="delimiter">"</span><span class="content">classpath:/template/thymeleaf/simple.txt</span><span class="delimiter">"</span></span>,     <i class="conum" data-value="5"></i><b>(5)</b>
                          <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))              <i class="conum" data-value="6"></i><b>(6)</b>
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Use the standard builder (predefined behavior)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Register the custom properties</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Create a MessagingService instance</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Send a SMS with message that comes from the evaluated template. The sender address is automatically set using <code>ogham.sms.from.default-value</code> property</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Indicate the path to the template file (in the classpath)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Use any bean object for replacing variables in template</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/TemplateSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> ThymeLeaf template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html">[[${name}]] [[${value}]]</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.txt?ts=2">Source code of the template</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Using a template is straightforward. Instead of providing a string content (using <code>.message().string(…​)</code>), you call <code>.message().template(…​, …​)</code>. The <code>template</code> method requires two pieces of information:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>The path to the template</p> </li> 
      <li> <p>The variables to evaluate in the template</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>The path to the template is a string with a <strong>lookup</strong> prefix. The lookup prefix is used to indicate where to search the template (from file system, from classpath or anywhere else). Here we explicitly ask to load the template from classpath (using prefix <code>classpath:</code>). If no lookup is defined, classpath is used by default. See <a href="./user-manual.html#resource-resolution">Resource resolution section</a> for more information.</p> 
    </div> 
    <div class="paragraph"> 
     <p>The variables are any object you are using in your application. No need to convert your object to a particular format. Directly use what you want.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="auto-split-sms"><a class="anchor" href="#auto-split-sms"></a>3.2.3. Send a long SMS</h4> 
    <div class="paragraph"> 
     <p>As you may know, SMS stands for Short Message Service. Basically, the messages are limited to a maximum of 160 characters if character encoding is using 7bits. Using a 8-bit character encoding decreases the limit to 140 characters and 70 characters for a 16-bit encoding. If needed, the library will split your messages into several parts the right way to be recomposed by clients later (according to the message encoding). Therefore, you don’t need to handle the split of messages in your code:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9,12-21 highlight-lines:27-30"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">LongMessageSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.system-id</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server system ID&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.password</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server password&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;phone number to display for the sender&gt;</span><span class="delimiter">"</span></span>);
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="predefined-type">String</span> longMessage = <span class="string"><span class="delimiter">"</span><span class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad </span><span class="delimiter">"</span></span>
              + <span class="string"><span class="delimiter">"</span><span class="content">minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehender</span><span class="delimiter">"</span></span>
              + <span class="string"><span class="delimiter">"</span><span class="content">it in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui o</span><span class="delimiter">"</span></span>
              + <span class="string"><span class="delimiter">"</span><span class="content">fficia deserunt mollit anim id est laborum.</span><span class="delimiter">"</span></span>;
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(longMessage)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/LongMessageSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="admonitionblock note"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
        <td class="content"> 
         <div class="title">
           Message length depends on encoding 
         </div> 
         <div class="paragraph"> 
          <p>Larger content (concatenated SMS, multipart or segmented SMS, or "long SMS") can be sent using multiple messages, in which case each message will start with a User Data Header (UDH) containing segmentation information. Since UDH is part of the payload, the number of available characters per segment is lower: 153 for 7-bit encoding, 134 for 8-bit encoding and 67 for 16-bit encoding. The receiving handset is then responsible for reassembling the message and presenting it to the user as one long message. While the standard theoretically permits up to 255 segments, 6 to 8 segment messages are the practical maximum.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock note"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
        <td class="content"> 
         <div class="title">
           Default encoding 
         </div> 
         <div class="paragraph"> 
          <p>By default, Ogham sends the SMS using 8-bit encoding.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>explain how to use different encoding</p> </li> 
        <li> <p>link to advanced configuration section</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="sending_sms_through_smsglobal"><a class="anchor" href="#sending_sms_through_smsglobal"></a>3.2.4. Sending SMS through SmsGlobal</h4> 
    <div class="paragraph"> 
     <p>You can send SMS using <a href="https://www.smsglobal.com/">SmsGlobal</a> SMPP server:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 highlight-lines:15-18"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms.smsglobal</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSmsglobalSmppSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">smpp.smsglobal.com</span><span class="delimiter">"</span></span>);                                    <i class="conum" data-value="1"></i><b>(1)</b>
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.system-id</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your smsglobal username available in API keys&gt;</span><span class="delimiter">"</span></span>);  <i class="conum" data-value="2"></i><b>(2)</b>
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.password</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your smsglobal password available in API keys&gt;</span><span class="delimiter">"</span></span>);   <i class="conum" data-value="3"></i><b>(3)</b>
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;phone number to display for the sender&gt;</span><span class="delimiter">"</span></span>);     <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()                                                  <i class="conum" data-value="5"></i><b>(5)</b>
        .environment()
          .properties(properties)                                                                     <i class="conum" data-value="6"></i><b>(6)</b>
          .and()
        .build();                                                                                       <i class="conum" data-value="7"></i><b>(7)</b>
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()                                                                                  <i class="conum" data-value="8"></i><b>(8)</b>
        .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
        .to(<span class="string"><span class="delimiter">"</span><span class="content">+262693493696</span><span class="delimiter">"</span></span>));
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The SmsGlobal server host</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Your SmsGlobal username</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Your SmsGlobal password</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>The sender phone number</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Use the standard builder to configure and instantiate the MessagingService as usual</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Provide configuration properties to Ogham as usual</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>Instantiate the service as usual</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="8"></i><b>8</b></td> 
            <td>Send the SMS as usual</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/smsglobal/BasicSmsglobalSmppSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> 
         <div class="paragraph"> 
          <p>You can notice that SMPP server port is not provided. This is because Ogham provides <a href="./user-manual.html#service-providers">predefined configuration for well-known service providers</a> like <a href="https://www.smsglobal.com/">SmsGlobal</a>.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="sending_sms_through_ovh"><a class="anchor" href="#sending_sms_through_ovh"></a>3.2.5. Sending SMS through OVH</h4> 
    <div class="paragraph"> 
     <p>You can send SMS using <a href="http://guides.ovh.com/Http2Sms">OVH</a> HTTP API:</p> 
    </div> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Add a sample</p> </li> 
        <li> <p>Split of long messages</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="globally_configure_default_sender_phone_number"><a class="anchor" href="#globally_configure_default_sender_phone_number"></a>3.2.6. Globally configure default sender phone number</h4> 
    <div class="paragraph"> 
     <p>Ogham lets you set the sender phone number directly into properties. This phone number is automatically used for all sent SMS.</p> 
    </div> 
    <div class="paragraph"> 
     <p>If you explicitly specify the sender phone number, this value is used instead of the global one:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9 highlight-lines:19,35"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">OverrideDefaultSenderSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// configure properties (could be stored in a properties file or defined</span>
    <span class="comment">// in System properties)</span>
    <span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server host&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server port&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.system-id</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server system ID&gt;</span><span class="delimiter">"</span></span>);
    properties.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.password</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">&lt;your server password&gt;</span><span class="delimiter">"</span></span>);
    properties.put(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">+33699999999</span><span class="delimiter">"</span></span>);     <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()                                              <i class="conum" data-value="2"></i><b>(2)</b>
        .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
        .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
    <span class="comment">// =&gt; the sender phone number is +33699999999</span>

    service.send(<span class="keyword">new</span> Sms()
        .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
        .from(<span class="string"><span class="delimiter">"</span><span class="content">+33700000000</span><span class="delimiter">"</span></span>)                                       <i class="conum" data-value="3"></i><b>(3)</b>
        .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
    <span class="comment">// =&gt; the sender phone number is now +33700000000</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Set the default sender phone number globally using properties</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Do not provide <code>from</code> field so the sender phone number is <code>+33699999999</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Override the default sender phone number by providing a <code>from</code> field. The phone number is now <code>+33700000000</code></td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/OverrideDefaultSenderSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="resource-resolution"><a class="anchor" href="#resource-resolution"></a>3.3. Resource handling</h3> 
   <div class="sect3"> 
    <h4 id="resource_resolution"><a class="anchor" href="#resource_resolution"></a>3.3.1. Resource resolution</h4> 
    <div class="paragraph"> 
     <p>Resource resolution is used to locate files using a simple path. For example, the path of a file you want to use (template, image, CSS, attachment…​) could be <code>foo/bar/aaa.b</code>. But the file could be located:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>either in the classpath</p> </li> 
      <li> <p>or on the file system</p> </li> 
      <li> <p>or anywhere else (could be in a database, on a HTTP endpoint…​)</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>Ogham provides resource resolution abstraction. Any path can contain an information used to indicate which resolver to use to find and read the file content. For example, if the previous path stands for a file that is in the classpath, the Ogham path is <code>classpath:foo/bar/aaa.b</code>. On the contrary, if the path represents a file that is on file system, the Ogham path is <code>file:foo/bar/aaa.b</code>. In both cases, the path is prefixed by a string named lookup prefix (respectively <code>classpath:</code> and <code>file:</code>).</p> 
    </div> 
    <div class="paragraph"> 
     <p>Ogham configures by default (through <code>MessagingBuilder.standard()</code> or <code>MessagingBuilder.minimal()</code>) several resource resolvers:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>A resolver that is able to locate and read files from the file system with lookup prefix <code>file:</code>.</p> </li> 
      <li> <p>A resolver that is able to locate and read files from the classpath with lookup prefix <code>classpath:</code>.</p> </li> 
      <li> <p>A resolver that doesn’t load file from path but directly uses the string as content with lookups <code>string:</code> or <code>s:</code>.</p> </li> 
      <li> <p>A default resolver with no lookup that is able to locate and read files from the classpath.</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>Each resolver that is able to handle a path may also handle a path prefix and a path suffix. This is useful in order to provide only a subset of the path (only the file name for example) to Ogham and let Ogham find the real path of the file. For example if you configure Ogham with the prefix <code>foo/bar</code> and <code>.b</code> suffix for both classpath and file resolvers, you can ask Ogham to find the file <code>foo/bar/aaa.b</code> using the path <code>classpath:aaa</code> or <code>file:aaa</code>. Prefix and suffix can be changed using configuration properties (when using <code>MessagingBuilder.standard()</code> or <code>MessagingBuilder.minimal()</code>). There exists one property by message type (email or SMS), by resolver type (classpath or file), by template engine (ThymeLeaf or FreeMarker). Ogham also provides shared configuration properties (configure once for all):</p> 
    </div> 
    <div class="exampleblock prevent-overflow"> 
     <div class="content"> 
      <table class="tableblock frame-all grid-all stretch resource-resolution-properties"> 
       <colgroup> 
        <col style="width: 14.2857%;"> 
        <col style="width: 14.2857%;"> 
        <col style="width: 14.2857%;"> 
        <col style="width: 57.1429%;"> 
       </colgroup> 
       <thead> 
        <tr> 
         <th class="tableblock halign-left valign-top">Template engine</th> 
         <th class="tableblock halign-left valign-top">Message type</th> 
         <th class="tableblock halign-left valign-top">Resolver type</th> 
         <th class="tableblock halign-left valign-top">Properties (ordered by higher priority)</th> 
        </tr> 
       </thead> 
       <tbody> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">ThymeLeaf</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Email</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Classpath</p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="ulist"> 
            <ul> 
             <li> <p><code>ogham.email.thymeleaf.classpath.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.template.classpath.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.thymeleaf.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.template.path-prefix</code></p> </li> 
             <li> <p><code>ogham.template.path-prefix</code></p> </li> 
            </ul> 
           </div> 
          </div></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">ThymeLeaf</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Email</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">File</p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="ulist"> 
            <ul> 
             <li> <p><code>ogham.email.thymeleaf.file.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.template.file.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.thymeleaf.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.template.path-prefix</code></p> </li> 
             <li> <p><code>ogham.template.path-prefix</code></p> </li> 
            </ul> 
           </div> 
          </div></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">ThymeLeaf</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">SMS</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Classpath</p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="ulist"> 
            <ul> 
             <li> <p><code>ogham.sms.thymeleaf.classpath.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.template.classpath.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.thymeleaf.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.template.path-prefix</code></p> </li> 
             <li> <p><code>ogham.template.path-prefix</code></p> </li> 
            </ul> 
           </div> 
          </div></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">ThymeLeaf</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">SMS</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">File</p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="ulist"> 
            <ul> 
             <li> <p><code>ogham.sms.thymeleaf.file.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.template.file.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.thymeleaf.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.template.path-prefix</code></p> </li> 
             <li> <p><code>ogham.template.path-prefix</code></p> </li> 
            </ul> 
           </div> 
          </div></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">FreeMarker</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Email</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Classpath</p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="ulist"> 
            <ul> 
             <li> <p><code>ogham.email.freemarker.classpath.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.template.classpath.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.freemarker.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.template.path-prefix</code></p> </li> 
             <li> <p><code>ogham.template.path-prefix</code></p> </li> 
            </ul> 
           </div> 
          </div></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">FreeMarker</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Email</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">File</p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="ulist"> 
            <ul> 
             <li> <p><code>ogham.email.freemarker.file.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.template.file.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.freemarker.path-prefix</code></p> </li> 
             <li> <p><code>ogham.email.template.path-prefix</code></p> </li> 
             <li> <p><code>ogham.template.path-prefix</code></p> </li> 
            </ul> 
           </div> 
          </div></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">FreeMarker</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">SMS</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Classpath</p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="ulist"> 
            <ul> 
             <li> <p><code>ogham.sms.freemarker.classpath.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.template.classpath.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.freemarker.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.template.path-prefix</code></p> </li> 
             <li> <p><code>ogham.template.path-prefix</code></p> </li> 
            </ul> 
           </div> 
          </div></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">FreeMarker</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">SMS</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">File</p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="ulist"> 
            <ul> 
             <li> <p><code>ogham.sms.freemarker.file.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.template.file.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.freemarker.path-prefix</code></p> </li> 
             <li> <p><code>ogham.sms.template.path-prefix</code></p> </li> 
             <li> <p><code>ogham.template.path-prefix</code></p> </li> 
            </ul> 
           </div> 
          </div></td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>You can also <a href="./user-manual.html#custom-resource-resolver">define your own resource resolver</a>.</p> 
    </div> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain that path prefix/suffix can be useful to do something like aliases</p> </li> 
        <li> <p>Explain that only configuration (not code) need to be updated</p> </li> 
        <li> <p>Add code samples to show how to switch from classpath in tests to files in production</p> </li> 
        <li> <p>Add dedicated section ?</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="resources_referenced_in_templates"><a class="anchor" href="#resources_referenced_in_templates"></a>3.3.2. Resources referenced in templates</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain that Ogham supports relative resources</p> </li> 
        <li> <p>Explain that relative resources are relative to the lookup mode (file:, classpath:, …​)</p> </li> 
        <li> <p>Add note for Thymeleaf fragments (extension needed for now)</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="properties-handling"><a class="anchor" href="#properties-handling"></a>3.4. Properties handling</h3> 
   <div class="paragraph"> 
    <p>Property configuration is a good way to separate code from configuration. Ogham allows you to configure values using builders. For example, you can configure the SMTP host and port like this:</p> 
   </div> 
   <div class="exampleblock tab-container no-max-height"> 
    <div class="content"> 
     <div class="openblock tab"> 
      <div class="title"> 
       <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
      </div> 
      <div class="content"> 
       <div class="listingblock"> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="java">MessagingBuilder.standard()
  .email()
    .sender(JavaMailBuilder.class)
      .host(<span class="string"><span class="delimiter">"</span><span class="content">localhost</span><span class="delimiter">"</span></span>)
      .port(<span class="integer">25</span>);</code></pre> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>However, when using a library, it is simpler that this library provides a way to configure some values without the need of writing code to configure it. The integration is easier. The configuration should also be done in several ways to let the developer choose what fits his needs.</p> 
   </div> 
   <div class="paragraph"> 
    <p>You can use configuration properties that are defined several ways:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>in a properties file that is present in the classpath (inside the application)</p> </li> 
     <li> <p>in a properties file that is present on the file system (outside the application)</p> </li> 
     <li> <p>using standard <code>java.util.Properties</code></p> </li> 
     <li> <p>using standard <code>System.getProperties()</code></p> </li> 
     <li> <p>define properties directly in code in a fluent way</p> </li> 
    </ul> 
   </div> 
   <div class="exampleblock tab-container no-max-height"> 
    <div class="content"> 
     <div class="openblock tab"> 
      <div class="title"> 
       <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
      </div> 
      <div class="content"> 
       <div class="listingblock collapse-lines:1-9,25 irrelevant-lines:1-9,25"> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">PropertiesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="predefined-type">Properties</span> props = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    props.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">hello@world.com</span><span class="delimiter">"</span></span>);
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(props)                                   <i class="conum" data-value="1"></i><b>(1)</b>
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:email.properties</span><span class="delimiter">"</span></span>)            <i class="conum" data-value="2"></i><b>(2)</b>
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">file:/etc/app/email.properties</span><span class="delimiter">"</span></span>)        <i class="conum" data-value="3"></i><b>(3)</b>
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span>)                     <i class="conum" data-value="4"></i><b>(4)</b>
            .and()
          .systemProperties()                                  <i class="conum" data-value="5"></i><b>(5)</b>
          .and()
        .build();
    service.send(<span class="comment">/*your message here*/</span><span class="predefined-constant">null</span>);
  }
}</code></pre> 
        </div> 
       </div> 
       <div class="colist arabic"> 
        <table> 
         <tbody> 
          <tr> 
           <td><i class="conum" data-value="1"></i><b>1</b></td> 
           <td>Use standard <code>java.util.Properties</code></td> 
          </tr> 
          <tr> 
           <td><i class="conum" data-value="2"></i><b>2</b></td> 
           <td>Load the file from the classpath (relative to root of the classpath)</td> 
          </tr> 
          <tr> 
           <td><i class="conum" data-value="3"></i><b>3</b></td> 
           <td>Load the file from the file system</td> 
          </tr> 
          <tr> 
           <td><i class="conum" data-value="4"></i><b>4</b></td> 
           <td>Directly set a property with its value in a fluent way</td> 
          </tr> 
          <tr> 
           <td><i class="conum" data-value="5"></i><b>5</b></td> 
           <td>Use standard <code>System.getProperties()</code></td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
       <div class="paragraph"> 
        <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/fr/sii/ogham/sample/standard/PropertiesSample.java?ts=2">Source code of the sample</a>.</p> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>This sample shows that configuration may come from several sources (code, shared properties, file inside the application, file outside the application and from system properties).</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="properties_priority"><a class="anchor" href="#properties_priority"></a>3.4.1. Properties priority</h4> 
    <div class="paragraph"> 
     <p>If you define properties using several different ways, you may have the same key several times. In that case, which value will be used by Ogham ?</p> 
    </div> 
    <div class="paragraph"> 
     <p>By default (using <code>MessagingBuilder.standard()</code> or <code>MessagingBuilder.minimal()</code>), Ogham defines the following order (first is used if defined):</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p><code>.systemProperties()</code></p> </li> 
      <li> <p><code>.properties("file:..")</code></p> </li> 
      <li> <p><code>.properties(new Properties())</code> or <code>.properties().set(…​)</code></p> </li> 
      <li> <p><code>.properties("classpath:…​")</code></p> </li> 
     </ul> 
    </div> 
    <div class="sect4"> 
     <h5 id="why_this_order"><a class="anchor" href="#why_this_order"></a>3.4.1.1. Why this order ?</h5> 
     <div class="paragraph"> 
      <p>Configuration outside the application should override configuration that is inside the application. This is necessary if you want to be able to deploy the same application in different environments without changing code or needing to rebuild with a different profile.</p> 
     </div> 
     <div class="paragraph"> 
      <p>For configuration outside the application, system properties (defined either in system environment or using java command line arguments) has higher priority than a configuration file outside the application. This is useful to have a configuration file that is shared between several applications or instances and override only some values explicitly.</p> 
     </div> 
     <div class="paragraph"> 
      <p>For configuration inside the application, code has higher priority than configuration defined in a classpath file. This is useful to define global configuration for the application using a configuration file and let the possibility to override explicitly some values in code. This is useful in tests for example.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9,25 irrelevant-lines:1-9,25"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">PropertiesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="predefined-type">Properties</span> props = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
    props.setProperty(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">hello@world.com</span><span class="delimiter">"</span></span>);
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(props)                                   <i class="conum" data-value="1"></i><b>(1)</b>
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:email.properties</span><span class="delimiter">"</span></span>)            <i class="conum" data-value="2"></i><b>(2)</b>
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">file:/etc/app/email.properties</span><span class="delimiter">"</span></span>)        <i class="conum" data-value="3"></i><b>(3)</b>
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span>)                     <i class="conum" data-value="4"></i><b>(4)</b>
            .and()
          .systemProperties()                                  <i class="conum" data-value="5"></i><b>(5)</b>
          .and()
        .build();
    service.send(<span class="comment">/*your message here*/</span><span class="predefined-constant">null</span>);
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Use standard <code>java.util.Properties</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Load the file from the classpath (relative to root of the classpath)</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Load the file from the file system</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Directly set a property with its value in a fluent way</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>Use standard <code>System.getProperties()</code></td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/fr/sii/ogham/sample/standard/PropertiesSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> classpath:email.properties 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=localhost
mail.smtp.port=<span class="integer">25</span>
ogham.email.from.default-value=foo<span class="decorator">@test.com</span></code></pre> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> file:/etc/app/email.properties 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=smtp.domain.com</code></pre> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title">
          Result 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>Running this sample with the following command line:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code>$ java -Dogham.email.from.default-value="bar@domain.com" fr.sii.ogham.sample.standard.PropertiesSample</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Gives the following property values:</p> 
         </div> 
         <table class="tableblock frame-all grid-all stretch"> 
          <colgroup> 
           <col style="width: 50%;"> 
           <col style="width: 50%;"> 
          </colgroup> 
          <thead> 
           <tr> 
            <th class="tableblock halign-left valign-top">Property</th> 
            <th class="tableblock halign-left valign-top">Result value</th> 
           </tr> 
          </thead> 
          <tbody> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.host</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>smtp.domain.com</strong></p></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.port</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>10</strong></p></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">ogham.email.from.default-value</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bar@domain.com</strong></p></td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="admonitionblock note"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
         <td class="content"> See the <a href="https://github.com/groupe-sii/ogham/blob/master/ogham-all/src/test/java/fr/sii/ogham/it/env/PropertyOverrideTest.java?ts=2">test that ensures this order</a>. </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="what_happens_if_there_are_several_values_for_the_same_property_and_for_the_same_source"><a class="anchor" href="#what_happens_if_there_are_several_values_for_the_same_property_and_for_the_same_source"></a>3.4.1.2. What happens if there are several values for the same property and for the same source ?</h5> 
     <div class="paragraph"> 
      <p>For example, if you use two configuration files defined in the classpath:</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">  MessagingService service = MessagingBuilder.standard()
      .environment()
        .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:common.properties</span><span class="delimiter">"</span></span>)
        .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:email.properties</span><span class="delimiter">"</span></span>)
        .and()
      .build();</code></pre> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> common.properties 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=localhost
mail.smtp.port=<span class="integer">25</span></code></pre> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> email.properties 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=smtp.domain.com</code></pre> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title">
          Result 
        </div> 
        <div class="content"> 
         <table class="tableblock frame-all grid-all stretch"> 
          <colgroup> 
           <col style="width: 50%;"> 
           <col style="width: 50%;"> 
          </colgroup> 
          <thead> 
           <tr> 
            <th class="tableblock halign-left valign-top">Property</th> 
            <th class="tableblock halign-left valign-top">Result value</th> 
           </tr> 
          </thead> 
          <tbody> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.host</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>smtp.domain.com</strong></p></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.port</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>For the same level of priority, this is the declaration order that prevails.</p> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="how_to_use_custom_priorities"><a class="anchor" href="#how_to_use_custom_priorities"></a>3.4.1.3. How to use custom priorities ?</h5> 
     <div class="paragraph"> 
      <p>If you want to use a different priority order, you can explicitly register properties with a custom priority:</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java">  MessagingService service = MessagingBuilder.standard()
      .environment()
        .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:common.properties</span><span class="delimiter">"</span></span>, <span class="integer">2</span>)
        .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:email.properties</span><span class="delimiter">"</span></span>, <span class="integer">1</span>)
        .and()
      .build();</code></pre> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> common.properties 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=localhost
mail.smtp.port=<span class="integer">25</span></code></pre> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> email.properties 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=smtp.domain.com</code></pre> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title">
          Result 
        </div> 
        <div class="content"> 
         <table class="tableblock frame-all grid-all stretch"> 
          <colgroup> 
           <col style="width: 50%;"> 
           <col style="width: 50%;"> 
          </colgroup> 
          <thead> 
           <tr> 
            <th class="tableblock halign-left valign-top">Property</th> 
            <th class="tableblock halign-left valign-top">Result value</th> 
           </tr> 
          </thead> 
          <tbody> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.host</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>localhost</strong></p></td> 
           </tr> 
           <tr> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.port</p></td> 
            <td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>You can notice that the result is now different than using default priorities.</p> 
     </div> 
     <div class="admonitionblock note"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
         <td class="content"> 
          <div class="paragraph"> 
           <p>Default priority values are:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>Using <code>.systemProperties()</code>: 100000</p> </li> 
            <li> <p>Load property file from the filesystem (<code>properties("file:…​")</code>: 90000</p> </li> 
            <li> <p>Using custom <code>java.util.Properties</code> object (<code>properties(new Properties())</code>): 80000</p> </li> 
            <li> <p>Using custom properties through <code>.properties()</code> fluent API: 80000</p> </li> 
            <li> <p>Load property file from the classpath (<code>properties("classpath:…​")</code>): 70000</p> </li> 
           </ul> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="files_location"><a class="anchor" href="#files_location"></a>3.4.2. Files location</h4> 
    <div class="paragraph"> 
     <p>By default, Ogham automatically loads configuration files placed in:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p><code>config/ogham.properties</code> relative to current directory</p> </li> 
      <li> <p><code>config/application.properties</code> relative to current directory</p> </li> 
      <li> <p><code>config/ogham.properties</code> in the classpath</p> </li> 
      <li> <p><code>config/application.properties</code> in the classpath</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>This way, developer don’t need to add code to explicitly load some configuration files:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Use default files 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-6 irrelevant-lines:1-6"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">DefaultPropertiesLocationSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">/**
     * By default, Ogham loads files from:
     * - config/ogham.properties and config/application.properties
     *   from classpath if exists
     * - config/ogham.properties and config/application.properties
     *   external files from current directory if exists
     */</span>
    MessagingService service = MessagingBuilder.standard()
        .build();
    service.send(<span class="comment">/*your message here*/</span><span class="predefined-constant">null</span>);
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/fr/sii/ogham/sample/standard/DefaultPropertiesLocationSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Manual equivalence 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9 diff-remove-lines:13-18"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">PropertiesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">?file:config/ogham.properties</span><span class="delimiter">"</span></span>)
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">?file:config/application.properties</span><span class="delimiter">"</span></span>)
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">?classpath:config/ogham.properties</span><span class="delimiter">"</span></span>)
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">?classpath:config/application.properties</span><span class="delimiter">"</span></span>)
          .and()
        .build();
    service.send(<span class="comment">/*your message here*/</span><span class="predefined-constant">null</span>);
  }
}</code></pre> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> 
         <div class="title">
           Optional location 
         </div> 
         <div class="paragraph"> 
          <p>Using <code>?</code> character in the path means that the configuration file is optional. It will not fail if the file doesn’t exist.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Without <code>?</code>, if the file is missing, Ogham will fail at startup to indicate that some configuration is missing.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="paragraph"> 
     <p>In addition to default locations, you can specify a different location using <code>ogham.config.location</code> property:</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Custom location 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-6 irrelevant-lines:1-6"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">DefaultPropertiesLocationSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">/**
     * By default, Ogham loads files from:
     * - config/ogham.properties and config/application.properties
     *   from classpath if exists
     * - config/ogham.properties and config/application.properties
     *   external files from current directory if exists
     */</span>
    MessagingService service = MessagingBuilder.standard()
        .build();
    service.send(<span class="comment">/*your message here*/</span><span class="predefined-constant">null</span>);
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Running the sample from command line:</p> 
        </div> 
        <div class="listingblock highlight-lines:3"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="shell">cd /var/run
java \
  -Dogham.config.location=file:/etc/your-app \
  ... \
  -jar ...</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Will load files from:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p><code>/etc/your-app/config/ogham.properties</code> (explicit location)</p> </li> 
          <li> <p><code>/etc/your-app/config/application.properties</code> (explicit location)</p> </li> 
          <li> <p><code>/var/run/config/ogham.properties</code> (default location relative to current directory)</p> </li> 
          <li> <p><code>/var/run/config/application.properties</code> (default location relative to current directory)</p> </li> 
          <li> <p><code>config/ogham.properties</code> in the classpath</p> </li> 
          <li> <p><code>config/application.properties</code> in the classpath</p> </li> 
         </ul> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> 
         <div class="title">
           Several locations 
         </div> 
         <div class="paragraph"> 
          <p>You can set several locations at once by separating each path with a comma (<code>,</code>).</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="configuration_profiles"><a class="anchor" href="#configuration_profiles"></a>3.4.3. Configuration profiles</h4> 
    <div class="paragraph"> 
     <p>In order to have the exact same code but different configurations for different execution environments, Ogham also supports profiles for configuration files.</p> 
    </div> 
    <div class="paragraph"> 
     <p>The aim is to have for example:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>one configuration file for development (that configures Ogham to send emails using external SMTP server)</p> </li> 
      <li> <p>one configuration file for tests (that configures Ogham to send emails using embedded SMTP server)</p> </li> 
      <li> <p>one configuration file for production (that configures Ogham to send emails through SendGrid)</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>This can be done by simply appending a suffix to the configuration file name of your choice. For instance, you want three profiles named <code>dev</code>, <code>tests</code>, <code>prod</code>, then you can create the following files:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p><code>config/ogham-dev.properties</code> and/or <code>config/application-dev.properties</code></p> </li> 
      <li> <p><code>config/ogham-tests.properties</code> and/or <code>config/application-tests.properties</code></p> </li> 
      <li> <p><code>config/ogham-prod.properties</code> and/or <code>config/application-prod.properties</code></p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>Each file can have its own configuration.</p> 
    </div> 
    <div class="paragraph"> 
     <p>The next step is to enable a profile. This can be done by setting <code>ogham.profiles.active</code> system property:</p> 
    </div> 
    <div class="listingblock highlight-lines:2"> 
     <div class="content"> 
      <pre class="CodeRay highlight"><code data-lang="shell">java \
  -Dogham.profiles.active=prod \
  ... \
  -jar ...</code></pre> 
     </div> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> 
         <div class="title">
           Enable several profiles 
         </div> 
         <div class="paragraph"> 
          <p>You can enable several profiles at once by separating each profile name with a comma (<code>,</code>).</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock note"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
        <td class="content"> 
         <div class="title">
           Default configuration 
         </div> 
         <div class="paragraph"> 
          <p>The default configuration files are still loaded but with lower priority.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For instance if:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>a property <code>foo</code> with a value <code>bar</code> is defined in default location (<code>config/ogham.properties</code> or <code>config/application.properties</code>)</p> </li> 
           <li> <p>and the same property <code>foo</code> with the value <code>foobar</code> is defined in <code>dev</code> profile (<code>config/ogham-dev.properties</code> or <code>config/application-dev.properties</code>),</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>the value <code>foobar</code> will be used if <code>dev</code> profile is enabled.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain conversions from String to target type</p> </li> 
        <li> <p>List already existing conversions</p> </li> 
        <li> <p>Explain how to register custom converter → link to extend.adoc</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="templating"><a class="anchor" href="#templating"></a>3.5. Templating</h3> 
   <div class="sect3"> 
    <h4 id="freemarker"><a class="anchor" href="#freemarker"></a>3.5.1. FreeMarker</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain specific features supported by FreeMarker</p> </li> 
        <li> <p>Show samples with static method calls</p> </li> 
        <li> <p>Link to advanced configuration to custom FreeMarker configuration</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="thymeleaf"><a class="anchor" href="#thymeleaf"></a>3.5.2. ThymeLeaf</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain specific features supported by Thymeleaf</p> </li> 
        <li> <p>Show samples with static method calls</p> </li> 
        <li> <p>Link to advanced configuration to custom Thymeleaf configuration</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="mixed"><a class="anchor" href="#mixed"></a>3.5.3. Mixed</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain variants</p> </li> 
        <li> <p>Explain how to register custom variants (advanced configuration ?)</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="spring-boot-usage"><a class="anchor" href="#spring-boot-usage"></a>3.6. Using Ogham in a Spring Boot application</h3> 
   <div class="paragraph"> 
    <p>Ogham provides auto-configuration modules for Spring Boot (<a href="./user-manual.html#install-spring-boot">see how to include auto-configuration modules</a>). To use Ogham in Spring, you can directly inject (autowire) <code>MessagingService</code> bean.</p> 
   </div> 
   <div class="paragraph"> 
    <p>In addition to standalone behaviors, Ogham also supports Spring Boot modules and auto-configuration:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>If <code>spring-boot-starter-thymeleaf</code> is included, Ogham uses Spring ThymeLeaf template engine (using <code>SpringTemplateEngine</code> bean), configuration and properties (<code>spring.thymeleaf</code> properties)</p> </li> 
     <li> <p>If <code>spring-boot-starter-freemarker</code> is included, Ogham uses Spring FreeMarker properties (<code>spring.freemarker</code> properties)</p> </li> 
     <li> <p>If <code>spring-boot-starter-mail</code> is included, Ogham uses Spring mail properties (<code>spring.mail</code> properties)</p> </li> 
     <li> <p>If <code>sendgrid-java</code> is included, Ogham uses Spring SendGrid bean and properties (<code>spring.sendgrid</code> properties)</p> </li> 
     <li> <p>Provide properties metadata for auto-completion</p> </li> 
    </ul> 
   </div> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
       <td class="content"> 
        <div class="title">
          Java Mail auto-configuration 
        </div> 
        <div class="paragraph"> 
         <p>The property <code>ogham.email.javamail.host</code> takes precedence over <code>spring.mail.host</code> property. The property <code>ogham.email.javamail.port</code> takes precedence over <code>spring.mail.port</code> property.</p> 
        </div> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
       <td class="content"> 
        <div class="title">
          Thymeleaf auto-configuration 
        </div> 
        <div class="paragraph"> 
         <p>If you provide any of:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p><code>ogham.email.template.path-prefix</code></p> </li> 
          <li> <p><code>ogham.email.thymeleaf.classpath.path-prefix</code></p> </li> 
          <li> <p><code>ogham.email.template.classpath.path-prefix</code></p> </li> 
          <li> <p><code>ogham.email.thymeleaf.path-prefix</code></p> </li> 
          <li> <p><code>ogham.email.template.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.template.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.thymeleaf.classpath.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.template.classpath.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.thymeleaf.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.template.path-prefix</code></p> </li> 
          <li> <p><code>ogham.template.path-prefix</code></p> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>Then <code>spring.thymeleaf.prefix</code> is not used in order to keep coherence between Spring application and non-Spring application. Moreover, this lets you the opportunity to use a prefix for Spring web views and a different prefix for email and/or SMS. The last reason is that Ogham properties are more specific:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p>you can target the message type: use different prefixes for email and SMS</p> </li> 
          <li> <p>you can target the resource resolution: use different prefixes for classpath and file system for example</p> </li> 
         </ul> 
        </div> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
       <td class="content"> 
        <div class="title">
          FreeMarker auto-configuration 
        </div> 
        <div class="paragraph"> 
         <p>If you provide any of:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p><code>ogham.email.template.path-prefix</code></p> </li> 
          <li> <p><code>ogham.email.freemarker.classpath.path-prefix</code></p> </li> 
          <li> <p><code>ogham.email.template.classpath.path-prefix</code></p> </li> 
          <li> <p><code>ogham.email.freemarker.path-prefix</code></p> </li> 
          <li> <p><code>ogham.email.template.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.template.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.freemarker.classpath.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.template.classpath.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.freemarker.path-prefix</code></p> </li> 
          <li> <p><code>ogham.sms.template.path-prefix</code></p> </li> 
          <li> <p><code>ogham.template.path-prefix</code></p> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>Then <code>spring.freemarker.prefix</code> is not used in order to keep coherence between Spring application and non-Spring application. Moreover, this lets you the opportunity to use a prefix for Spring web views and a different prefix for email and/or SMS. The other reason is that Ogham properties are more specific:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p>you can target the message type: use different prefixes for email and SMS</p> </li> 
          <li> <p>you can target the resource resolution: use different prefixes for classpath and file system for example</p> </li> 
         </ul> 
        </div> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
       <td class="content"> 
        <div class="title">
          SendGrid auto-configuration 
        </div> 
        <div class="paragraph"> 
         <p>Including all Ogham features adds <code>sendgrid-java</code> dependency. This means that Spring Boot auto-configuration for SendGrid automatically defines the <code>sendGrid</code> bean instance if <code>spring.sendgrid.api-key</code> property is defined. In this case, the <code>sendGrid</code> bean is always used by Ogham. This means that if you provide <code>spring.sendgrid.api-key</code>, the properties <code>ogham.email.sendgrid.api-key</code> and <code>ogham.email.sendgrid.unit-testing</code> won’t be used. Before Spring Boot 2.0.0, <code>spring.sendgrid.username</code> and <code>spring.sendgrid.password</code> can be provided instead of <code>spring.sendgrid.api-key</code>.</p> 
        </div> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="sect3"> 
    <h4 id="send_email"><a class="anchor" href="#send_email"></a>3.6.1. Send email</h4> 
    <div class="paragraph"> 
     <p>Usage of <code>MessagingService</code> is exactly the same as standalone usage. The only difference is that <code>MessagingService</code> is automatically created and injectable. The following sample shows a Spring Web that exposes one simple endpoint for sending email using Ogham. The sample shows several Ogham features at once:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>Using both HTML (using ThymeLeaf) and text templates (using FreeMarker)</p> </li> 
      <li> <p>Templates are located in a sub-folder and prefixes for templates are configured using Spring standard properties</p> </li> 
      <li> <p>Using a configuration property to define the sender address</p> </li> 
      <li> <p>The SMTP server host and port are defined using Spring standard properties</p> </li> 
      <li> <p>The email subject is provided by the <code>title</code> tag of the HTML template</p> </li> 
     </ul> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-16,46-58 irrelevant-lines:1-16 highlight-lines:31,32,38-41"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.springboot.email</span>;

<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.context.annotation.PropertySource</span>;
<span class="keyword">import</span> <span class="include">org.springframework.http.HttpStatus</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestParam</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.ResponseStatus</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RestController</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="annotation">@PropertySource</span>(<span class="string"><span class="delimiter">"</span><span class="content">application-email-template.properties</span><span class="delimiter">"</span></span>)  <span class="comment">// just needed to be able to run the sample</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ThymeleafHtmlAndFreemarkerTextSample</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    SpringApplication.run(ThymeleafHtmlAndFreemarkerTextSample.class, args);
  }

  <span class="annotation">@RestController</span>
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">EmailController</span> {
    <span class="comment">// Messaging service is automatically created using Spring Boot features</span>
    <span class="comment">// The configuration can be set into application-email-template.properties</span>
    <span class="comment">// The configuration files are stored into src/main/resources</span>
    <span class="comment">// The configuration file set the prefix for templates into email folder available in src/main/resources</span>
    <span class="annotation">@Autowired</span>
    MessagingService messagingService;                                              <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@PostMapping</span>(value=<span class="string"><span class="delimiter">"</span><span class="content">api/email/multitemplate/mixed</span><span class="delimiter">"</span></span>)
    <span class="annotation">@ResponseStatus</span>(HttpStatus.CREATED)
    <span class="directive">public</span> <span class="type">void</span> sendEmail(<span class="annotation">@RequestParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">to</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> to, <span class="annotation">@RequestParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> name, <span class="annotation">@RequestParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">value</span><span class="delimiter">"</span></span>) <span class="type">int</span> value) <span class="directive">throws</span> MessagingException {
      <span class="comment">// using fluent API</span>
      messagingService.send(<span class="keyword">new</span> Email()                                           <i class="conum" data-value="2"></i><b>(2)</b>
                  .body().template(<span class="string"><span class="delimiter">"</span><span class="content">mixed</span><span class="delimiter">"</span></span>,                           <i class="conum" data-value="3"></i><b>(3)</b>
                            <span class="keyword">new</span> SimpleBean(name, value))    <i class="conum" data-value="4"></i><b>(4)</b>
                  .to(to));                                           <i class="conum" data-value="5"></i><b>(5)</b>
    }
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Inject Ogham service</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Use the Ogham service to send an email</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Use HTML and text templates that are available in classpath. Spring is configured to use a path prefix for both ThymeLeaf and FreeMarker (see properties configuration tab). Both HTML and text templates are then located respectively at <code>src/main/resources/email/mixed.html</code> and <code>src/main/resources/email/mixed.txt/ftl</code>.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Use any Java object for evaluating template variables</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>The sender email address that comes from request parameter</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/java/fr/sii/ogham/sample/springboot/email/ThymeleafHtmlAndFreemarkerTextSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> HTML template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>        <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>Subject of the mail<span class="tag">&lt;/title&gt;</span>        <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>   <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>     <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Include the ThymeLeaf namespace</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Use the <code>title</code> tag to define the subject of the email</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Evaluate the <code>name</code> attribute value of <code>SimpleBean</code> in the template</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Evaluate the <code>value</code> attribute value of <code>SimpleBean</code> in the template</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/resources/email/mixed.html?ts=2">Source code of the HTML template</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/freemarker-logo.png" alt="freemarker logo" width="60" height="24" class="img-fluid"></span> Text template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="txt">${name} ${value}</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/resources/email/mixed.txt.ftlh?ts=2">Source code of the text template</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Spring properties 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="python"><span class="comment"># configuration for email</span>
spring.mail.host=&lt;your server host&gt;                   <i class="conum" data-value="1"></i><b>(1)</b>
spring.mail.port=&lt;your server port&gt;                   <i class="conum" data-value="2"></i><b>(2)</b>
ogham.email.from.default-value=&lt;your gmail address&gt;   <i class="conum" data-value="3"></i><b>(3)</b>
<span class="comment"># configuration for template engines</span>
spring.thymeleaf.prefix=/email/                       <i class="conum" data-value="4"></i><b>(4)</b>
spring.freemarker.prefix=/email/                      <i class="conum" data-value="5"></i><b>(5)</b></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The SMTP host using Spring property</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>The SMTP port using Spring property</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>The sender address that is declared globally</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>The path prefix for ThymeLeaf templates</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>The path prefix for FreeMarker templates</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/resources/application-email-template.properties?ts=2">Source code of the properties</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="send_sms"><a class="anchor" href="#send_sms"></a>3.6.2. Send SMS</h4> 
    <div class="paragraph"> 
     <p>Usage of <code>MessagingService</code> is exactly the same as standalone usage. The only difference is that <code>MessagingService</code> is automatically created and injectable. The following sample shows a Spring Web that exposes one simple endpoint for sending SMS using Ogham. The sample shows several Ogham features at once:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>Using text template (using FreeMarker)</p> </li> 
      <li> <p>Templates are located in a sub-folder and prefix for SMS templates is configured through Ogham property</p> </li> 
      <li> <p>SMS template extension is configured globally in order to avoid extension in Java code</p> </li> 
      <li> <p>Using a configuration property to define the sender phone number</p> </li> 
      <li> <p>The SMPP server host, port and authentication are defined using properties</p> </li> 
     </ul> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-16,45-57 irrelevant-lines:1-16 highlight-lines:30,31,37-40"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.springboot.sms</span>;

<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.context.annotation.PropertySource</span>;
<span class="keyword">import</span> <span class="include">org.springframework.http.HttpStatus</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestParam</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.ResponseStatus</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RestController</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="annotation">@PropertySource</span>(<span class="string"><span class="delimiter">"</span><span class="content">application-sms-template.properties</span><span class="delimiter">"</span></span>)  <span class="comment">// just needed to be able to run the sample</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">TemplateSample</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    SpringApplication.run(TemplateSample.class, args);
  }

  <span class="annotation">@RestController</span>
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SmsController</span> {
    <span class="comment">// Messaging service is automatically created using Spring Boot features</span>
    <span class="comment">// The configuration can be set into application-sms-template.properties</span>
    <span class="comment">// The configuration files are stored into src/main/resources</span>
    <span class="annotation">@Autowired</span>
    MessagingService messagingService;                                              <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@PostMapping</span>(value=<span class="string"><span class="delimiter">"</span><span class="content">api/sms/template</span><span class="delimiter">"</span></span>)
    <span class="annotation">@ResponseStatus</span>(HttpStatus.CREATED)
    <span class="directive">public</span> <span class="type">void</span> sendSms(<span class="annotation">@RequestParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">to</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> to, <span class="annotation">@RequestParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>) <span class="predefined-type">String</span> name, <span class="annotation">@RequestParam</span>(<span class="string"><span class="delimiter">"</span><span class="content">value</span><span class="delimiter">"</span></span>) <span class="type">int</span> value) <span class="directive">throws</span> MessagingException {
      <span class="comment">// send the SMS using fluent API</span>
      messagingService.send(<span class="keyword">new</span> Sms()                                             <i class="conum" data-value="2"></i><b>(2)</b>
                  .message().template(<span class="string"><span class="delimiter">"</span><span class="content">register</span><span class="delimiter">"</span></span>,                     <i class="conum" data-value="3"></i><b>(3)</b>
                            <span class="keyword">new</span> SimpleBean(name, value))    <i class="conum" data-value="4"></i><b>(4)</b>
                  .to(to));                                           <i class="conum" data-value="5"></i><b>(5)</b>
    }
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Inject Ogham service</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Use the Ogham service to send a SMS</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Use a text template as SMS content</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Use any Java object for evaluating template variables</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>The sender phone number that comes from request parameter</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/java/fr/sii/ogham/sample/springboot/sms/TemplateSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/freemarker-logo.png" alt="freemarker logo" width="60" height="24" class="img-fluid"></span> Template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code>Hello ${name}, the confirmation code is ${value}</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/resources/sms/register.txt.ftl?ts=2">Source code of the template</a></p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Spring properties 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="python"><span class="comment"># ogham configuration for SMS</span>
ogham.sms.smpp.host=&lt;your server host&gt;                                  <i class="conum" data-value="1"></i><b>(1)</b>
ogham.sms.smpp.port=&lt;your server port&gt;                                  <i class="conum" data-value="2"></i><b>(2)</b>
ogham.sms.smpp.system-id=&lt;your server system ID&gt;                        <i class="conum" data-value="3"></i><b>(3)</b>
ogham.sms.smpp.password=&lt;your server password&gt;                          <i class="conum" data-value="4"></i><b>(4)</b>
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;   <i class="conum" data-value="5"></i><b>(5)</b>
ogham.sms.template.path-prefix=/sms/                                    <i class="conum" data-value="6"></i><b>(6)</b>
ogham.sms.template.path-suffix=.txt.ftl                                 <i class="conum" data-value="7"></i><b>(7)</b></code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The SMPP host</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>The SMPP port</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>The SMPP system ID (account)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>The SMPP password</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>The sender phone number that is declared globally</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>The path prefix for SMS templates</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>The path suffix for SMS templates (FreeMarker extension in this case)</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/resources/application-sms-template.properties?ts=2">Source code of the properties</a></p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="testing"><a class="anchor" href="#testing"></a>4. Testing</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="testing-tools"><a class="anchor" href="#testing-tools"></a>4.1. Include test utilities</h3> 
   <div class="exampleblock tab-container"> 
    <div class="content"> 
     <div class="openblock tab"> 
      <div class="title"> 
       <span class="image"><img src="./images//icons/maven-logo.png" alt="Maven" width="118" height="30" class="img-fluid"></span> 
      </div> 
      <div class="content"> 
       <div class="listingblock"> 
        <div class="title">
          Add 
         <code>ogham-test-utils</code> dependency to your pom.xml 
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>fr.sii.ogham<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>ogham-test-utils<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>3.1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
        </div> 
       </div> 
       <div class="paragraph"> 
        <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/pom.xml?ts=2">View code of an example pom.xml</a></p> 
       </div> 
      </div> 
     </div> 
     <div class="openblock tab"> 
      <div class="title"> 
       <span class="image"><img src="./images//icons/gradlephant-logo.png" alt="Gradle" width="114" height="30" class="img-fluid"></span> 
      </div> 
      <div class="content"> 
       <div class="listingblock"> 
        <div class="title">
          Add 
         <code>ogham-test-utils</code> to your build.gradle 
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
  testImplementation <span class="string"><span class="delimiter">'</span><span class="content">fr.sii.ogham:ogham-test-utils:3.1.0-SNAPSHOT</span><span class="delimiter">'</span></span>
}</code></pre> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>This will include:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p><a href="http://junit.org/junit5/">JUnit to run tests (JUnit 4 and Junit 5)</a></p> </li> 
     <li> <p><a href="http://site.mockito.org/">Mockito for mocking Java code</a></p> </li> 
     <li> <p><a href="http://hamcrest.org/JavaHamcrest/">Hamcrest for assertions</a></p> </li> 
     <li> <p><a href="http://www.icegreen.com/greenmail/">GreenMail for mocking a SMTP server</a></p> </li> 
     <li> <p><a href="https://jsmpp.org/">jSMPP for mocking a SMPP server</a></p> </li> 
     <li> <p><a href="http://wiremock.org/">WireMock for mocking HTTP server</a></p> </li> 
     <li> <p><a href="http://spockframework.org/">Spockframework for writing very very readable unit tests</a></p> </li> 
     <li> <p>and some utilities that may be useful</p> </li> 
    </ul> 
   </div> 
   <div class="sect3"> 
    <h4 id="testing-tools-eclipse-static-imports"><a class="anchor" href="#testing-tools-eclipse-static-imports"></a>4.1.1. Configure static method imports for Eclipse</h4> 
    <div class="paragraph"> 
     <p>Ogham uses Hamcrest, Mockito and also provides test utilities. Those utilities provide many static methods. Static methods are convenient for code readability. However, Eclipse needs some configuration to help you to import static methods with autocompletion.</p> 
    </div> 
    <div class="paragraph"> 
     <p>In Eclipse, select <span class="menuseq"><b class="menu">Window</b>&nbsp;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Preferences</b></span>. In the preferences window, select <span class="menuseq"><b class="menu">Java</b>&nbsp;<i class="fa fa-angle-right caret"></i> <b class="submenu">Editor</b>&nbsp;<i class="fa fa-angle-right caret"></i> <b class="submenu">Content Assist</b>&nbsp;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Favorites</b></span>.</p> 
    </div> 
    <div class="imageblock text-center"> 
     <div class="content"> 
      <img src="./images//eclipse/static-import-empty.png" alt="static import empty" class="img-fluid"> 
     </div> 
     <div class="title">
       Figure 1. Preferences window 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>To add all static methods of a class, click on <b class="button">New Type…​</b>.</p> 
    </div> 
    <div class="imageblock text-center"> 
     <div class="content"> 
      <img src="./images//eclipse/static-import-newtype.png" alt="static import newtype" class="img-fluid"> 
     </div> 
     <div class="title">
       Figure 2. Add all static methods and attributes of a class 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Type the class that contains the static methods (you can also click the browse button to search classes from classpath).</p> 
    </div> 
    <div class="imageblock text-center"> 
     <div class="content"> 
      <img src="./images//eclipse/static-import-newtype-search.png" alt="static import newtype search" class="img-fluid"> 
     </div> 
     <div class="title">
       Figure 3. Example for Ogham assertions 
     </div> 
    </div> 
    <div class="imageblock text-center"> 
     <div class="content"> 
      <img src="./images//eclipse/static-import-search.png" alt="static import search" class="img-fluid"> 
     </div> 
     <div class="title">
       Figure 4. Search for a class 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Click on <b class="button">OK</b></p> 
    </div> 
    <div class="paragraph"> 
     <p>Recommended imports to add:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p><code>fr.sii.ogham.assertion.OghamAssertions.*</code></p> </li> 
      <li> <p><code>org.hamcrest.Matchers.*</code></p> </li> 
      <li> <p><code>org.hamcrest.CoreMatchers.*</code></p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>Optional imports that may be useful:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p><code>fr.sii.ogham.assertion.OghamMatchers.*</code></p> </li> 
      <li> <p><code>fr.sii.ogham.util.ResourceUtils.*</code></p> </li> 
      <li> <p><code>org.mockito.ArgumentMatchers.*</code></p> </li> 
      <li> <p><code>org.mockito.Mockito.*</code></p> </li> 
      <li> <p><code>org.junit.*</code> (if you are using JUnit 4)</p> </li> 
      <li> <p><code>org.junit.Assert.*</code> (if you are using JUnit 4)</p> </li> 
      <li> <p><code>org.junit.matchers.JUnitMatchers.*</code> (if you are using JUnit 4)</p> </li> 
      <li> <p><code>org.junit.Assume.*</code> (if you are using JUnit 4)</p> </li> 
      <li> <p><code>org.junit.jupiter.api.Assertions.*</code> (if you are using JUnit 5)</p> </li> 
      <li> <p><code>org.junit.jupiter.api.Assumptions.*</code> (if you are using JUnit 5)</p> </li> 
      <li> <p><code>org.assertj.core.api.Assertions.*</code> (if you are using AssertJ)</p> </li> 
     </ul> 
    </div> 
    <div class="imageblock text-center"> 
     <div class="content"> 
      <img src="./images//eclipse/static-import-all.png" alt="static import all" class="img-fluid"> 
     </div> 
     <div class="title">
       Figure 5. Result with all static imports described above 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Once you have added all static imports you need, click on <b class="button">OK</b>.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Now you can use autocompletion and Eclipse will automatically add the static import.</p> 
    </div> 
    <div class="imageblock text-center"> 
     <div class="content"> 
      <img src="./images//eclipse/static-import-autocomplete.png" alt="static import autocomplete" class="img-fluid"> 
     </div> 
     <div class="title">
       Figure 6. Autocompletion now suggests static methods 
     </div> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> 
         <div class="title">
           Eclipse shortcut 
         </div> 
         <div class="paragraph"> 
          <p>Eclipse can rewrite a call to a static method prefixed by class. For example in your code you have <code>OghamAssertions.assertThat</code>, pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>M</kbd></span> shortcut (cursor must be placed in the method name), Eclipse will add the static import and the code is just <code>assertThat</code>.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="testing-email"><a class="anchor" href="#testing-email"></a>4.2. Testing emails</h3> 
   <div class="sect3"> 
    <h4 id="first_test"><a class="anchor" href="#first_test"></a>4.2.1. First test</h4> 
    <div class="paragraph"> 
     <p>To test your application emails, you can start a local SMTP server. You can then use Ogham to make assertions on your email (right recipients, right sender, right body…​). Ogham uses <a href="http://www.icegreen.com/greenmail/">GreenMail</a> as local SMTP server.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-23 irrelevant-lines:1-23"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);              <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())            <i class="conum" data-value="2"></i><b>(2)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))   <i class="conum" data-value="3"></i><b>(3)</b>
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()                                 <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>))                                                        <i class="conum" data-value="5"></i><b>(5)</b>
      .message(<span class="integer">0</span>)                                                          <i class="conum" data-value="6"></i><b>(6)</b>
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))                                           <i class="conum" data-value="7"></i><b>(7)</b>
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))                     <i class="conum" data-value="8"></i><b>(8)</b>
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()                     <i class="conum" data-value="9"></i><b>(9)</b>
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>))                       <i class="conum" data-value="10"></i><b>(10)</b>
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name</span><span class="delimiter">"</span></span>)).and()                  <i class="conum" data-value="11"></i><b>(11)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>))                          <i class="conum" data-value="12"></i><b>(12)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()                 <i class="conum" data-value="13"></i><b>(13)</b>
        .alternative(nullValue())                                        <i class="conum" data-value="14"></i><b>(14)</b>
        .attachments(emptyIterable());                                   <i class="conum" data-value="15"></i><b>(15)</b>
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Declare and initialize the GreenMail JUnit rule to start a local SMTP server</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Get the local SMTP server host address and configure Ogham to use this value</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Get the local SMTP server port and configure Ogham to use this value</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Entry point for declaring assertion on received emails using a fluent API</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Assert that one and only one email has been received</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Access the first received message for declaring assertions for that message using fluent API</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>Assert that the subject of the first message is exactly <code>Simple</code> string</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="8"></i><b>8</b></td> 
            <td>Assert that the sender email address is exactly <code>test.sender@sii.fr</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="9"></i><b>9</b></td> 
            <td>Assert that the sender name is exactly <code>Sender Name</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="10"></i><b>10</b></td> 
            <td>Assert that the recipient email address is exactly <code>recipient@sii.fr</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="11"></i><b>11</b></td> 
            <td>Assert that the recipient name is exactly <code>Recipient Name</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="12"></i><b>12</b></td> 
            <td>Assert that the body of the received email is exactly <code>string body</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="13"></i><b>13</b></td> 
            <td>Assert that the mimetype of the body of the received email starts with <code>text/plain</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="14"></i><b>14</b></td> 
            <td>Assert that received email has no alternative content</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="15"></i><b>15</b></td> 
            <td>Assert that received email has no attachment</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="testing_html_message"><a class="anchor" href="#testing_html_message"></a>4.2.2. Testing HTML message</h4> 
    <div class="paragraph"> 
     <p>Comparing two HTML documents can be tricky. Indeed, the HTML attributes can be declared in a different order, number of spaces/tabs can be different, some attributes may be declared differently but corresponding to the same behavior (for example <code>disabled</code> attribute can be declared only <code>disabled</code> with no value, <code>disabled="true"</code> or <code>disabled="disabled"</code>).</p> 
    </div> 
    <div class="paragraph"> 
     <p>Ogham provides two distinct matchers to check if:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>HTML is identical (exactly the same nodes at same position and same attributes with same values)</p> </li> 
      <li> <p>HTML is similar (nodes may be at different positions, same attributes with same values)</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>In addition to comparison helpers, Ogham provides helpers to load files from classpath in tests (<code>ResourceUtils.resource</code> and <code>ResourceUtils.resourceAsString</code>). This is useful to avoid writing expected HTML content as string in your code and also avoid writing the same utility function every time.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-26,27-44,71-83 irrelevant-lines:1-26 highlight-lines:63"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamMatchers.isIdenticalHtml</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.util.ResourceUtils.resourceAsString</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailHtmlTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> registerMessage() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .body().template(<span class="string"><span class="delimiter">"</span><span class="content">/template/register.html</span><span class="delimiter">"</span></span>,                         <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))              <i class="conum" data-value="2"></i><b>(2)</b>
                .to(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">foo - Confirm your registration</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(isIdenticalHtml(resourceAsString(<span class="string"><span class="delimiter">"</span><span class="content">/expected/register.html</span><span class="delimiter">"</span></span>)))  <i class="conum" data-value="3"></i><b>(3)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/html</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Use an HTML template</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Object used to evaluate variables in the template</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Assert that HTML is similar as an expected HTML content</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailHtmlTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> HTML template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
 <span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;title</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">|${name} - Confirm your registration|</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
 <span class="tag">&lt;/head&gt;</span>
 <span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;h1</span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">|Hello ${name}|</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>

  <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;/p&gt;</span>
 <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/register.html?ts=2">Source code of the template</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Expected HTML 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span>foo - Confirm your registration<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/meta&gt;</span>
  <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Hello foo<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>42<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/resources/expected/register.html?ts=2">Source code of the expected HTML</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="help_in_eclipse_for_failing_tests"><a class="anchor" href="#help_in_eclipse_for_failing_tests"></a>4.2.3. Help in Eclipse for failing tests</h4> 
    <div class="paragraph"> 
     <p>Comparing two HTML documents can be tricky. Indeed, the HTML attributes can be declared in a different order, number of spaces/tabs can be different, some attributes may be declared differently but corresponding to the same behavior (for example <code>disabled</code> attribute can be declared only <code>disabled</code> with no value, <code>disabled="true"</code> or <code>disabled="disabled"</code>).</p> 
    </div> 
    <div class="paragraph"> 
     <p>Ogham provides two distinct matchers to check if:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>HTML is identical (exactly the same nodes at same position and same attributes with same values)</p> </li> 
      <li> <p>HTML is similar (nodes may be at different positions, same attributes with same values)</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>In addition to comparison helpers, Ogham provides helpers to load files from classpath in tests (<code>ResourceUtils.resource</code> and <code>ResourceUtils.resourceAsString</code>). This is useful to avoid writing expected HTML content as string in your code and also avoid writing the same utility function every time.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-26,27-44,71-83 irrelevant-lines:1-26 highlight-lines:63"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamMatchers.isIdenticalHtml</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.util.ResourceUtils.resourceAsString</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailHtmlTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> registerMessage() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .body().template(<span class="string"><span class="delimiter">"</span><span class="content">/template/register.html</span><span class="delimiter">"</span></span>,                         <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))              <i class="conum" data-value="2"></i><b>(2)</b>
                .to(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">foo - Confirm your registration</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(isIdenticalHtml(resourceAsString(<span class="string"><span class="delimiter">"</span><span class="content">/expected/register.html</span><span class="delimiter">"</span></span>)))  <i class="conum" data-value="3"></i><b>(3)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/html</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Use an HTML template</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Object used to evaluate variables in the template</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Assert that HTML is similar as an expected HTML content</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailHtmlTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> HTML template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
 <span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;title</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">|${name} - Confirm your registration|</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
 <span class="tag">&lt;/head&gt;</span>
 <span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;h1</span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">|Hello ${name}|</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>

  <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;/p&gt;</span>
 <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/register.html?ts=2">Source code of the template</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Expected HTML 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span>foo - Confirm your registration<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/meta&gt;</span>
  <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Hello foo<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>42<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/resources/expected/register.html?ts=2">Source code of the expected HTML</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="help_in_eclipse_for_failing_tests_2"><a class="anchor" href="#help_in_eclipse_for_failing_tests_2"></a>4.2.3.1. Help in Eclipse for failing tests</h5> 
     <div class="paragraph"> 
      <p>When your tests report errors due to HTML differences, Ogham helps with Eclipse integration. The following sample is voluntary in error due to differences between actual HTML and expected HTML (this is the expected HTML that is incorrect) in order to show how Ogham helps you.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-25,27-44,71-83 irrelevant-lines:1-25"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamMatchers.isIdenticalHtml</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.util.ResourceUtils.resourceAsString</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailHtmlTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> registerMessage() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .body().template(<span class="string"><span class="delimiter">"</span><span class="content">/template/register.html</span><span class="delimiter">"</span></span>,                         <i class="conum" data-value="1"></i><b>(1)</b>
                              <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))              <i class="conum" data-value="2"></i><b>(2)</b>
                .to(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">foo - Confirm your registration</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(isIdenticalHtml(resourceAsString(<span class="string"><span class="delimiter">"</span><span class="content">/expected/register.html</span><span class="delimiter">"</span></span>)))  <i class="conum" data-value="3"></i><b>(3)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/html</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Use an HTML template</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Object used to evaluate variables in the template</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Assert that HTML is identical as an expected HTML content</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailHtmlTestSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> HTML template 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
 <span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;title</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">|${name} - Confirm your registration|</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
 <span class="tag">&lt;/head&gt;</span>
 <span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;h1</span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">|Hello ${name}|</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>

  <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;/p&gt;</span>
 <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/register.html?ts=2">Source code of the template</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Expected HTML 
        </div> 
        <div class="content"> 
         <div class="listingblock highlight-lines:4,8"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span>bar - Confirm your registration<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/meta&gt;</span>
  <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">"</span><span class="content">foo</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Hello bar<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>42<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The expected HTML is voluntary wrong:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><code>title</code> starts with <code>bar</code> instead of <code>foo</code></p> </li> 
           <li> <p><code>h1</code> text is <code>Hello bar</code> instead of <code>Hello foo</code></p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>All other differences are not reported as errors as the resulting HTML interpretation will be the same.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="imageblock text-center"> 
      <div class="content"> 
       <img src="./images//eclipse/tests-junit-error.png" alt="tests junit error" class="img-fluid"> 
      </div> 
      <div class="title">
        Figure 7. JUnit view 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Double-clicking on the exception:</p> 
     </div> 
     <div class="imageblock text-center"> 
      <div class="content"> 
       <img src="./images//eclipse/tests-junit-error-open-comparison.png" alt="tests junit error open comparison" class="img-fluid"> 
      </div> 
      <div class="title">
        Figure 8. Exception message is clickable 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Opens a comparison window:</p> 
     </div> 
     <div class="imageblock text-center"> 
      <div class="content"> 
       <img src="./images//eclipse/tests-comparison.png" alt="tests comparison" class="img-fluid"> 
      </div> 
      <div class="title">
        Figure 9. Comparison window 
      </div> 
     </div> 
     <div class="admonitionblock warning"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
         <td class="content"> Spaces, tag closing and attributes order are reported by the comparison window provided by Eclipse. Indeed, Eclipse just compares two strings (not HTML documents). This window is just an helper to visualize where the problems are. But the real errors to fix are displayed both in logs and in the error summary. </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="imageblock text-center"> 
      <div class="content"> 
       <img src="./images//eclipse/tests-junit-error-useful-part.png" alt="tests junit error useful part" class="img-fluid"> 
      </div> 
      <div class="title">
        Figure 10. Useful part of the error summary 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="testing_email_with_an_html_body_and_text_alternative"><a class="anchor" href="#testing_email_with_an_html_body_and_text_alternative"></a>4.2.3.2. Testing email with an HTML body and text alternative</h5> 
     <div class="paragraph"> 
      <p>Testing an email sent with two main parts (HTML and text fallback) is straightforward.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-25,27-44,69-81 irrelevant-lines:1-25 highlight-lines:58-63"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamMatchers.isIdenticalHtml</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.util.ResourceUtils.resourceAsString</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.equalToCompressingWhiteSpace</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailHtmlAndTextTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> multiTemplateContent() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Multi</span><span class="delimiter">"</span></span>)
                .body().template(<span class="string"><span class="delimiter">"</span><span class="content">template/mixed/simple</span><span class="delimiter">"</span></span>, <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">bar</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Multi</span><span class="delimiter">"</span></span>))
        .from().address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .to().address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .body()                                                                                              <i class="conum" data-value="1"></i><b>(1)</b>
          .contentAsString(isIdenticalHtml(resourceAsString(<span class="string"><span class="delimiter">"</span><span class="content">/expected/simple_bar_42.html</span><span class="delimiter">"</span></span>)))              <i class="conum" data-value="2"></i><b>(2)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/html</span><span class="delimiter">"</span></span>)).and()                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        .alternative()                                                                                       <i class="conum" data-value="4"></i><b>(4)</b>
          .contentAsString(equalToCompressingWhiteSpace(resourceAsString(<span class="string"><span class="delimiter">"</span><span class="content">/expected/simple_bar_42.txt</span><span class="delimiter">"</span></span>)))  <i class="conum" data-value="5"></i><b>(5)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()                                                     <i class="conum" data-value="6"></i><b>(6)</b>
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Access to main body assertions</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Assert that main body message is HTML content and is similar as an expected HTML content loaded from classpath</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Assert that main body message mimetype is <code>text/html</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Access to alternative assertions</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>Assert that alternative body message is text content and is exactly the expected text content loaded from classpath</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="6"></i><b>6</b></td> 
             <td>Assert that alternative body message mimetype is <code>text/plain</code></td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailHtmlAndTextTestSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> HTML template 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/mixed/simple.html?ts=2">Source code of the template</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/freemarker-logo.png" alt="freemarker logo" width="60" height="24" class="img-fluid"></span> Text template 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="html">${name} ${value}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/mixed/simple.txt.ftl?ts=2">Source code of the template</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Expected HTML 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>

<span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>bar<span class="tag">&lt;/h1&gt;</span>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>42<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/resources/expected/simple_bar_42.html?ts=2">Source code of the expected HTML</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/txt.png" alt="txt" width="30" height="30" class="img-fluid"></span> Expected text 
        </div> 
        <div class="content"> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code>bar 42</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/resources/expected/simple_bar_42.txt?ts=2">Source code of the expected text</a>.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="testing_attachments"><a class="anchor" href="#testing_attachments"></a>4.2.3.3. Testing attachments</h5> 
     <div class="paragraph"> 
      <p>You can also test that attachments are sent correctly.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-25,27-44 irrelevant-lines:1-25 highlight-lines:63-68"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.util.EmailUtils.ATTACHMENT_DISPOSITION</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.util.ResourceUtils.resource</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasSize</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailAttachmentTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Test</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>)
                .attach().resource(<span class="string"><span class="delimiter">"</span><span class="content">/attachment/test.pdf</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Test</span><span class="delimiter">"</span></span>))
        .from().address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .to().address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>))
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(hasSize(<span class="integer">1</span>))                              <i class="conum" data-value="1"></i><b>(1)</b>
        .attachment(<span class="integer">0</span>)                                        <i class="conum" data-value="2"></i><b>(2)</b>
          .content(is(resource(<span class="string"><span class="delimiter">"</span><span class="content">/attachment/test.pdf</span><span class="delimiter">"</span></span>)))    <i class="conum" data-value="3"></i><b>(3)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">application/pdf</span><span class="delimiter">"</span></span>))       <i class="conum" data-value="4"></i><b>(4)</b>
          .filename(is(<span class="string"><span class="delimiter">"</span><span class="content">test.pdf</span><span class="delimiter">"</span></span>))                         <i class="conum" data-value="5"></i><b>(5)</b>
          .disposition(is(ATTACHMENT_DISPOSITION));         <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Assert that exactly one attachment is attached to the received email</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Access the first attachment for defining assertions on it</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Assert that the first received file is exactly the same as the sent one</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Assert that the detected mimetype of the first attachment is correct</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>Assert that the name of the first attachment is the expected one</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="6"></i><b>6</b></td> 
             <td>Assert that the attachment disposition is correct</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailAttachmentTestSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="testing_several_emails_at_once"><a class="anchor" href="#testing_several_emails_at_once"></a>4.2.3.4. Testing several emails at once</h5> 
     <div class="paragraph"> 
      <p>When you send an email to several recipients, there is one message per recipient. So if you send an email to 6 recipients, you may need to ensure that the 6 messages are received correctly. Ogham provides the <code>every</code> method to apply defined assertions on all messages.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-24,26-43 irrelevant-lines:1-24 highlight-lines:55"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.containsInAnyOrder</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">SeveralRecipientsTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> severalRecipients() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient1@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient2@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient3@sii.fr</span><span class="delimiter">"</span></span>)
                .cc(<span class="string"><span class="delimiter">"</span><span class="content">recipient4@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient5@sii.fr</span><span class="delimiter">"</span></span>)
                .bcc(<span class="string"><span class="delimiter">"</span><span class="content">recipient6@sii.fr</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">6</span>))                                                               <i class="conum" data-value="1"></i><b>(1)</b>
      .every()                                                                    <i class="conum" data-value="2"></i><b>(2)</b>
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .to()
          .address(containsInAnyOrder(<span class="string"><span class="delimiter">"</span><span class="content">recipient1@sii.fr</span><span class="delimiter">"</span></span>,                    <i class="conum" data-value="3"></i><b>(3)</b>
                        <span class="string"><span class="delimiter">"</span><span class="content">recipient2@sii.fr</span><span class="delimiter">"</span></span>,
                        <span class="string"><span class="delimiter">"</span><span class="content">recipient3@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .cc()
          .address(containsInAnyOrder(<span class="string"><span class="delimiter">"</span><span class="content">recipient4@sii.fr</span><span class="delimiter">"</span></span>,                    <i class="conum" data-value="4"></i><b>(4)</b>
                        <span class="string"><span class="delimiter">"</span><span class="content">recipient5@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>))
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Assert that 6 distinct messages are received</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td><code>every</code> applies all later defined assertions to all messages (the 6 messages)</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Assert that each received messages has exactly 3 <code>to</code> recipients</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Assert that each received messages has exactly 2 <code>cc</code> recipients</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="admonitionblock tip"> 
          <table> 
           <tbody> 
            <tr> 
             <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>The <code>bcc</code> recipient is not testable. Indeed, <code>bcc</code> recipients are hidden recipients that must not be visible. So the email is received (there are 6 received messages not 5). But <code>bcc</code> field of each email are empty because they are not present in the sent email. The <code>bcc</code> field is just used for routing.</p> 
              </div> </td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/SeveralRecipientsTestSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Sometimes you also need to send several different emails. The emails may have some identical information (sender or subject for example). So you can mix <code>every</code> (define assertions all messages) with <code>message</code> (define assertion for one particular message).</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-23,25-42 irrelevant-lines:1-23 highlight-lines:60,70,78,86"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">SeveralEmailsTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> severalDisctinctMessages() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body 1</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient1@sii.fr</span><span class="delimiter">"</span></span>));
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body 2</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient2@sii.fr</span><span class="delimiter">"</span></span>));
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body 3</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient3@sii.fr</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">3</span>))
      .every()                                                   <i class="conum" data-value="1"></i><b>(1)</b>
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable())
        .and()
      .message(<span class="integer">0</span>)                                                <i class="conum" data-value="2"></i><b>(2)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body 1</span><span class="delimiter">"</span></span>))
          .and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient1@sii.fr</span><span class="delimiter">"</span></span>))
          .and()
        .and()
      .message(<span class="integer">1</span>)                                                <i class="conum" data-value="3"></i><b>(3)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body 2</span><span class="delimiter">"</span></span>))
          .and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient2@sii.fr</span><span class="delimiter">"</span></span>))
          .and()
        .and()
      .message(<span class="integer">2</span>)                                                <i class="conum" data-value="4"></i><b>(4)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body 3</span><span class="delimiter">"</span></span>))
          .and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient3@sii.fr</span><span class="delimiter">"</span></span>));
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Shared assertions (subject, sender and body mimetype)</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Specific assertions for first sent message (recipient and message content)</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Specific assertions for second sent message (recipient and message content)</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Specific assertions for third sent message (recipient and message content)</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/SeveralEmailsTestSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="testing_with_smtp_authentication"><a class="anchor" href="#testing_with_smtp_authentication"></a>4.2.3.5. Testing with SMTP authentication</h5> 
     <div class="paragraph"> 
      <p>GreenMail allows to start the SMTP server with user and credentials.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-25,27-34 irrelevant-lines:1-25,51-74 highlight-lines:36,43-45"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">oghamall.it.email</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.LoggingTestRule</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.email.RandomPortGreenMailRule</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailSMTPAuthenticationTest</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> LoggingTestRule loggingRule = <span class="keyword">new</span> LoggingTestRule();

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> RandomPortGreenMailRule();

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    greenMail.setUser(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">test.sender</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">password</span><span class="delimiter">"</span></span>);             <i class="conum" data-value="1"></i><b>(1)</b>
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/application.properties</span><span class="delimiter">"</span></span>)
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, greenMail.getSmtp().getBindTo())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, greenMail.getSmtp().getPort())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.auth</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>)                        <i class="conum" data-value="2"></i><b>(2)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.javamail.authenticator.username</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">test.sender</span><span class="delimiter">"</span></span>)      <i class="conum" data-value="3"></i><b>(3)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.javamail.authenticator.password</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">password</span><span class="delimiter">"</span></span>)       <i class="conum" data-value="4"></i><b>(4)</b>
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> authenticated() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .content(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>))
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Configure GreenMail to register a user</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Configure JavaMail to enable authentication</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Configure Ogham to provide the authentication username</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Configure Ogham to provide the authentication password</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/ogham-all/src/test/java/oghamall/it/email/EmailSMTPAuthenticationTest.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
         <div class="admonitionblock note"> 
          <table> 
           <tbody> 
            <tr> 
             <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
             <td class="content"> Only the setup differs, the test is the same. </td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock TODO"> 
      <div class="content"> 
       <div class="ulist"> 
        <ul> 
         <li> <p>Add sample to show how to test with sendgrid?</p> </li> 
         <li> <p>Should use same assertion API (see <a href="https://github.com/groupe-sii/ogham/issues/96" class="bare">https://github.com/groupe-sii/ogham/issues/96</a>)</p> </li> 
        </ul> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="testing_email_with_an_html_body_and_text_alternative_2"><a class="anchor" href="#testing_email_with_an_html_body_and_text_alternative_2"></a>4.2.4. Testing email with an HTML body and text alternative</h4> 
    <div class="paragraph"> 
     <p>Testing an email sent with two main parts (HTML and text fallback) is straightforward.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-25,27-44,69-81 irrelevant-lines:1-25 highlight-lines:58-63"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamMatchers.isIdenticalHtml</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.util.ResourceUtils.resourceAsString</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.equalToCompressingWhiteSpace</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailHtmlAndTextTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> multiTemplateContent() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Multi</span><span class="delimiter">"</span></span>)
                .body().template(<span class="string"><span class="delimiter">"</span><span class="content">template/mixed/simple</span><span class="delimiter">"</span></span>, <span class="keyword">new</span> SimpleBean(<span class="string"><span class="delimiter">"</span><span class="content">bar</span><span class="delimiter">"</span></span>, <span class="integer">42</span>))
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Multi</span><span class="delimiter">"</span></span>))
        .from().address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .to().address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .body()                                                                                              <i class="conum" data-value="1"></i><b>(1)</b>
          .contentAsString(isIdenticalHtml(resourceAsString(<span class="string"><span class="delimiter">"</span><span class="content">/expected/simple_bar_42.html</span><span class="delimiter">"</span></span>)))              <i class="conum" data-value="2"></i><b>(2)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/html</span><span class="delimiter">"</span></span>)).and()                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        .alternative()                                                                                       <i class="conum" data-value="4"></i><b>(4)</b>
          .contentAsString(equalToCompressingWhiteSpace(resourceAsString(<span class="string"><span class="delimiter">"</span><span class="content">/expected/simple_bar_42.txt</span><span class="delimiter">"</span></span>)))  <i class="conum" data-value="5"></i><b>(5)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()                                                     <i class="conum" data-value="6"></i><b>(6)</b>
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SimpleBean</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> value;
    <span class="directive">public</span> SimpleBean(<span class="predefined-type">String</span> name, <span class="type">int</span> value) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.name = name;
      <span class="local-variable">this</span>.value = value;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> name;
    }
    <span class="directive">public</span> <span class="type">int</span> getValue() {
      <span class="keyword">return</span> value;
    }
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Access to main body assertions</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Assert that main body message is HTML content and is similar as an expected HTML content loaded from classpath</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Assert that main body message mimetype is <code>text/html</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Access to alternative assertions</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Assert that alternative body message is text content and is exactly the expected text content loaded from classpath</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Assert that alternative body message mimetype is <code>text/plain</code></td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailHtmlAndTextTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30" class="img-fluid"></span> HTML template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${name}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h1&gt;</span>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">${value}</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/mixed/simple.html?ts=2">Source code of the template</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/freemarker-logo.png" alt="freemarker logo" width="60" height="24" class="img-fluid"></span> Text template 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html">${name} ${value}</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/mixed/simple.txt.ftl?ts=2">Source code of the template</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/html.png" alt="html" width="37" height="30" class="img-fluid"></span> Expected HTML 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>

<span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">"</span><span class="content">utf-8</span><span class="delimiter">"</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h1</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>bar<span class="tag">&lt;/h1&gt;</span>
        <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">text</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>42<span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/resources/expected/simple_bar_42.html?ts=2">Source code of the expected HTML</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/txt.png" alt="txt" width="30" height="30" class="img-fluid"></span> Expected text 
       </div> 
       <div class="content"> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code>bar 42</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/resources/expected/simple_bar_42.txt?ts=2">Source code of the expected text</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="testing_attachments_2"><a class="anchor" href="#testing_attachments_2"></a>4.2.5. Testing attachments</h4> 
    <div class="paragraph"> 
     <p>You can also test that attachments are sent correctly.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-25,27-44 irrelevant-lines:1-25 highlight-lines:63-68"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.util.EmailUtils.ATTACHMENT_DISPOSITION</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.util.ResourceUtils.resource</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasSize</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailAttachmentTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Test</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>)
                .attach().resource(<span class="string"><span class="delimiter">"</span><span class="content">/attachment/test.pdf</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Test</span><span class="delimiter">"</span></span>))
        .from().address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .to().address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>))
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(hasSize(<span class="integer">1</span>))                              <i class="conum" data-value="1"></i><b>(1)</b>
        .attachment(<span class="integer">0</span>)                                        <i class="conum" data-value="2"></i><b>(2)</b>
          .content(is(resource(<span class="string"><span class="delimiter">"</span><span class="content">/attachment/test.pdf</span><span class="delimiter">"</span></span>)))    <i class="conum" data-value="3"></i><b>(3)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">application/pdf</span><span class="delimiter">"</span></span>))       <i class="conum" data-value="4"></i><b>(4)</b>
          .filename(is(<span class="string"><span class="delimiter">"</span><span class="content">test.pdf</span><span class="delimiter">"</span></span>))                         <i class="conum" data-value="5"></i><b>(5)</b>
          .disposition(is(ATTACHMENT_DISPOSITION));         <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Assert that exactly one attachment is attached to the received email</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Access the first attachment for defining assertions on it</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Assert that the first received file is exactly the same as the sent one</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Assert that the detected mimetype of the first attachment is correct</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Assert that the name of the first attachment is the expected one</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Assert that the attachment disposition is correct</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/EmailAttachmentTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="testing_several_emails_at_once_2"><a class="anchor" href="#testing_several_emails_at_once_2"></a>4.2.6. Testing several emails at once</h4> 
    <div class="paragraph"> 
     <p>When you send an email to several recipients, there is one message per recipient. So if you send an email to 6 recipients, you may need to ensure that the 6 messages are received correctly. Ogham provides the <code>every</code> method to apply defined assertions on all messages.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-24,26-43 irrelevant-lines:1-24 highlight-lines:55"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.containsInAnyOrder</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">SeveralRecipientsTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> severalRecipients() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient1@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient2@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient3@sii.fr</span><span class="delimiter">"</span></span>)
                .cc(<span class="string"><span class="delimiter">"</span><span class="content">recipient4@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">recipient5@sii.fr</span><span class="delimiter">"</span></span>)
                .bcc(<span class="string"><span class="delimiter">"</span><span class="content">recipient6@sii.fr</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">6</span>))                                                               <i class="conum" data-value="1"></i><b>(1)</b>
      .every()                                                                    <i class="conum" data-value="2"></i><b>(2)</b>
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .to()
          .address(containsInAnyOrder(<span class="string"><span class="delimiter">"</span><span class="content">recipient1@sii.fr</span><span class="delimiter">"</span></span>,                    <i class="conum" data-value="3"></i><b>(3)</b>
                        <span class="string"><span class="delimiter">"</span><span class="content">recipient2@sii.fr</span><span class="delimiter">"</span></span>,
                        <span class="string"><span class="delimiter">"</span><span class="content">recipient3@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .cc()
          .address(containsInAnyOrder(<span class="string"><span class="delimiter">"</span><span class="content">recipient4@sii.fr</span><span class="delimiter">"</span></span>,                    <i class="conum" data-value="4"></i><b>(4)</b>
                        <span class="string"><span class="delimiter">"</span><span class="content">recipient5@sii.fr</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>))
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Assert that 6 distinct messages are received</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td><code>every</code> applies all later defined assertions to all messages (the 6 messages)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Assert that each received messages has exactly 3 <code>to</code> recipients</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Assert that each received messages has exactly 2 <code>cc</code> recipients</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>The <code>bcc</code> recipient is not testable. Indeed, <code>bcc</code> recipients are hidden recipients that must not be visible. So the email is received (there are 6 received messages not 5). But <code>bcc</code> field of each email are empty because they are not present in the sent email. The <code>bcc</code> field is just used for routing.</p> 
             </div> </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/SeveralRecipientsTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Sometimes you also need to send several different emails. The emails may have some identical information (sender or subject for example). So you can mix <code>every</code> (define assertions all messages) with <code>message</code> (define assertion for one particular message).</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-23,25-42 irrelevant-lines:1-23 highlight-lines:60,70,78,86"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">SeveralEmailsTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> severalDisctinctMessages() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body 1</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient1@sii.fr</span><span class="delimiter">"</span></span>));
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body 2</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient2@sii.fr</span><span class="delimiter">"</span></span>));
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body 3</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">recipient3@sii.fr</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">3</span>))
      .every()                                                   <i class="conum" data-value="1"></i><b>(1)</b>
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable())
        .and()
      .message(<span class="integer">0</span>)                                                <i class="conum" data-value="2"></i><b>(2)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body 1</span><span class="delimiter">"</span></span>))
          .and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient1@sii.fr</span><span class="delimiter">"</span></span>))
          .and()
        .and()
      .message(<span class="integer">1</span>)                                                <i class="conum" data-value="3"></i><b>(3)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body 2</span><span class="delimiter">"</span></span>))
          .and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient2@sii.fr</span><span class="delimiter">"</span></span>))
          .and()
        .and()
      .message(<span class="integer">2</span>)                                                <i class="conum" data-value="4"></i><b>(4)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body 3</span><span class="delimiter">"</span></span>))
          .and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient3@sii.fr</span><span class="delimiter">"</span></span>));
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Shared assertions (subject, sender and body mimetype)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Specific assertions for first sent message (recipient and message content)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Specific assertions for second sent message (recipient and message content)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Specific assertions for third sent message (recipient and message content)</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/SeveralEmailsTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="testing_with_smtp_authentication_2"><a class="anchor" href="#testing_with_smtp_authentication_2"></a>4.2.7. Testing with SMTP authentication</h4> 
    <div class="paragraph"> 
     <p>GreenMail allows to start the SMTP server with user and credentials.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-25,27-34 irrelevant-lines:1-25,51-74 highlight-lines:36,43-45"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">oghamall.it.email</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.LoggingTestRule</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.email.RandomPortGreenMailRule</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailSMTPAuthenticationTest</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> LoggingTestRule loggingRule = <span class="keyword">new</span> LoggingTestRule();

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> RandomPortGreenMailRule();

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    greenMail.setUser(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">test.sender</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">password</span><span class="delimiter">"</span></span>);             <i class="conum" data-value="1"></i><b>(1)</b>
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/application.properties</span><span class="delimiter">"</span></span>)
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, greenMail.getSmtp().getBindTo())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, greenMail.getSmtp().getPort())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.auth</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span>)                        <i class="conum" data-value="2"></i><b>(2)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.javamail.authenticator.username</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">test.sender</span><span class="delimiter">"</span></span>)      <i class="conum" data-value="3"></i><b>(3)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.javamail.authenticator.password</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">password</span><span class="delimiter">"</span></span>)       <i class="conum" data-value="4"></i><b>(4)</b>
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> authenticated() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .content(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()
      .count(is(<span class="integer">1</span>))
      .message(<span class="integer">0</span>)
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>))
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name</span><span class="delimiter">"</span></span>)).and()
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>))
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()
        .alternative(nullValue())
        .attachments(emptyIterable());
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Configure GreenMail to register a user</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Configure JavaMail to enable authentication</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Configure Ogham to provide the authentication username</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Configure Ogham to provide the authentication password</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/ogham-all/src/test/java/oghamall/it/email/EmailSMTPAuthenticationTest.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> Only the setup differs, the test is the same. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="testing_with_sendgrid"><a class="anchor" href="#testing_with_sendgrid"></a>4.2.8. Testing with SendGrid</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Add sample to show how to test with sendgrid?</p> </li> 
        <li> <p>Should use same assertion API (see <a href="https://github.com/groupe-sii/ogham/issues/96" class="bare">https://github.com/groupe-sii/ogham/issues/96</a>)</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="testing-sms"><a class="anchor" href="#testing-sms"></a>4.3. Testing SMS</h3> 
   <div class="sect3"> 
    <h4 id="first_test_2"><a class="anchor" href="#first_test_2"></a>4.3.1. First test</h4> 
    <div class="paragraph"> 
     <p>To test your application SMS, you can start a local SMPP server. You can then use Ogham to make assertions on you SMS (recipient phone number, sender phone number and message). Ogham uses <a href="https://jsmpp.org/">jSMPP</a> as local SMPP server.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-19 irrelevant-lines:1-19"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.jsmpp.bean.SubmitSm</span>;
<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.sms.JsmppServerRule</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.sms.SmppServerRule</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">SmsTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> SmppServerRule&lt;SubmitSm&gt; smppServer = <span class="keyword">new</span> JsmppServerRule();    <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">+33603040506</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">localhost</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="2"></i><b>(2)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">"</span></span>, smppServer.getPort())        <i class="conum" data-value="3"></i><b>(3)</b>
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Sms()
              .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
              .to(<span class="string"><span class="delimiter">"</span><span class="content">0601020304</span><span class="delimiter">"</span></span>));
    assertThat(smppServer).receivedMessages()                                <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>))                                                        <i class="conum" data-value="5"></i><b>(5)</b>
      .message(<span class="integer">0</span>)                                                          <i class="conum" data-value="6"></i><b>(6)</b>
        .content(is(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>))                                      <i class="conum" data-value="7"></i><b>(7)</b>
        .from()
          .number(is(<span class="string"><span class="delimiter">"</span><span class="content">+33603040506</span><span class="delimiter">"</span></span>))                                  <i class="conum" data-value="8"></i><b>(8)</b>
          .and()
        .to()
          .number(is(<span class="string"><span class="delimiter">"</span><span class="content">0601020304</span><span class="delimiter">"</span></span>));                                   <i class="conum" data-value="9"></i><b>(9)</b>
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Declare and initialize the JUnit rule that encapsulates jSMPP for starting a local SMPP server in tests (you can set a different port than the default one)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Configure Ogham to use <code>localhost</code> for SMPP host</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Get the local SMPP server port and configure Ogham to use this value</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Entry point for declaring assertion on received SMS using a fluent API</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Assert that one and only one SMS has been received</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Access the first received message for declaring assertions for that message using fluent API</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>Assert that the received message text is exactly <code>sms content</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="8"></i><b>8</b></td> 
            <td>Assert that the sender phone number is <code>+33603040506</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="9"></i><b>9</b></td> 
            <td>Assert that the recipient phone number is <code>0601020304</code></td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/SmsTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="testing_long_messages_and_several_recipients"><a class="anchor" href="#testing_long_messages_and_several_recipients"></a>4.3.2. Testing long messages and several recipients</h4> 
    <div class="paragraph"> 
     <p>When a long message is sent, it must be split. Each part of the message is received by the SMPP server as distinct messages. The first message doesn’t have any additional information indicating that it is split. Successive messages have an additional header (contained in the body). Ogham hides this protocol specific complexity. So you can test your SMS without needing to know about the header. Ogham provides <code>message</code> method to access a particular message for doing assertions on it. Ogham also provides <code>every</code> to apply same assertions on all received messages.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Sending a SMS to several recipients is the same as sending several distinct SMS. So the SMPP server receives the same number as SMS as the number of recipients. In that case, you can use <code>every</code> to make same assertions on all messages.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-19 irrelevant-lines:1-19,21-38 highlight-lines:56"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.jsmpp.bean.SubmitSm</span>;
<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.sms.JsmppServerRule</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.sms.SmppServerRule</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">LongSmsTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> SmppServerRule&lt;SubmitSm&gt; smppServer = <span class="keyword">new</span> JsmppServerRule();

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">+33603040506</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">localhost</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(smppServer.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> longMessageUsingGsm8bit() <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Sms()
              .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content with a very very very loooooooooo</span><span class="delimiter">"</span></span>
                  + <span class="string"><span class="delimiter">"</span><span class="content">oooooooooonnnnnnnnnnnnnnnnng message that is</span><span class="delimiter">"</span></span>
                  + <span class="string"><span class="delimiter">"</span><span class="content"> over 140 characters in order to test the be</span><span class="delimiter">"</span></span>
                  + <span class="string"><span class="delimiter">"</span><span class="content">havior of the sender when message has to be split</span><span class="delimiter">"</span></span>)
              .to(<span class="string"><span class="delimiter">"</span><span class="content">0601020304</span><span class="delimiter">"</span></span>));
    assertThat(smppServer).receivedMessages()
      .count(is(<span class="integer">2</span>))                                                                   <i class="conum" data-value="1"></i><b>(1)</b>
      .message(<span class="integer">0</span>)                                                                     <i class="conum" data-value="2"></i><b>(2)</b>
        .content(is(<span class="string"><span class="delimiter">"</span><span class="content">sms content with a very very very looooooooooooooooooo</span><span class="delimiter">"</span></span>        <i class="conum" data-value="3"></i><b>(3)</b>
            + <span class="string"><span class="delimiter">"</span><span class="content">onnnnnnnnnnnnnnnnng message that is over 140 characters </span><span class="delimiter">"</span></span>
            + <span class="string"><span class="delimiter">"</span><span class="content">in order to test the beh</span><span class="delimiter">"</span></span>)).and()
      .message(<span class="integer">1</span>)                                                                     <i class="conum" data-value="4"></i><b>(4)</b>
        .content(is(<span class="string"><span class="delimiter">"</span><span class="content">avior of the sender when message has to be split</span><span class="delimiter">"</span></span>)).and()      <i class="conum" data-value="5"></i><b>(5)</b>
      .every()                                                                        <i class="conum" data-value="6"></i><b>(6)</b>
        .from()
          .number(is(<span class="string"><span class="delimiter">"</span><span class="content">+33603040506</span><span class="delimiter">"</span></span>))                                             <i class="conum" data-value="7"></i><b>(7)</b>
          .and()
        .to()
          .number(is(<span class="string"><span class="delimiter">"</span><span class="content">0601020304</span><span class="delimiter">"</span></span>));                                              <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Message is split so the SMPP server receives two messages</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Access first message to declare assertions on it</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Assert that the first message is correctly split (contains the beginning of the message)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Access second message to declare assertions on it</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Assert that the second message contains the end of the whole message</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td><code>every</code> applies all later defined assertions to all messages (the 2 messages here)</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>Assert that the sender phone number is <code>+33603040506</code> for every message</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="8"></i><b>8</b></td> 
            <td>Assert that the recipient phone number is <code>0601020304</code> for every message</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/LongSmsTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Simulate slow server using <code>@SmppServerConfig</code></p> </li> 
        <li> <p>Explain type of number (explanation + why it is important + sample)</p> </li> 
        <li> <p>Explain numbering plan indicator (explanation + why it is important + sample)</p> </li> 
        <li> <p>Add sample to show how to test with ovh?</p> </li> 
        <li> <p>Should use same assertion API (see <a href="https://github.com/groupe-sii/ogham/issues/96" class="bare">https://github.com/groupe-sii/ogham/issues/96</a>)</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="assertall"><a class="anchor" href="#assertall"></a>4.4. Fail at end</h3> 
   <div class="paragraph"> 
    <p>Instead of failing immediately on first assertion, Ogham also provides a way to run all assertions without failing and report all failures at the end. Here is an example with email (it is exactly the same for SMS):</p> 
   </div> 
   <div class="exampleblock tab-container no-max-height"> 
    <div class="content"> 
     <div class="openblock tab"> 
      <div class="title"> 
       <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
      </div> 
      <div class="content"> 
       <div class="listingblock collapse-lines:1-25,27-44 irrelevant-lines:1-25 highlight-lines:52-53,68"> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.icegreen.greenmail.util.ServerSetupTest.SMTP</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertAll</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamMatchers.isSimilarHtml</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">AssertAllEmailTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> GreenMailRule(SMTP);

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, SMTP.getBindAddress())
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, <span class="predefined-type">String</span>.valueOf(SMTP.getPort()))
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple (assertAll)</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">&lt;html&gt;&lt;body&gt;Hello world!&lt;/body&gt;&lt;/html&gt;</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">"</span></span>));
    assertAll(r -&gt;                                                       <i class="conum" data-value="1"></i><b>(1)</b>
      assertThat(greenMail, r).receivedMessages()                      <i class="conum" data-value="2"></i><b>(2)</b>
        .count(is(<span class="integer">1</span>))
        .message(<span class="integer">0</span>)
          .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple (assertAll)</span><span class="delimiter">"</span></span>))
          .from()
            .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))
            .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()
          .to()
            .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>))
            .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name</span><span class="delimiter">"</span></span>)).and()
          .body()
            .contentAsString(isSimilarHtml(<span class="string"><span class="delimiter">"</span><span class="content">&lt;html&gt;&lt;body&gt;Hello world!&lt;/body&gt;&lt;/html&gt;</span><span class="delimiter">"</span></span>))
            .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/html</span><span class="delimiter">"</span></span>)).and()
          .alternative(nullValue())
          .attachments(emptyIterable())
    );
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
        </div> 
       </div> 
       <div class="colist arabic"> 
        <table> 
         <tbody> 
          <tr> 
           <td><i class="conum" data-value="1"></i><b>1</b></td> 
           <td>Wrap existing assertion with <code>OghamAssertions.assertAll</code>. The <code>r</code> parameter is then used to register failed assertions.</td> 
          </tr> 
          <tr> 
           <td><i class="conum" data-value="2"></i><b>2</b></td> 
           <td>Pass the <code>r</code> parameter to existing <code>OghamAssertions.asserThat</code>.</td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
       <div class="paragraph"> 
        <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/AssertAllEmailTestSample.java?ts=2">Source code of the sample</a>.</p> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>When some assertions fail, Ogham also does its best to present failures in a way that developer can quickly understand. If we make the following changes to the previous sample:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>Change subject (send with <code>Simple (assertAll)</code>)</p> </li> 
     <li> <p>Change from address check (<code>test.sender1@sii.fr</code> instead of <code>test.sender@sii.fr</code>)</p> </li> 
     <li> <p>Change html body check (<code>Goodbye</code> instead of <code>Hello world!</code>)</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>Then the result is:</p> 
   </div> 
   <div class="imageblock text-center"> 
    <div class="content"> 
     <img src="./images//eclipse/tests-assertall-junit-trace.png" alt="tests assertall junit trace" class="img-fluid"> 
    </div> 
    <div class="title">
      Figure 11. JUnit stacktrace view 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>Double-clicking on the error opens the comparison view:</p> 
   </div> 
   <div class="imageblock text-center"> 
    <div class="content"> 
     <img src="./images//eclipse/tests-assertall-junit-comparison.png" alt="tests assertall junit comparison" class="img-fluid"> 
    </div> 
    <div class="title">
      Figure 12. JUnit comparison view 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>That way, you can quickly compare HTML results.</p> 
   </div> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
       <td class="content"> 
        <div class="title">
          Why HTML can be compared but not others 
        </div> 
        <div class="paragraph"> 
         <p>Hamcrest matchers throw an <code>AssertionError</code> when an assertion fails.</p> 
        </div> 
        <div class="paragraph"> 
         <p>Ogham provides some additional matchers (like <code>isSimilarHtml</code>) that add additional information so a comparison can be easily done and a <code>org.junit.ComparisonFailure</code> is thrown instead (so JUnit eclipse plugin can handle it).</p> 
        </div> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="random-ports"><a class="anchor" href="#random-ports"></a>4.5. Random ports</h3> 
   <div class="sect3"> 
    <h4 id="standalone_tests"><a class="anchor" href="#standalone_tests"></a>4.5.1. Standalone tests</h4> 
    <div class="paragraph"> 
     <p>Ogham provides <code>RandomPortGreenMailRule</code> that simply extends <code>GreenMailRule</code> to start on a random port instead of a fixed port.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="title">
       Example 9. Random SMTP port using GreenMail 
     </div> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-23 irrelevant-lines:1-23, highlight-lines:28,36,37"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.test</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.emptyIterable</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.nullValue</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.startsWith</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.email.RandomPortGreenMailRule</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">RandomPortEmailTestSample</span> {
  <span class="directive">private</span> MessagingService oghamService;

  <span class="annotation">@Rule</span>
  <span class="directive">public</span> <span class="directive">final</span> GreenMailRule greenMail = <span class="keyword">new</span> RandomPortGreenMailRule();        <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="annotation">@Before</span>
  <span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">IOException</span> {
    oghamService = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.from.default-value</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Sender Name &lt;test.sender@sii.fr&gt;</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, greenMail.getSmtp().getBindTo())  <i class="conum" data-value="2"></i><b>(2)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, greenMail.getSmtp().getPort())    <i class="conum" data-value="3"></i><b>(3)</b>
            .and()
          .and()
        .build();
  }

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> simple() <span class="directive">throws</span> MessagingException, javax.mail.MessagingException {
    <span class="comment">// @formatter:off</span>
    oghamService.send(<span class="keyword">new</span> Email()
                .subject(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>)
                .body().string(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>)
                .to(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name &lt;recipient@sii.fr&gt;</span><span class="delimiter">"</span></span>));
    assertThat(greenMail).receivedMessages()                                 <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>))                                                        <i class="conum" data-value="5"></i><b>(5)</b>
      .message(<span class="integer">0</span>)                                                          <i class="conum" data-value="6"></i><b>(6)</b>
        .subject(is(<span class="string"><span class="delimiter">"</span><span class="content">Simple</span><span class="delimiter">"</span></span>))                                           <i class="conum" data-value="7"></i><b>(7)</b>
        .from()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">test.sender@sii.fr</span><span class="delimiter">"</span></span>))                     <i class="conum" data-value="8"></i><b>(8)</b>
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Sender Name</span><span class="delimiter">"</span></span>)).and()                     <i class="conum" data-value="9"></i><b>(9)</b>
        .to()
          .address(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">recipient@sii.fr</span><span class="delimiter">"</span></span>))                       <i class="conum" data-value="10"></i><b>(10)</b>
          .personal(hasItems(<span class="string"><span class="delimiter">"</span><span class="content">Recipient Name</span><span class="delimiter">"</span></span>)).and()                  <i class="conum" data-value="11"></i><b>(11)</b>
        .body()
          .contentAsString(is(<span class="string"><span class="delimiter">"</span><span class="content">string body</span><span class="delimiter">"</span></span>))                          <i class="conum" data-value="12"></i><b>(12)</b>
          .contentType(startsWith(<span class="string"><span class="delimiter">"</span><span class="content">text/plain</span><span class="delimiter">"</span></span>)).and()                 <i class="conum" data-value="13"></i><b>(13)</b>
        .alternative(nullValue())                                        <i class="conum" data-value="14"></i><b>(14)</b>
        .attachments(emptyIterable());                                   <i class="conum" data-value="15"></i><b>(15)</b>
    <span class="comment">// @formatter:on</span>
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>Declare and initialize the GreenMail JUnit rule to start a local SMTP server on a random port</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Get the local SMTP server host address and configure Ogham to use this value</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Get the local SMTP server port and configure Ogham to use this value</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Entry point for declaring assertion on received emails using a fluent API</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="5"></i><b>5</b></td> 
            <td>Assert that one and only one email has been received</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="6"></i><b>6</b></td> 
            <td>Access the first received message for declaring assertions for that message using fluent API</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="7"></i><b>7</b></td> 
            <td>Assert that the subject of the first message is exactly <code>Simple</code> string</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="8"></i><b>8</b></td> 
            <td>Assert that the sender email address is exactly <code>test.sender@sii.fr</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="9"></i><b>9</b></td> 
            <td>Assert that the sender name is exactly <code>Sender Name</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="10"></i><b>10</b></td> 
            <td>Assert that the recipient email address is exactly <code>recipient@sii.fr</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="11"></i><b>11</b></td> 
            <td>Assert that the recipient name is exactly <code>Recipient Name</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="12"></i><b>12</b></td> 
            <td>Assert that the body of the received email is exactly <code>string body</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="13"></i><b>13</b></td> 
            <td>Assert that the mimetype of the body of the received email starts with <code>text/plain</code></td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="14"></i><b>14</b></td> 
            <td>Assert that received email has no alternative content</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="15"></i><b>15</b></td> 
            <td>Assert that received email has no attachment</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/test/java/fr/sii/ogham/sample/test/RandomPortEmailTestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>For SMS testing, you don’t have to change anything, it uses random port by default.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="spring_boot_tests"><a class="anchor" href="#spring_boot_tests"></a>4.5.2. Spring Boot tests</h4> 
    <div class="paragraph"> 
     <p>Ogham provides Spring Boot extensions that can be used in tests to benefit from random ports easily.</p> 
    </div> 
    <div class="exampleblock tab-container no-max-height"> 
     <div class="title">
       Example 10. Random ports in Spring Boot tests 
     </div> 
     <div class="content"> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Email (JUnit 5) 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-17,26,32-36 irrelevant-lines:1-17,26,32-36 highlight-lines:21,23,25,38"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.springboot.email</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;

<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.extension.RegisterExtension</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.test.context.SpringBootTest</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.ContextConfiguration</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit5.GreenMailExtension</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.spring.GreenMailInitializer</span>;
<span class="keyword">import</span> <span class="include">mock.MockApplication</span>;

<span class="annotation">@SpringBootTest</span>(classes = MockApplication.class, properties = {
  <span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host=127.0.0.1</span><span class="delimiter">"</span></span>,
  <span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port=${greenmail.smtp.port}</span><span class="delimiter">"</span></span>                              <i class="conum" data-value="1"></i><b>(1)</b>
})
<span class="annotation">@ContextConfiguration</span>(initializers = GreenMailInitializer.class)         <i class="conum" data-value="2"></i><b>(2)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">RandomSmtpPortJUnit5TestSample</span> {
  <span class="annotation">@RegisterExtension</span> <span class="annotation">@Autowired</span> <span class="directive">public</span> GreenMailExtension greenMail;   <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="annotation">@Autowired</span> MessagingService messagingService;

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> foo() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// some code to test your application here</span>
    <span class="comment">// that sends email through SMTP</span>
    messagingService.send(<span class="keyword">new</span> Email()
        .subject(<span class="string"><span class="delimiter">"</span><span class="content">Random port</span><span class="delimiter">"</span></span>)
        .from(<span class="string"><span class="delimiter">"</span><span class="content">foo@yopmail.com</span><span class="delimiter">"</span></span>)
        .to(<span class="string"><span class="delimiter">"</span><span class="content">bar@yopmail.com</span><span class="delimiter">"</span></span>)
        .body().string(<span class="string"><span class="delimiter">"</span><span class="content">Random port sample</span><span class="delimiter">"</span></span>));
    <span class="comment">// make assertions</span>
    assertThat(greenMail).receivedMessages()                         <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>));
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The property <code>greenmail.smtp.port</code> can be used in the tested application that uses Ogham.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Register <code>GreenMailInitializer</code> to automatically start GreenMail SMTP service on a random port and register <code>GreenMailExtension</code> bean in test context.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Use <code>@Autowired</code> to inject <code>GreenMailExtension</code> instance that uses the random port.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Make assertions on GreenMail as usual.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/test/java/fr/sii/ogham/sample/springboot/email/RandomSmtpPortJUnit5TestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> SMS (JUnit 5) 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-17,26,32-35 irrelevant-lines:1-17,26,32-35 highlight-lines:21,23,25,37"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.springboot.sms</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;

<span class="keyword">import</span> <span class="include">org.jsmpp.bean.SubmitSm</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Test</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.extension.RegisterExtension</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.test.context.SpringBootTest</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.ContextConfiguration</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.sms.SmppServerExtension</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.spring.JsmppServerInitializer</span>;
<span class="keyword">import</span> <span class="include">mock.MockApplication</span>;

<span class="annotation">@SpringBootTest</span>(classes = MockApplication.class, properties = {
  <span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host=127.0.0.1</span><span class="delimiter">"</span></span>,
  <span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port=${jsmpp.server.port}</span><span class="delimiter">"</span></span>                                        <i class="conum" data-value="1"></i><b>(1)</b>
})
<span class="annotation">@ContextConfiguration</span>(initializers = JsmppServerInitializer.class)                    <i class="conum" data-value="2"></i><b>(2)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">RandomSmppPortJUnit5TestSample</span> {
  <span class="annotation">@RegisterExtension</span> <span class="annotation">@Autowired</span> <span class="directive">public</span> SmppServerExtension&lt;SubmitSm&gt; smppServer;    <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="annotation">@Autowired</span> MessagingService messagingService;

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> foo() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// some code to test your application here</span>
    <span class="comment">// that sends SMS through SMPP</span>
    messagingService.send(<span class="keyword">new</span> Sms()
        .from(<span class="string"><span class="delimiter">"</span><span class="content">0000000000</span><span class="delimiter">"</span></span>)
        .to(<span class="string"><span class="delimiter">"</span><span class="content">1111111111</span><span class="delimiter">"</span></span>)
        .message().string(<span class="string"><span class="delimiter">"</span><span class="content">Random port</span><span class="delimiter">"</span></span>));
    <span class="comment">// make assertions</span>
    assertThat(smppServer).receivedMessages()                                     <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>));
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The property <code>jsmpp.server.port</code> can be used in the tested application that uses Ogham.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Register <code>JsmppServerInitializer</code> to automatically start JSMPPServer on a random port and register <code>JsmppServerExtension</code> bean in test context.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Use <code>@Autowired</code> to inject <code>JsmppServerExtension</code> instance that uses the random port.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Make assertions on JSMPPServer as usual.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/test/java/fr/sii/ogham/sample/springboot/smpp/RandomSmppPortJUnit5TestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Email (JUnit 4) 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-19,29,35-39 irrelevant-lines:1-19,29,35-39 highlight-lines:24,26,28,41"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.springboot.email</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;

<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;
<span class="keyword">import</span> <span class="include">org.junit.runner.RunWith</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.test.context.SpringBootTest</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.ContextConfiguration</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.junit4.SpringJUnit4ClassRunner</span>;

<span class="keyword">import</span> <span class="include">com.icegreen.greenmail.junit4.GreenMailRule</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.spring.GreenMailInitializer</span>;
<span class="keyword">import</span> <span class="include">mock.MockApplication</span>;

<span class="annotation">@RunWith</span>(SpringJUnit4ClassRunner.class)
<span class="annotation">@SpringBootTest</span>(classes = MockApplication.class, properties = {
  <span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host=127.0.0.1</span><span class="delimiter">"</span></span>,
  <span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port=${greenmail.smtp.port}</span><span class="delimiter">"</span></span>                              <i class="conum" data-value="1"></i><b>(1)</b>
})
<span class="annotation">@ContextConfiguration</span>(initializers = GreenMailInitializer.class)         <i class="conum" data-value="2"></i><b>(2)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">RandomSmtpPortJUnit4TestSample</span> {
  <span class="annotation">@Rule</span> <span class="annotation">@Autowired</span> <span class="directive">public</span> GreenMailRule greenMail;                     <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="annotation">@Autowired</span> MessagingService messagingService;

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> foo() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// some code to test your application here</span>
    <span class="comment">// that sends email through SMTP</span>
    messagingService.send(<span class="keyword">new</span> Email()
        .subject(<span class="string"><span class="delimiter">"</span><span class="content">Random port</span><span class="delimiter">"</span></span>)
        .from(<span class="string"><span class="delimiter">"</span><span class="content">foo@yopmail.com</span><span class="delimiter">"</span></span>)
        .to(<span class="string"><span class="delimiter">"</span><span class="content">bar@yopmail.com</span><span class="delimiter">"</span></span>)
        .body().string(<span class="string"><span class="delimiter">"</span><span class="content">Random port sample</span><span class="delimiter">"</span></span>));
    <span class="comment">// make assertions</span>
    assertThat(greenMail).receivedMessages()                         <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>));
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The property <code>greenmail.smtp.port</code> can be used in the tested application that uses Ogham.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Register <code>GreenMailInitializer</code> to automatically start GreenMail SMTP service on a random port and register <code>GreenMailRule</code> bean in test context.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Use <code>@Autowired</code> to inject <code>GreenMailRule</code> instance that uses the random port.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Make assertions on GreenMail as usual.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/test/java/fr/sii/ogham/sample/springboot/email/RandomSmtpPortJUnit4TestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="openblock tab"> 
       <div class="title"> 
        <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> SMS (JUnit 4) 
       </div> 
       <div class="content"> 
        <div class="listingblock collapse-lines:1-19,29,35-38 irrelevant-lines:1-19,29,35-38 highlight-lines:24,26,28,40"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.springboot.sms</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">fr.sii.ogham.testing.assertion.OghamAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.is</span>;

<span class="keyword">import</span> <span class="include">org.jsmpp.bean.SubmitSm</span>;
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;
<span class="keyword">import</span> <span class="include">org.junit.runner.RunWith</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.test.context.SpringBootTest</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.ContextConfiguration</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.junit4.SpringJUnit4ClassRunner</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.junit.sms.SmppServerRule</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.testing.extension.spring.JsmppServerInitializer</span>;
<span class="keyword">import</span> <span class="include">mock.MockApplication</span>;

<span class="annotation">@RunWith</span>(SpringJUnit4ClassRunner.class)
<span class="annotation">@SpringBootTest</span>(classes = MockApplication.class, properties = {
  <span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host=127.0.0.1</span><span class="delimiter">"</span></span>,
  <span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port=${jsmpp.server.port}</span><span class="delimiter">"</span></span>                                   <i class="conum" data-value="1"></i><b>(1)</b>
})
<span class="annotation">@ContextConfiguration</span>(initializers = JsmppServerInitializer.class)               <i class="conum" data-value="2"></i><b>(2)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">RandomSmppPortJUnit4TestSample</span> {
  <span class="annotation">@Rule</span> <span class="annotation">@Autowired</span> <span class="directive">public</span> SmppServerRule&lt;SubmitSm&gt; smppServer;                 <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="annotation">@Autowired</span> MessagingService messagingService;

  <span class="annotation">@Test</span>
  <span class="directive">public</span> <span class="type">void</span> foo() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// some code to test your application here</span>
    <span class="comment">// that sends SMS through SMPP</span>
    messagingService.send(<span class="keyword">new</span> Sms()
        .from(<span class="string"><span class="delimiter">"</span><span class="content">0000000000</span><span class="delimiter">"</span></span>)
        .to(<span class="string"><span class="delimiter">"</span><span class="content">1111111111</span><span class="delimiter">"</span></span>)
        .message().string(<span class="string"><span class="delimiter">"</span><span class="content">Random port</span><span class="delimiter">"</span></span>));
    <span class="comment">// make assertions</span>
    assertThat(smppServer).receivedMessages()                                <i class="conum" data-value="4"></i><b>(4)</b>
      .count(is(<span class="integer">1</span>));
  }
}</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The property <code>jsmpp.server.port</code> can be used in the tested application that uses Ogham.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="2"></i><b>2</b></td> 
            <td>Register <code>JsmppServerInitializer</code> to automatically start JSMPPServer on a random port and register <code>JsmppServerRule</code> bean in test context.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="3"></i><b>3</b></td> 
            <td>Use <code>@Autowired</code> to inject <code>JsmppServerRule</code> instance that uses the random port.</td> 
           </tr> 
           <tr> 
            <td><i class="conum" data-value="4"></i><b>4</b></td> 
            <td>Make assertions on JSMPPServer as usual.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="paragraph"> 
         <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/test/java/fr/sii/ogham/sample/springboot/smpp/RandomSmppPortJUnit4TestSample.java?ts=2">Source code of the sample</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="section-tips"><a class="anchor" href="#section-tips"></a>5. Tips</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="automatic-configuration"><a class="anchor" href="#automatic-configuration"></a>5.1. Automatic configuration</h3> 
   <div class="paragraph"> 
    <p>Ogham automatically adapts according to the presence or not of some classes in the classpath and values of some configuration properties. To do so, there are several concepts that have each a specific role and that interact together.</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="concepts"><a class="anchor" href="#concepts"></a>5.1.1. Concepts</h4> 
    <div class="sect4"> 
     <h5 id="messagingservice_class"><a class="anchor" href="#messagingservice_class"></a>5.1.1.1. MessagingService class</h5> 
     <div class="paragraph"> 
      <p>The <code>MessagingService</code> is the facade to send any kind of message. Developer should use only <code>MessagingService.send()</code> method. The actual work is then internally delegated to sender implementations and template engine integrations that is not visible by the developer. Even if internal implementations are not visible to the developer, Ogham behavior is fully adaptable thanks to <code>Builder</code> classes.</p> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="builder_classes"><a class="anchor" href="#builder_classes"></a>5.1.1.2. Builder classes</h5> 
     <div class="paragraph"> 
      <p>Ogham is fully configurable and extensible.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To adapt the behavior to the application needs, Ogham provides <code>Builder</code> classes. Their purpose is to separate the concerns:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Implementations are simple and do the actual work.</p> </li> 
       <li> <p>Builders create implementation instances according to the application needs.</p> </li> 
      </ul> 
     </div> 
     <div class="paragraph"> 
      <p>Builders hide complexity by offering methods that simplifies the construction of the implementations.</p> 
     </div> 
     <div class="paragraph"> 
      <p>This follows the <a href="https://en.wikipedia.org/wiki/Builder_pattern">builder design pattern</a> principles.</p> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="messagingconfigurer_classes"><a class="anchor" href="#messagingconfigurer_classes"></a>5.1.1.3. MessagingConfigurer classes</h5> 
     <div class="paragraph"> 
      <p>A <code>MessagingConfigurer</code> is responsible to provide the best behavior by default.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Each <code>MessagingConfigurer</code> calls the <code>Builder</code> methods to configure implementations to provide a consistent behavior. They also register configuration properties that can be configured externally by the developer to adapt the default behavior.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Each <code>MessagingConfigurer</code> may be automatically found and registered by Ogham using <code>@ConfigurerFor</code> annotation. If the automatic class scanning is not enabled, each <code>MessagingConfigurer</code> can be registered manually.</p> 
     </div> 
     <div class="paragraph"> 
      <p><code>MessagingConfigurer</code> classes are central for the automatic configuration.</p> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="messagingbuilder"><a class="anchor" href="#messagingbuilder"></a>5.1.1.4. MessagingBuilder</h5> 
     <div class="paragraph"> 
      <p>The purpose of <code>MessagingBuilder</code> is to provide to the developer a single entrypoint to configure and get a <code>MessagingService</code> instance. <code>MessagingBuilder</code> can automatically scan classpath to find <code>MessagingConfigurer</code> classes and instantiate them.</p> 
     </div> 
     <div class="paragraph"> 
      <p><code>MessagingBuilder</code> provides static methods to ease <code>MessagingBuilder</code> creation and automatic registration:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p><code>MessagingBuilder.empty()</code> methods: Instantiate a <code>MessagingBuilder</code> with no auto-configuration at all (no class scanning to discover <code>MessagingConfigurer</code> classes).</p> </li> 
       <li> <p><code>MessagingBuilder.minimal()</code> methods: Instantiate a <code>MessagingBuilder</code> that runs classpath scanning to find <code>MessagingConfigurer</code> classes that are annotated with <code>@ConfigurerFor</code> annotation. Only <code>MessagingConfigurer</code> classes that target <code>minimal</code> static factory are instantiated. This is useful to benefit for general Ogham behavior and features (such as template engines, automatic mimetype detection, auto-filling of messages, …​). Sender implementations are not automatically registered yet.</p> </li> 
       <li> <p><code>MessagingBuilder.standard()</code> methods: Instantiate a <code>MessagingBuilder</code> that runs classpath scanning to find <code>MessagingConfigurer</code> classes that are annotated with <code>@ConfigurerFor</code> annotation. Only <code>MessagingConfigurer</code> classes that target <code>standard</code> static factory are instantiated. All Ogham features are registered including all available sender implementations.</p> </li> 
      </ul> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> 
          <div class="paragraph"> 
           <p>A <code>MessagingConfigurer</code> targets one or several <code>MessagingBuilder</code> static factory methods through the <code>@ConfigurerFor</code> annotation (using the <code>targetedBuilder</code> field).</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="auto_configuration_lifecycle_and_configuration_phases"><a class="anchor" href="#auto_configuration_lifecycle_and_configuration_phases"></a>5.1.2. Auto-configuration lifecycle and configuration phases</h4> 
    <div class="paragraph"> 
     <p><code>@ConfigurerFor</code> has a field named <code>phase()</code> to indicate when the <code>MessagingConfigurer</code> must be executed. There are two phases: <code>ConfigurationPhase.AFTER_INIT</code> and <code>ConfigurationPhase.BEFORE_BUILD</code>.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Here is the auto-configuration lifecycle:</p> 
    </div> 
    <div class="olist arabic"> 
     <ol class="arabic"> 
      <li> <p><code>MessagingBuilder</code> instantiation (using <code>MessagingBuilder.standard()</code> or <code>MessagingBuilder.minimal()</code>).</p> </li> 
      <li> <p>Search <code>MessagingConfigurer</code> classes in the classpath and register found classes ordered by higher priority.</p> </li> 
      <li> <p>Trigger <code>ConfigurationPhase.AFTER_INIT</code> phase: Instantiate and configure previously registered <code>MessagingConfigurer</code> classes (only configurers registered for <code>AFTER_INIT</code> phase).</p> </li> 
      <li> <p>Developer can configure Ogham using <code>MessagingBuilder</code> instance (created at step 1).</p> </li> 
      <li> <p>Developer has finished configuring Ogham so he calls <code>MessagingBuilder.build()</code>.</p> </li> 
      <li> <p>Trigger <code>ConfigurationPhase.BEFORE_BUILD</code> phase: Instantiate and configure previously registered <code>MessagingConfigurer</code> classes (only configurers registered for <code>BEFORE_BUILD</code> phase).</p> </li> 
      <li> <p>Instantiate <code>MessagingService</code> according to <code>MessagingBuilder</code> configuration.</p> </li> 
      <li> <p>Developer gets an instance of <code>MessagingService</code> completely configured for his needs.</p> </li> 
     </ol> 
    </div> 
    <div class="admonitionblock important"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
        <td class="content"> 
         <div class="title">
           Early initialization phase and property evaluation 
         </div> 
         <div class="paragraph"> 
          <p>If an Ogham extension provides a <code>MessagingConfigurer</code> that is initialized during <code>AFTER_INIT</code> phase and this configurer needs to evaluate a property value to adapt the behavior, it may not work as expected.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Actually, the developer can configure value for properties at the step 4 while <code>AFTER_INIT</code> phase is triggered at step 3.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="mimetype-detection"><a class="anchor" href="#mimetype-detection"></a>5.2. Automatic MimeType detection</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain that Ogham can detect mimetype automatically</p> </li> 
       <li> <p>Explain that Ogham supports several implementations</p> </li> 
       <li> <p>Explain that Ogham can use Tika</p> </li> 
       <li> <p>Explain how to configure default mimetype</p> </li> 
       <li> <p>Explain how to forbid some mimetypes</p> </li> 
       <li> <p>Explain how to replace a mimetype by another</p> </li> 
       <li> <p>Add link to extend documentation to add custom mimetype detector</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="service-providers"><a class="anchor" href="#service-providers"></a>5.3. Automatic configuration for well-known service providers</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain aim of service providers</p> </li> 
       <li> <p>List predefined service providers</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>List all error codes with the explanation and how to fix it (dedicated appendix ?)</p> </li> 
       <li> <p>Example: Gmail throws <code>javax.mail.AuthenticationFailedException</code>: 534-5.7.14</p> </li> 
       <li> <p>Add all configuration properties (dedicated appendix ?), their default values, their effect and a description</p> </li> 
       <li> <p>Add all Spring Boot properties supported by Ogham, support conditions and their effect</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="section-advanced-configuration"><a class="anchor" href="#section-advanced-configuration"></a>6. Advanced configuration</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="auto_re_send_messages"><a class="anchor" href="#auto_re_send_messages"></a>6.1. Auto re-send messages</h3> 
   <div class="sect3"> 
    <h4 id="retry-strategy"><a class="anchor" href="#retry-strategy"></a>6.1.1. Retry handling</h4> 
    <div class="paragraph"> 
     <p>Some messages may fail while sending (due to network error for example). Ogham provides a mechanism to automatically resend a message when it fails under some circumstances.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Ogham provides several strategies for retry management:</p> 
    </div> 
    <div class="olist arabic"> 
     <ol class="arabic"> 
      <li> <p><code>fixedDelay()</code>: Wait for a fixed delay between each attempt (wait for the end of the last execution before start waiting)</p> </li> 
      <li> <p><code>fixedInterval()</code>: Retry on fixed interval (do not wait for the end of the last execution)</p> </li> 
      <li> <p><code>exponentialDelay()</code>: Wait for a delay that will be doubled between each attempt (wait for the end of the last execution before start waiting)</p> </li> 
      <li> <p><code>perExecutionDelay()</code>: Use a specific delay for each execution (for example: 100ms after the first execution, 500ms after the second, 8000ms after the third, …​)</p> </li> 
     </ol> 
    </div> 
    <div class="paragraph"> 
     <p>To enable one of these strategies, don’t change your code. You just need to update Ogham configuration.</p> 
    </div> 
    <div class="admonitionblock note"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
        <td class="content"> 
         <div class="title">
           Default configuration 
         </div> 
         <div class="paragraph"> 
          <p>Default Ogham configuration (using <code>MessagingBuiler.standard()</code> or <code>MessagingBuilder.minimal()</code>) doesn’t enable automatic re-send of messages.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock important"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
        <td class="content"> 
         <div class="title">
           Skip retry for some errors 
         </div> 
         <div class="paragraph"> 
          <p>To prevent retrying for nothing, Ogham analyze the raised error (and associated causes) to skip retry. This happens if the exception (or cause) met one this condition:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>If the error is a JVM error (instance of <code>Error</code>). This kind of errors should not be ignored.</p> </li> 
           <li> <p>If the preparation of the message has failed (template parsing, associated resource not found, mimetype detection failed, message is not valid, …​). This kind of error will always give the same result.</p> </li> 
           <li> <p>If the developer used an invalid value (<code>null</code>, illegal argument, …​). If the value is invalid, there is no point in retrying.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>This is the default configuration for all kind of messages (email, SMS, …​). In addition to general exceptions, each sender implementation may register other conditions (like Cloudhopper for example that skip exceptions for SMS preparation).</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
        <td class="content"> 
         <div class="title">
           Add custom rule to skip retry 
         </div> 
         <div class="paragraph"> 
          <p>You may need to skip retry for some other exceptions. Ogham lets you <a href="./user-manual.html#skip-custom-exceptions">register custom conditions</a>.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock note"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
        <td class="content"> 
         <div class="title">
           Several strategies configured 
         </div> 
         <div class="paragraph"> 
          <p>Even if several strategies are configured, only one can be used. Therefore, Ogham defines the following priority for the strategies (uses the first one that is fully configured):</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p><code>perExecutionDelay()</code></p> </li> 
           <li> <p><code>exponentialDelay()</code></p> </li> 
           <li> <p><code>fixedInterval()</code></p> </li> 
           <li> <p><code>fixedDelay()</code></p> </li> 
          </ul> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="admonitionblock warning"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
        <td class="content"> 
         <div class="title">
           Using interval 
         </div> 
         <div class="paragraph"> 
          <p>When using a strategy based on interval (not waiting for the end of the last execution), there may have unexpected behaviors: the current execution may not be finished while a new retry is started. This may lead to several messages sent with the same content for example (in case the execution succeeds but take longer that configured interval).</p> 
         </div> 
         <div class="paragraph"> 
          <p><a href="./user-manual.html#retry-fixed-interval">More explanation below</a>.</p> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="sect4"> 
     <h5 id="fixed_delay"><a class="anchor" href="#fixed_delay"></a>6.1.1.1. Fixed delay</h5> 
     <div class="paragraph"> 
      <p>It retries several times with a fixed delay to wait after the last execution failure until the maximum attempts is reached.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 11. How it works 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title">
          Message sent 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent twice but can be sent the third time. The delay is configured to 5 seconds.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 10 seconds (timeout).</p> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-a06f51132cf94cbf725435783306e458.png" alt="diag a06f51132cf94cbf725435783306e458" width="891" height="787" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title">
          Message can’t be sent 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent and the maximum attempts is reached. The delay is configured to 5 seconds. The maximum attempts is configured to 4.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 10 seconds (timeout).</p> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-147807c30d86cdff96b0084161d8d76a.png" alt="diag 147807c30d86cdff96b0084161d8d76a" width="912" height="1099" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 12. Enable re-send of email with fixed delay 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicClasspathPropertiesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:email.properties</span><span class="delimiter">"</span></span>)      <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">BasicClasspathPropertiesSample</span><span class="delimiter">"</span></span>)
            .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/BasicClasspathPropertiesSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-3 highlight-lines:4-5"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=&lt;your server host&gt;
mail.smtp.port=&lt;your server port&gt;
ogham.email.from.default-value=&lt;email address to display <span class="keyword">for</span> the sender user&gt;
ogham.email.send-retry.max-attempts=<span class="integer">10</span>                 <i class="conum" data-value="1"></i><b>(1)</b>
ogham.email.send-retry.delay-between-attempts=<span class="integer">5000</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the maximum attempts to <code>10</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Set the delay (<code>5 seconds</code>) to wait for executing the next attempt after the execution failure</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 13. Enable re-send of SMS with fixed delay 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSampleExternalProperties</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    <span class="comment">// Load properties from file that is in classpath (src/main/resources/sms.properties)</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sms.properties</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSampleExternalProperties.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-5 highlight-lines:6-7"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">ogham.sms.smpp.host=&lt;your server host&gt;
ogham.sms.smpp.port=&lt;your server port&gt;
ogham.sms.smpp.system-id=&lt;your server system ID&gt;
ogham.sms.smpp.password=&lt;your server password&gt;
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;
ogham.sms.send-retry.max-attempts=<span class="integer">10</span>                 <i class="conum" data-value="1"></i><b>(1)</b>
ogham.sms.send-retry.delay-between-attempts=<span class="integer">5000</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the maximum attempts to <code>10</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Set the delay (<code>5 seconds</code>) to wait for executing the next attempt after the execution failure</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="exponential_delay"><a class="anchor" href="#exponential_delay"></a>6.1.1.2. Exponential delay</h5> 
     <div class="paragraph"> 
      <p>Retry several times with an initial delay to wait after the last execution failure. The following delays are doubled until the maximum attempts is reached.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 14. How it works 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title">
          Message sent 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent twice but can be sent the third time. The initial delay is configured to 5 seconds.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 10 seconds (timeout).</p> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-1081b15e5b4d6c663f43a3c231b3036c.png" alt="diag 1081b15e5b4d6c663f43a3c231b3036c" width="891" height="787" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title">
          Message can’t be sent 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent and the maximum attempts is reached. The initial delay is configured to 5 seconds. The maximum attempts is configured to 4.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 10 seconds (timeout).</p> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-54e47c9bc8234ed61ccf076d78778170.png" alt="diag 54e47c9bc8234ed61ccf076d78778170" width="912" height="1099" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 15. Enable re-send of email with exponential delay 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicClasspathPropertiesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:email.properties</span><span class="delimiter">"</span></span>)      <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">BasicClasspathPropertiesSample</span><span class="delimiter">"</span></span>)
            .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/BasicClasspathPropertiesSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-3 highlight-lines:4-5"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=&lt;your server host&gt;
mail.smtp.port=&lt;your server port&gt;
ogham.email.from.default-value=&lt;email address to display <span class="keyword">for</span> the sender user&gt;
ogham.email.send-retry.max-attempts=<span class="integer">10</span>                    <i class="conum" data-value="1"></i><b>(1)</b>
ogham.email.send-retry.exponential-initial-delay=<span class="integer">5000</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the maximum attempts to <code>10</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Set the initial delay to <code>5 seconds</code>. After each failing attempts, the delay is doubled</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 16. Enable re-send of SMS with exponential delay 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSampleExternalProperties</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    <span class="comment">// Load properties from file that is in classpath (src/main/resources/sms.properties)</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sms.properties</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSampleExternalProperties.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-5 highlight-lines:6-7"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">ogham.sms.smpp.host=&lt;your server host&gt;
ogham.sms.smpp.port=&lt;your server port&gt;
ogham.sms.smpp.system-id=&lt;your server system ID&gt;
ogham.sms.smpp.password=&lt;your server password&gt;
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;
ogham.sms.send-retry.max-attempts=<span class="integer">10</span>                    <i class="conum" data-value="1"></i><b>(1)</b>
ogham.sms.send-retry.exponential-initial-delay=<span class="integer">5000</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the maximum attempts to <code>10</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Set the initial delay to <code>5 seconds</code>. After each failing attempts, the delay is doubled</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="per_execution_delay"><a class="anchor" href="#per_execution_delay"></a>6.1.1.3. Per execution delay</h5> 
     <div class="paragraph"> 
      <p>Retry several times with a fixed delay to wait after the last execution failure until the maximum attempts is reached. A specific delay is used between each execution.</p> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> 
          <div class="title">
            More attempts than configured delays 
          </div> 
          <div class="paragraph"> 
           <p>If there are more attempts than the configured delays, the last delay is used for each remaining attempts.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 17. How it works 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title">
          Message sent 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent twice but can be sent the third time. The configured delays are: 5 seconds and 25 seconds.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 10 seconds (timeout).</p> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-e9cd46f72cc85592656b913b1391eb70.png" alt="diag e9cd46f72cc85592656b913b1391eb70" width="891" height="787" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title">
          Message can’t be sent 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent and the maximum attempts is reached. The maximum attempts is configured to 4. The configured delays are: 5 seconds, 25 seconds and 32 seconds.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 10 seconds (timeout).</p> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-5f16fae08764dcaeaf866c6a040922d1.png" alt="diag 5f16fae08764dcaeaf866c6a040922d1" width="912" height="1099" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 18. Enable re-send of email with per excecution delay 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicClasspathPropertiesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:email.properties</span><span class="delimiter">"</span></span>)      <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">BasicClasspathPropertiesSample</span><span class="delimiter">"</span></span>)
            .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/BasicClasspathPropertiesSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-3 highlight-lines:4-5"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=&lt;your server host&gt;
mail.smtp.port=&lt;your server port&gt;
ogham.email.from.default-value=&lt;email address to display <span class="keyword">for</span> the sender user&gt;
ogham.email.send-retry.max-attempts=<span class="integer">10</span>                           <i class="conum" data-value="1"></i><b>(1)</b>
ogham.email.send-retry.per-execution-delays=<span class="integer">5000</span>,<span class="integer">25000</span>,<span class="integer">32000</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the maximum attempts to <code>10</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Configure the delays: <code>5 seconds</code> after first failure, <code>25 seconds</code> after second failure and <code>32 seconds</code> after third execution</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 19. Enable re-send of SMS with per execution delay 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSampleExternalProperties</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    <span class="comment">// Load properties from file that is in classpath (src/main/resources/sms.properties)</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sms.properties</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSampleExternalProperties.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-5 highlight-lines:6-7"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">ogham.sms.smpp.host=&lt;your server host&gt;
ogham.sms.smpp.port=&lt;your server port&gt;
ogham.sms.smpp.system-id=&lt;your server system ID&gt;
ogham.sms.smpp.password=&lt;your server password&gt;
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;
ogham.sms.send-retry.max-attempts=<span class="integer">10</span>                           <i class="conum" data-value="1"></i><b>(1)</b>
ogham.sms.send-retry.per-execution-delays=<span class="integer">5000</span>,<span class="integer">25000</span>,<span class="integer">32000</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the maximum attempts to <code>10</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Configure the delays: <code>5 seconds</code> after first failure, <code>25 seconds</code> after second failure and <code>32 seconds</code> after third execution</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="retry-fixed-interval"><a class="anchor" href="#retry-fixed-interval"></a>6.1.1.4. Fixed interval</h5> 
     <div class="paragraph"> 
      <p>It retries several times with a fixed interval until the maximum attempts is reached. It doesn’t wait for the end of the previous execution.</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 20. How it works 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title">
          Message sent 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent twice but can be sent the third time. The interval is configured to 5 seconds.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 3 seconds (timeout).</p> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-f931fe62484350584168ca1628d85119.png" alt="diag f931fe62484350584168ca1628d85119" width="891" height="703" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title">
          Message can’t be sent 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent and the maximum attempts is reached. The delay is configured to 5 seconds. The maximum attempts is configured to 4.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 10 seconds (timeout).</p> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-a8c3dd7e1465f4fa21dc72fdc61d96f4.png" alt="diag a8c3dd7e1465f4fa21dc72fdc61d96f4" width="912" height="973" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title">
          Small interval 
        </div> 
        <div class="content"> 
         <div class="paragraph"> 
          <p>This diagram shows what happens if the message can’t be sent and the execution takes longer than the configured interval. The delay is configured to 4 seconds. The maximum attempts is configured to 4.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For the explanation, the server returns a response after 10 seconds (timeout).</p> 
         </div> 
         <div class="admonitionblock important"> 
          <table> 
           <tbody> 
            <tr> 
             <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>The following diagram is theoretical. It totally depends on <a href="./user-manual.doc.html#retry-executor">RetryExecutor implementation</a>. The strategy just indicates <strong>when</strong> the next retry <strong>should</strong> happen in theory.</p> 
              </div> 
              <div class="paragraph"> 
               <p>By default, <code>SimpleRetryExecutor</code> is used and everything runs in a single thread. So it waits for the end of the execution even if interval is elapsed. Therefore in this particular case, the interval may not be respected.</p> 
              </div> </td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="imageblock text-center"> 
          <div class="content"> 
           <img src="diag-1dc3c3c9a3dfcae0564a271efd08953d.png" alt="diag 1dc3c3c9a3dfcae0564a271efd08953d" width="1516" height="1398" class="img-fluid"> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 21. Enable re-send of email with fixed interval 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.email</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicClasspathPropertiesSample</span> {
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">classpath:email.properties</span><span class="delimiter">"</span></span>)      <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the email using fluent API</span>
    service.send(<span class="keyword">new</span> Email()
            .subject(<span class="string"><span class="delimiter">"</span><span class="content">BasicClasspathPropertiesSample</span><span class="delimiter">"</span></span>)
            .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/BasicClasspathPropertiesSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-3 highlight-lines:4-5"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">mail.smtp.host=&lt;your server host&gt;
mail.smtp.port=&lt;your server port&gt;
ogham.email.from.default-value=&lt;email address to display <span class="keyword">for</span> the sender user&gt;
ogham.email.send-retry.max-attempts=<span class="integer">10</span>                 <i class="conum" data-value="1"></i><b>(1)</b>
ogham.email.send-retry.delay-between-attempts=<span class="integer">5000</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the maximum attempts to <code>10</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Set the delay (<code>5 seconds</code>) to wait for executing the next attempt after the execution failure</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 22. Enable re-send of SMS with fixed interval 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSampleExternalProperties</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    <span class="comment">// Load properties from file that is in classpath (src/main/resources/sms.properties)</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sms.properties</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSampleExternalProperties.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-5 highlight-lines:6-7"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">ogham.sms.smpp.host=&lt;your server host&gt;
ogham.sms.smpp.port=&lt;your server port&gt;
ogham.sms.smpp.system-id=&lt;your server system ID&gt;
ogham.sms.smpp.password=&lt;your server password&gt;
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;
ogham.sms.send-retry.max-attempts=<span class="integer">10</span>                 <i class="conum" data-value="1"></i><b>(1)</b>
ogham.sms.send-retry.delay-between-attempts=<span class="integer">5000</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Set the maximum attempts to <code>10</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Set the delay (<code>5 seconds</code>) to wait for executing the next attempt after the execution failure</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="retry-executor"><a class="anchor" href="#retry-executor"></a>6.1.2. RetryExecutor</h4> 
    <div class="sect4"> 
     <h5 id="simpleretryexecutor"><a class="anchor" href="#simpleretryexecutor"></a>6.1.2.1. SimpleRetryExecutor</h5> 
     <div class="paragraph"> 
      <p>This is a simple implementation that runs in the current thread (no thread is created). It executes the action and if it fails, it suspends the current thread (using an <code>Awaiter</code> implementation) for some time (configured through <a href="./user-manual.html#retry-strategy"><code>RetryStrategy</code></a>).</p> 
     </div> 
     <div class="paragraph"> 
      <p>It repeats that until either the it succeeds or the maximum attempts is reached (or the strategy indicates that it should stop).</p> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> 
          <div class="paragraph"> 
           <p>Currently Ogham only provides this implementation but other may come in future versions.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="custom_executor"><a class="anchor" href="#custom_executor"></a>6.1.2.2. Custom executor</h5> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 23. Use custom RetryExecutor 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-24 irrelevant-lines:1-24"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.advanced</span>;

<span class="keyword">import</span> <span class="include">java.time.Instant</span>;
<span class="keyword">import</span> <span class="include">java.util.ArrayList</span>;
<span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="keyword">import</span> <span class="include">java.util.concurrent.Callable</span>;

<span class="keyword">import</span> <span class="include">org.slf4j.Logger</span>;
<span class="keyword">import</span> <span class="include">org.slf4j.LoggerFactory</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.async.Awaiter</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.async.WaitException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.retry.MaximumAttemptsReachedException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.retry.RetryException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.retry.RetryExecutionInterruptedException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.retry.RetryExecutor</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.retry.RetryStrategy</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.retry.RetryStrategyProvider</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.email.message.Email</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomRetryExecutorSample</span> {
  <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">Logger</span> LOG = LoggerFactory.getLogger(CustomRetryExecutorSample.class);

  <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="type">int</span> INVALID_PORT = <span class="integer">65000</span>;

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties()
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">localhost</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">mail.smtp.port</span><span class="delimiter">"</span></span>, INVALID_PORT)                                                              <i class="conum" data-value="1"></i><b>(1)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.send-retry.max-attempts</span><span class="delimiter">"</span></span>, <span class="integer">5</span>)                                                    <i class="conum" data-value="2"></i><b>(2)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.email.send-retry.delay-between-attempts</span><span class="delimiter">"</span></span>, <span class="integer">500</span>)                                        <i class="conum" data-value="3"></i><b>(3)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.host</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">localhost</span><span class="delimiter">"</span></span>)
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.smpp.port</span><span class="delimiter">"</span></span>, INVALID_PORT)                                                         <i class="conum" data-value="4"></i><b>(4)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.send-retry.max-attempts</span><span class="delimiter">"</span></span>, <span class="integer">5</span>)                                                      <i class="conum" data-value="5"></i><b>(5)</b>
            .set(<span class="string"><span class="delimiter">"</span><span class="content">ogham.sms.send-retry.exponential-initial-delay</span><span class="delimiter">"</span></span>, <span class="integer">500</span>)                                       <i class="conum" data-value="6"></i><b>(6)</b>
            .and()
          .and()
        .email()
          .autoRetry()
            .executor(CustomRetryExecutor::<span class="keyword">new</span>)                                                               <i class="conum" data-value="7"></i><b>(7)</b>
            .and()
          .and()
        .sms()
          .autoRetry()
            .executor(CustomRetryExecutor::<span class="keyword">new</span>)                                                               <i class="conum" data-value="8"></i><b>(8)</b>
            .and()
          .and()
        .build();
    <span class="keyword">try</span> {
      <span class="comment">// send an email using fluent API</span>
      service.send(<span class="keyword">new</span> Email()
              .subject(<span class="string"><span class="delimiter">"</span><span class="content">BasicSample</span><span class="delimiter">"</span></span>)
              .body().string(<span class="string"><span class="delimiter">"</span><span class="content">email content</span><span class="delimiter">"</span></span>)
              .from(<span class="string"><span class="delimiter">"</span><span class="content">sender@yopmail.com</span><span class="delimiter">"</span></span>)
              .to(<span class="string"><span class="delimiter">"</span><span class="content">ogham-test@yopmail.com</span><span class="delimiter">"</span></span>));
    } <span class="keyword">catch</span>(MessagingException e) {
      LOG.error(<span class="string"><span class="delimiter">"</span><span class="content">Failed to send email</span><span class="delimiter">"</span></span>, e);
    }
    <span class="keyword">try</span> {
      <span class="comment">// send a sms using fluent API</span>
      service.send(<span class="keyword">new</span> Sms()
              .message().string(<span class="string"><span class="delimiter">"</span><span class="content">SMS content</span><span class="delimiter">"</span></span>)
              .from(<span class="string"><span class="delimiter">"</span><span class="content">000000000</span><span class="delimiter">"</span></span>)
              .to(<span class="string"><span class="delimiter">"</span><span class="content">111111111</span><span class="delimiter">"</span></span>));
    } <span class="keyword">catch</span>(MessagingException e) {
      LOG.error(<span class="string"><span class="delimiter">"</span><span class="content">Failed to send SMS</span><span class="delimiter">"</span></span>, e);
    }
  }

  <span class="comment">/**
   * Custom strategy implementation. For the sample, the executor reproduces
   * the base behavior of SimpleRetryExecutor.
   *
   * @author Aurélien Baudet
   *
   */</span>
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">CustomRetryExecutor</span> <span class="directive">implements</span> RetryExecutor {
    <span class="directive">private</span> <span class="directive">final</span> RetryStrategyProvider retryStrategyProvider;
    <span class="directive">private</span> <span class="directive">final</span> Awaiter awaiter;

    <span class="directive">public</span> CustomRetryExecutor(RetryStrategyProvider retryStrategyProvider, Awaiter awaiter) {
      <span class="local-variable">super</span>();
      <span class="local-variable">this</span>.retryStrategyProvider = retryStrategyProvider;
      <span class="local-variable">this</span>.awaiter = awaiter;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> &lt;V&gt; V execute(<span class="predefined-type">Callable</span>&lt;V&gt; actionToRetry) <span class="directive">throws</span> RetryException {
      <span class="keyword">try</span> {
        RetryStrategy retry = retryStrategyProvider.provide();                                                    <i class="conum" data-value="9"></i><b>(9)</b>
        <span class="predefined-type">List</span>&lt;<span class="exception">Exception</span>&gt; failures = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
        <span class="keyword">do</span> {
          Instant executionStart = Instant.now();                                                               <i class="conum" data-value="10"></i><b>(10)</b>
          <span class="keyword">try</span> {
            <span class="keyword">return</span> actionToRetry.call();                                                                      <i class="conum" data-value="11"></i><b>(11)</b>
          } <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
            failures.add(e);
            Instant next = retry.nextDate(executionStart, Instant.now());                                     <i class="conum" data-value="12"></i><b>(12)</b>
            LOG.warn(<span class="string"><span class="delimiter">"</span><span class="content">Failed to execute action. Cause: {}.</span><span class="char">\n</span><span class="content">Retrying at {}</span><span class="delimiter">"</span></span>, e.getMessage(), next, e);
            awaiter.waitUntil(next);                                                                          <i class="conum" data-value="13"></i><b>(13)</b>
          }
        } <span class="keyword">while</span> (!retry.terminated());                                                                            <i class="conum" data-value="14"></i><b>(14)</b>
        <span class="keyword">throw</span> <span class="keyword">new</span> MaximumAttemptsReachedException(<span class="string"><span class="delimiter">"</span><span class="content">Maximum attempts to execute action is reached</span><span class="delimiter">"</span></span>, failures);     <i class="conum" data-value="15"></i><b>(15)</b>
      } <span class="keyword">catch</span> (WaitException e) {
        <span class="keyword">throw</span> <span class="keyword">new</span> RetryExecutionInterruptedException(e);                                                          <i class="conum" data-value="16"></i><b>(16)</b>
      }

    }

  }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Use an invalid SMTP port in order to test retry</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Configure maximum attempts for email</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Enable retry using a fixed delay between each attempts for email</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Use an invalid SMPP port in order to test retry</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>Configure maximum attempts for SMS</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="6"></i><b>6</b></td> 
             <td>Enable retry using a delay that is doubled between each attempts for SMS</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="7"></i><b>7</b></td> 
             <td>Register custom <code>RetryExecutor</code> for email</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="8"></i><b>8</b></td> 
             <td>Register custom <code>RetryExecutor</code> for SMS</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="9"></i><b>9</b></td> 
             <td>Get the instance of the <code>RetryStrategy</code> that will compute the date of the next attempt</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="10"></i><b>10</b></td> 
             <td>Date when the execution started</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="11"></i><b>11</b></td> 
             <td>Execute the action (here it is sending an email or a SMS)</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="12"></i><b>12</b></td> 
             <td>Ask <code>RetryStrategy</code> when should next attempt be executed</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="13"></i><b>13</b></td> 
             <td>Ask <code>Awaiter</code> to wait until next date</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="14"></i><b>14</b></td> 
             <td>Ask <code>RetryStrategy</code> if maximum attempts are reached or not</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="15"></i><b>15</b></td> 
             <td>All executions have failed and maximum attempts are reached so throw <code>MaximumAttemptsReachedException</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="16"></i><b>16</b></td> 
             <td>If waiting has failed, wrap the exception</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/advanced/CustomRetryExecutorSample.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="admonitionblock note"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
         <td class="content"> 
          <div class="paragraph"> 
           <p>As Cloudhopper SMPP implementation (for sending SMS) also uses a <code>RetryStrategy</code> for connecting to SMPP server (10 maximum attempts spaced 5 seconds apart), you may notice in logs that connection is retried 50 times (5 times for sending multiplied by 10 connection attempts).</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="skip-custom-exceptions"><a class="anchor" href="#skip-custom-exceptions"></a>6.1.3. Skip custom exceptions</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain how SimpleRetryExecutor works and limitations</p> </li> 
        <li> <p>Explain how to use custom executor</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="email"><a class="anchor" href="#email"></a>6.2. Email</h3> 
   <div class="sect3"> 
    <h4 id="custom-cid-generation"><a class="anchor" href="#custom-cid-generation"></a>6.2.1. Content-ID generator</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain how to add custom CID generation</p> </li> 
        <li> <p>Explain how to register it</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="catalog_of_smtp_properties"><a class="anchor" href="#catalog_of_smtp_properties"></a>6.2.2. Catalog of SMTP properties</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Add whole list of email properties</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="sms"><a class="anchor" href="#sms"></a>6.3. SMS</h3> 
   <div class="sect3"> 
    <h4 id="message-encoding"><a class="anchor" href="#message-encoding"></a>6.3.1. Message encoding</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Describe SMPP protocol encodings and fields (like Data Coding Scheme)</p> </li> 
        <li> <p>Explain Ogham automatic guessing</p> </li> 
        <li> <p>Explain how to adapt automatic guessing</p> </li> 
        <li> <p>Explain how to disable automatic guessing and use a fixed encoding</p> </li> 
        <li> <p>Explain the impact on the splitting of messages</p> </li> 
        <li> <p>Note to indicate how to add custom encoding</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="session-strategy"><a class="anchor" href="#session-strategy"></a>6.3.2. Session management</h4> 
    <div class="paragraph"> 
     <p>Session (connection between the client and the server) may be handled in many ways. Ogham natively provides three strategies:</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>Always use a new session for each message</p> </li> 
      <li> <p>Reuse same session for several messages until the connection is lost</p> </li> 
      <li> <p>Actively keep the session alive</p> </li> 
     </ul> 
    </div> 
    <div class="paragraph"> 
     <p>This section explains the difference between each implementation, how it works and how to use it.</p> 
    </div> 
    <div class="sect4"> 
     <h5 id="always_use_a_new_session"><a class="anchor" href="#always_use_a_new_session"></a>6.3.2.1. Always use a new session</h5> 
     <div class="paragraph"> 
      <p>This strategy is the simplest one. It is useful when your application only sends some SMS sometimes. For each SMS, a session is created, the message is sent and the session is closed.</p> 
     </div> 
     <div class="paragraph"> 
      <p>This is the default behavior.</p> 
     </div> 
     <div class="paragraph"> 
      <p>The diagram explains how it works:</p> 
     </div> 
     <div class="imageblock text-center"> 
      <div class="content"> 
       <img src="diag-7ddead08cf6b3809422d41f55e6d7895.png" alt="diag 7ddead08cf6b3809422d41f55e6d7895" width="521" height="1012" class="img-fluid"> 
      </div> 
      <div class="title">
        Figure 13. How it works 
      </div> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="reuse_session"><a class="anchor" href="#reuse_session"></a>6.3.2.2. Reuse session</h5> 
     <div class="paragraph"> 
      <p>This strategy opens a session when needed and try to reuse it if possible.</p> 
     </div> 
     <div class="paragraph"> 
      <p>When sending the first message, a new session is created. Later, when sending the next message, if the session is still alive, this session is reused. As the connection is not actively maintained, the session may be killed by the server. Therefore to check if the session is still alive, an <code>enquire_link</code> request is sent. If a response is received from the server, then the session is still alive and the message can be sent using the same session. If a failure response or no response is received after some time from the server, then a new session must be created.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To check if the session is still alive, the <code>enquire_link</code> request is sent just before sending the real message. In order to prevent sending an <code>enquire_link</code> request before <strong>every</strong> message, the date of the last sent message or <code>enquire_link</code> is kept. This date is compared to a delay to ensure that no <code>enquire_link</code> is sent during this delay.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To enable reuse session strategy, update the configuration like this:</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 24. Enable reuse session 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSampleExternalProperties</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    <span class="comment">// Load properties from file that is in classpath (src/main/resources/sms.properties)</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sms.properties</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSampleExternalProperties.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-5 highlight-lines:6"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">ogham.sms.smpp.host=&lt;your server host&gt;
ogham.sms.smpp.port=&lt;your server port&gt;
ogham.sms.smpp.system-id=&lt;your server system ID&gt;
ogham.sms.smpp.password=&lt;your server password&gt;
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;
ogham.sms.cloudhopper.session.reuse-session.enable=true           <i class="conum" data-value="1"></i><b>(1)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Enable reuse session (with default values)</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>The following diagram explains how it works:</p> 
     </div> 
     <div class="imageblock text-center"> 
      <div class="content"> 
       <img src="diag-4644cd346f4e29f19da7b4c4a46244a6.png" alt="diag 4644cd346f4e29f19da7b4c4a46244a6" width="742" height="1067" class="img-fluid"> 
      </div> 
      <div class="title">
        Figure 14. How reuse session works 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>By default, Ogham considers that session should remain opened if last interaction (connection, <code>enquire_link</code> or <code>submit_sm</code>) with the server happened less than 30 seconds ago (recommended value). If the server doesn’t send a response after a delay (10 seconds by default), Ogham will consider the connection as down.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Timings are configurable:</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 25. Custom reuse session configuration 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSampleExternalProperties</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    <span class="comment">// Load properties from file that is in classpath (src/main/resources/sms.properties)</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sms.properties</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSampleExternalProperties.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-5 highlight-lines:7-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">ogham.sms.smpp.host=&lt;your server host&gt;
ogham.sms.smpp.port=&lt;your server port&gt;
ogham.sms.smpp.system-id=&lt;your server system ID&gt;
ogham.sms.smpp.password=&lt;your server password&gt;
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;
ogham.sms.cloudhopper.session.reuse-session.enable=true
ogham.sms.cloudhopper.session.reuse-session.last-interaction-expiration-delay=<span class="integer">60000</span>       <i class="conum" data-value="1"></i><b>(1)</b>
ogham.sms.cloudhopper.session.reuse-session.enquire-link-timeout=<span class="integer">5000</span>                     <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Change delay to consider last interaction <code>enquire_link</code> requests to 1 minute.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Change default response timeout to 5 seconds.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="admonitionblock note"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
         <td class="content"> 
          <div class="title">
            Connection lost 
          </div> 
          <div class="paragraph"> 
           <p>If the connection to the server is lost in the following cases:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>The server has explicitly closed the session</p> </li> 
            <li> <p>The server has been shutdown</p> </li> 
            <li> <p>The server has been restarted</p> </li> 
            <li> <p>The network is not available</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>Ogham will detect that the session is down and a new session will be used for next message.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="admonitionblock caution"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-caution" title="Caution"></i> </td> 
         <td class="content"> 
          <div class="title">
            Expiration delay 
          </div> 
          <div class="paragraph"> 
           <p>If <code>ogham.sms.cloudhopper.session.reuse-session.last-interaction-expiration-delay</code> is too high, Ogham may consider that the session is still alive whereas the server may ignore the session (some servers may consider the client as outdated but without sending explicit close). In this case, no <code>enquire_link</code> request is sent. The message is sent using the same session. However, it will fail because Ogham reuses a session that is closed. In this case, the SMS can’t be sent and an error is raised.</p> 
          </div> 
          <div class="paragraph"> 
           <p>It is up to the developer to configure the right values according to the server when using this strategy.</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <div class="sect4"> 
     <h5 id="keep_session_alive"><a class="anchor" href="#keep_session_alive"></a>6.3.2.3. Keep session alive</h5> 
     <div class="paragraph"> 
      <p>You may need to keep the session opened in order to avoid opening and closing session too often. This may be necessary in situation where you send many SMS over the time.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To keep the session alive, Ogham will actively send <code>enquire_link</code> requests to the server to indicate that the client is still alive and ready to send SMS.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To enable keep alive strategy, just update the configuration:</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 26. Enable keep alive 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSampleExternalProperties</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    <span class="comment">// Load properties from file that is in classpath (src/main/resources/sms.properties)</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sms.properties</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSampleExternalProperties.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-5 highlight-lines:6"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">ogham.sms.smpp.host=&lt;your server host&gt;
ogham.sms.smpp.port=&lt;your server port&gt;
ogham.sms.smpp.system-id=&lt;your server system ID&gt;
ogham.sms.smpp.password=&lt;your server password&gt;
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;
ogham.sms.cloudhopper.session.keep-alive.enable=true           <i class="conum" data-value="1"></i><b>(1)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Enable active keep alive (with default values)</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>The following diagram explains how it works:</p> 
     </div> 
     <div class="imageblock text-center"> 
      <div class="content"> 
       <img src="diag-9b8bc5f590eff6826bd7312d098259ca.png" alt="diag 9b8bc5f590eff6826bd7312d098259ca" width="792" height="1395" class="img-fluid"> 
      </div> 
      <div class="title">
        Figure 15. How keep alive works 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>By default, Ogham will send <code>enquire_link</code> requests every 30 seconds (recommended value). The <code>enquire_link</code> requests will start <strong>after</strong> the first message is sent. If the server doesn’t send a response after a delay (10 seconds by default) 3 times in a row, Ogham will consider the connection as down.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Every value is configurable to adapt to the remote server:</p> 
     </div> 
     <div class="exampleblock tab-container no-max-height"> 
      <div class="title">
        Example 27. Custom keep alive configuration 
      </div> 
      <div class="content"> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/java-logo.png" alt="java logo" width="16" height="30" class="img-fluid"></span> Java 
        </div> 
        <div class="content"> 
         <div class="listingblock collapse-lines:1-9 irrelevant-lines:1-9"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">fr.sii.ogham.sample.standard.sms</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;

<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.builder.MessagingBuilder</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.exception.MessagingException</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.core.service.MessagingService</span>;
<span class="keyword">import</span> <span class="include">fr.sii.ogham.sms.message.Sms</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicSampleExternalProperties</span> {

  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> MessagingException, <span class="exception">IOException</span> {
    <span class="comment">// Instantiate the messaging service using default behavior and</span>
    <span class="comment">// provided properties</span>
    <span class="comment">// Load properties from file that is in classpath (src/main/resources/sms.properties)</span>
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(<span class="string"><span class="delimiter">"</span><span class="content">/sms.properties</span><span class="delimiter">"</span></span>)                 <i class="conum" data-value="1"></i><b>(1)</b>
          .and()
        .build();
    <span class="comment">// send the sms using fluent API</span>
    service.send(<span class="keyword">new</span> Sms()
            .message().string(<span class="string"><span class="delimiter">"</span><span class="content">sms content</span><span class="delimiter">"</span></span>)
            .to(<span class="string"><span class="delimiter">"</span><span class="content">+33752962193</span><span class="delimiter">"</span></span>));
  }

}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Load properties from a file that is in the classpath.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
         <div class="paragraph"> 
          <p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/BasicSampleExternalProperties.java?ts=2">Source code of the sample</a>.</p> 
         </div> 
        </div> 
       </div> 
       <div class="openblock tab"> 
        <div class="title"> 
         <span class="image"><img src="./images//icons/properties.png" alt="properties" width="37" height="30" class="img-fluid"></span> Properties 
        </div> 
        <div class="content"> 
         <div class="listingblock irrelevant-lines:1-5 highlight-lines:7-10"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="python">ogham.sms.smpp.host=&lt;your server host&gt;
ogham.sms.smpp.port=&lt;your server port&gt;
ogham.sms.smpp.system-id=&lt;your server system ID&gt;
ogham.sms.smpp.password=&lt;your server password&gt;
ogham.sms.from.default-value=&lt;phone number to display <span class="keyword">for</span> the sender&gt;
ogham.sms.cloudhopper.session.keep-alive.enable=true
ogham.sms.cloudhopper.session.keep-alive.connect-at-startup=true        <i class="conum" data-value="1"></i><b>(1)</b>
ogham.sms.cloudhopper.session.keep-alive.enquire-link-interval=<span class="integer">60000</span>    <i class="conum" data-value="2"></i><b>(2)</b>
ogham.sms.cloudhopper.session.keep-alive.enquire-link-timeout=<span class="integer">5000</span>      <i class="conum" data-value="3"></i><b>(3)</b>
ogham.sms.cloudhopper.session.keep-alive.max-consecutive-timeouts=<span class="integer">5</span>     <i class="conum" data-value="4"></i><b>(4)</b></code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody> 
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Directly start sending <code>enquire_link</code> requests to keep session alive when Ogham starts instead of waiting for first message.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Change default interval between <code>enquire_link</code> requests to 1 minute.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Change default response timeout to 5 seconds.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>Change default number of consecutive <code>enquire_link</code> requests that end in timeout to 5.</td> 
            </tr> 
           </tbody> 
          </table> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="admonitionblock note"> 
      <table> 
       <tbody> 
        <tr> 
         <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
         <td class="content"> 
          <div class="title">
            Connection lost 
          </div> 
          <div class="paragraph"> 
           <p>There are many cases where the connection to the server may be lost:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p>The <code>enquire_link</code> request received no answer within the configured timeout</p> </li> 
            <li> <p>The server has been shutdown</p> </li> 
            <li> <p>The server has been restarted</p> </li> 
            <li> <p>The network is not available</p> </li> 
            <li> <p>…​</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>Ogham will detect that the session is outdated and that a new one is required. It will try to reconnect in background. If it succeeds, <code>enquire_link</code> requests will be sent again to actively maintain the new session. However, if it fails instead of trying to reconnect for nothing (the server may be shutdown for a long time), it doesn’t try to reconnect now. The reconnection attempt will be done when next message is about to be sent.</p> 
          </div> 
          <div class="paragraph"> 
           <p>Moreover, reconnection process uses the same retry strategy as connection (10 attempts every 5 seconds by default).</p> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="advanced-smpp-configuration"><a class="anchor" href="#advanced-smpp-configuration"></a>6.3.3. Catalog of SMPP properties</h4> 
    <div class="paragraph"> 
     <p><a href="http://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer">SMPP</a> is the standard protocol to send SMS. SMPP is quite complex and has many configurable properties.</p> 
    </div> 
    <div class="paragraph"> 
     <p>There are configuration properties that are dependent of the sender implementation (for example Cloudhopper) and configuration properties that are shared between all implementations.</p> 
    </div> 
    <div class="exampleblock prevent-overflow"> 
     <div class="content"> 
      <table class="tableblock frame-all grid-all stretch"> 
       <caption class="title">
         Table 1. Common SMPP properties 
       </caption> 
       <colgroup> 
        <col style="width: 25%;"> 
        <col style="width: 50%;"> 
        <col style="width: 12.5%;"> 
        <col style="width: 12.5%;"> 
       </colgroup> 
       <thead> 
        <tr> 
         <th class="tableblock halign-left valign-top">Property</th> 
         <th class="tableblock halign-left valign-top">Description</th> 
         <th class="tableblock halign-left valign-top">Required</th> 
         <th class="tableblock halign-left valign-top">Default value</th> 
        </tr> 
       </thead> 
       <tbody> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.host</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The host of the SMPP or SMSC server (IP or address).</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.port</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The port of the SMPP or SMSC server</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.system-id</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The system_id parameter is used to identify an ESME ( External Short Message Entity) or an SMSC (Short Message Service Centre) at bind time. An ESME system_id identifies the ESME or ESME agent to the SMSC. The SMSC system_id provides an identification of the SMSC to the ESME.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.password</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The password parameter is used by the SMSC to authenticate the identity of the binding ESME. The Service Provider may require ESME’s to provide a password when binding to the SMSC. This password is normally issued by the SMSC system administrator. The password parameter may also be used by the ESME to authenticate the identity of the binding SMSC (e.g. in the case of the outbind operation).</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.bind-type</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The bind command type: can be <code>TRANSMITTER</code> (send only), <code>RECEIVER</code> (to send messages only, not useful in Ogham context) or <code>TRANSCEIVER</code> (send and receive, may be used for acks).</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSMITTER</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.system-type</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The system_type parameter is used to categorize the type of ESME that is binding to the SMSC. Examples include “VMS” (voice mail system) and “OTA” (over-the-air activation system). Specification of the system_type is optional - some SMSC’s may not require ESME’s to provide this detail. In this case, the ESME can set the system_type to NULL. The system_type (optional) may be used to categorize the system, e.g., “EMAIL”, “WWW”, etc.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.user-data.use-short-message</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable use of <code>short_message</code> field to carry text message (named User Data).</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.user-data.use-tlv-message-payload</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable use of <code>message_payload</code> optional TLV (Tag-Value-Length) parameter to carry text message (named User Data).</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.split.enable</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable message splitting.</p> <p class="tableblock"> SMPP message (<code>short_message</code>) size is limited to 140 octets. Therefore long text messages has to be split into several segments and sent separately. The number of effective characters sent per segment depends on the character encoding (see <a href="./user-manual.html#auto-split-sms">how message split is handled</a>).</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.encoder.gsm7bit-packed.priority</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set priority for encoding text messages using GSM 7-bit encoding. GSM 7-bit encoding and GSM 8-bit encoding use the same character tables. Only 7 bits are necessary to represents characters. In GSM 8-bit encoding a leading 0 is added. However, GSM 7-bit encoding is packed. Every character is "merged" with the next one in order to use more characters for the same number of octets.</p> <p class="tableblock"> If priority value is 0 or negative, it disables GSM 7-bit encoding.</p> <p class="tableblock"> This encoding is disabled by default since it is not supported by many providers and leads to unexpected characters received by the end-user.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> (disabled)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.encoder.gsm8bit.priority</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set priority for encoding text messages using GSM 8-bit encoding. GSM 7-bit encoding and GSM 8-bit encoding use the same character tables. Only 7 bits are necessary to represents characters. In GSM 8-bit encoding a leading 0 is added.</p> <p class="tableblock"> If priority value is 0 or negative, it disables GSM 8-bit encoding.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>99000</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.encoder.latin1.priority</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set priority for encoding text messages using Latin-1 (ISO-8859-1)</p> <p class="tableblock"> If priority value is 0 or negative, it disables Latin-1 encoding.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>98000</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.encoder.ucs2.priority</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set priority for encoding text messages using UCS-2. UCS-2 uses two octets per character.</p> <p class="tableblock"> If priority value is 0 or negative, it disables UCS-2 encoding.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>90000</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.encoder.auto-guess.enable</code></p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="paragraph"> 
            <p>Enable/disable automatic guessing of message encoding.</p> 
           </div> 
           <div class="paragraph"> 
            <p>If enabled, it automatically guess the best supported encoding in order to use the minimum octets:</p> 
           </div> 
           <div class="ulist"> 
            <ul> 
             <li> <p>It encodes using GSM 7-bit default alphabet if the message contains only characters defined in the table. Message is packed so the message can have a maximum length of 160 characters.</p> </li> 
             <li> <p>It encodes using GSM 8-bit data encoding if the message contains only characters that can be encoded on one octet and each character is present in the GSM 8-bit table.</p> </li> 
             <li> <p>It encodes using Latin 1 (ISO-8859-1) data encoding if the message contains only characters that can be encoded on one octet.</p> </li> 
             <li> <p>It encodes using UCS-2 encoding if the message contains special characters that can’t be encoded on one octet. Each character is encoded on two octets.</p> </li> 
            </ul> 
           </div> 
          </div></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.encoder.default-charset</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set which Charset should be used if nothing else is configured.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>GSM</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.data-coding-scheme.auto.enable</code></p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="paragraph"> 
            <p>Enable/disable automatic detection of Data Coding Scheme value according to the SMPP interface version.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Data Coding Scheme is a one-octet field in Short Messages (SM) and Cell Broadcast Messages (CB) which carries a basic information how the recipient handset should process the received message. The information includes:</p> 
           </div> 
           <div class="ulist"> 
            <ul> 
             <li> <p>the character set or message coding which determines the encoding of the message user data</p> </li> 
             <li> <p>the message class which determines to which component of the Mobile Station (MS) or User Equipment (UE) should be the message delivered</p> </li> 
             <li> <p>the request to automatically delete the message after reading</p> </li> 
             <li> <p>the state of flags indicating presence of unread voicemail, fax, e-mail or other messages</p> </li> 
             <li> <p>the indication that the message content is compressed</p> </li> 
             <li> <p>the language of the cell broadcast message</p> </li> 
            </ul> 
           </div> 
           <div class="paragraph"> 
            <p>The field is described in 3GPP 23.040 and 3GPP 23.038 under the name TP-DCS (see <a href="https://en.wikipedia.org/wiki/Data_Coding_Scheme#SMS_Data_Coding_Scheme">SMS Data Coding Scheme</a>).</p> 
           </div> 
           <div class="paragraph"> 
            <p>SMPP 3.4 introduced a new list of <code>data_coding</code> values (see <a href="https://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer" ">Short Message Peer to Peer</a>).</p> 
           </div> 
           <div class="paragraph"> 
            <p>Implementation that determines the Data Coding value is selected based on SMPP interface version if enabled.</p> 
           </div> 
          </div></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.smpp.data-coding-scheme.value</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Use the same Data Coding Scheme value for all messages. If set, disables automatic detection (see <code>ogham.sms.smpp.data-coding-scheme.auto.enable</code>)</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <div class="exampleblock prevent-overflow"> 
     <div class="content"> 
      <table class="tableblock frame-all grid-all stretch"> 
       <caption class="title">
         Table 2. Cloudhopper specific SMPP properties 
       </caption> 
       <colgroup> 
        <col style="width: 25%;"> 
        <col style="width: 50%;"> 
        <col style="width: 12.5%;"> 
        <col style="width: 12.5%;"> 
       </colgroup> 
       <tbody> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.host</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The host of the SMPP or SMSC server (IP or address).</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.host</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.port</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The port of the SMPP or SMSC server</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.port</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.system-id</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The system_id parameter is used to identify an ESME ( External Short Message Entity) or an SMSC (Short Message Service Centre) at bind time. An ESME system_id identifies the ESME or ESME agent to the SMSC. The SMSC system_id provides an identification of the SMSC to the ESME.</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.system-id</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.password</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The password parameter is used by the SMSC to authenticate the identity of the binding ESME. The Service Provider may require ESME’s to provide a password when binding to the SMSC. This password is normally issued by the SMSC system administrator. The password parameter may also be used by the ESME to authenticate the identity of the binding SMSC (e.g. in the case of the outbind operation).</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.password</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.bind-type</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The bind command type: can be <code>TRANSMITTER</code> (send only), <code>RECEIVER</code> (to send messages only, not useful in Ogham context) or <code>TRANSCEIVER</code> (send and receive, may be used for acks).</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.bind-type</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSMITTER</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.system-type</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The system_type parameter is used to categorize the type of ESME that is binding to the SMSC. Examples include “VMS” (voice mail system) and “OTA” (over-the-air activation system). Specification of the system_type is optional - some SMSC’s may not require ESME’s to provide this detail. In this case, the ESME can set the system_type to NULL. The system_type (optional) may be used to categorize the system, e.g., “EMAIL”, “WWW”, etc.</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.system-type</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.interface-version</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">The SMPP protocol version (either <code>3.3</code>, <code>3.4</code> or <code>5.0</code>)</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>3.4</code> (supported by most providers)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.user-data.use-short-message</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable use of <code>short_message</code> field to carry text message (named User Data).</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.user-data.use-short-message</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.user-data.use-tlv-message-payload</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable use of <code>message_payload</code> optional TLV (Tag-Value-Length) parameter to carry text message (named User Data).</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.split.enable</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable message splitting.</p> <p class="tableblock"> SMPP message (<code>short_message</code>) size is limited to 140 octets. Therefore long text messages has to be split into several segments and sent separately. The number of effective characters sent per segment depends on the character encoding (see <a href="./user-manual.html#auto-split-sms">how message split is handled</a>).</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.split.enable</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.encoder.gsm7bit-packed.priority</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set priority for encoding text messages using GSM 7-bit encoding. GSM 7-bit encoding and GSM 8-bit encoding use the same character tables. Only 7 bits are necessary to represents characters. In GSM 8-bit encoding a leading 0 is added. However, GSM 7-bit encoding is packed. Every character is "merged" with the next one in order to use more characters for the same number of octets.</p> <p class="tableblock"> If priority value is 0 or negative, it disables GSM 7-bit encoding.</p> <p class="tableblock"> This encoding is disabled by default since it is not supported by many providers and leads to unexpected characters received by the end-user.</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.encoder.gsm7bit-packed.priority</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> (disabled)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.encoder.gsm8bit.priority</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set priority for encoding text messages using GSM 8-bit encoding. GSM 7-bit encoding and GSM 8-bit encoding use the same character tables. Only 7 bits are necessary to represents characters. In GSM 8-bit encoding a leading 0 is added.</p> <p class="tableblock"> If priority value is 0 or negative, it disables GSM 8-bit encoding.</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.encoder.gsm8bit.priority</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>99000</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.encoder.latin1.priority</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set priority for encoding text messages using Latin-1 (ISO-8859-1)</p> <p class="tableblock"> If priority value is 0 or negative, it disables Latin-1 encoding.</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.encoder.latin1.priority</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>98000</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.encoder.ucs2.priority</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set priority for encoding text messages using UCS-2. UCS-2 uses two octets per character.</p> <p class="tableblock"> If priority value is 0 or negative, it disables UCS-2 encoding.</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.encoder.ucs2.priority</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>90000</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.encoder.auto-guess.enable</code></p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="paragraph"> 
            <p>Enable/disable automatic guessing of message encoding.</p> 
           </div> 
           <div class="paragraph"> 
            <p>If enabled, it automatically guess the best supported encoding in order to use the minimum octets:</p> 
           </div> 
           <div class="ulist"> 
            <ul> 
             <li> <p>It encodes using GSM 7-bit default alphabet if the message contains only characters defined in the table. Message is packed so the message can have a maximum length of 160 characters.</p> </li> 
             <li> <p>It encodes using GSM 8-bit data encoding if the message contains only characters that can be encoded on one octet and each character is present in the GSM 8-bit table.</p> </li> 
             <li> <p>It encodes using Latin 1 (ISO-8859-1) data encoding if the message contains only characters that can be encoded on one octet.</p> </li> 
             <li> <p>It encodes using UCS-2 encoding if the message contains special characters that can’t be encoded on one octet. Each character is encoded on two octets.</p> </li> 
            </ul> 
           </div> 
           <div class="paragraph"> 
            <p>This is an alias of <code>ogham.sms.smpp.encoder.auto-guess.enable</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p> 
           </div> 
          </div></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.encoder.default-charset</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set which Charset should be used if nothing else is configured.</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.encoder.default-charset</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>GSM</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.data-coding-scheme.auto.enable</code></p></td> 
         <td class="tableblock halign-left valign-top"> 
          <div class="content"> 
           <div class="paragraph"> 
            <p>Enable/disable automatic detection of Data Coding Scheme value according to the SMPP interface version.</p> 
           </div> 
           <div class="paragraph"> 
            <p>Data Coding Scheme is a one-octet field in Short Messages (SM) and Cell Broadcast Messages (CB) which carries a basic information how the recipient handset should process the received message. The information includes:</p> 
           </div> 
           <div class="ulist"> 
            <ul> 
             <li> <p>the character set or message coding which determines the encoding of the message user data</p> </li> 
             <li> <p>the message class which determines to which component of the Mobile Station (MS) or User Equipment (UE) should be the message delivered</p> </li> 
             <li> <p>the request to automatically delete the message after reading</p> </li> 
             <li> <p>the state of flags indicating presence of unread voicemail, fax, e-mail or other messages</p> </li> 
             <li> <p>the indication that the message content is compressed</p> </li> 
             <li> <p>the language of the cell broadcast message</p> </li> 
            </ul> 
           </div> 
           <div class="paragraph"> 
            <p>The field is described in 3GPP 23.040 and 3GPP 23.038 under the name TP-DCS (see <a href="https://en.wikipedia.org/wiki/Data_Coding_Scheme#SMS_Data_Coding_Scheme">SMS Data Coding Scheme</a>).</p> 
           </div> 
           <div class="paragraph"> 
            <p>SMPP 3.4 introduced a new list of <code>data_coding</code> values (see <a href="https://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer" ">Short Message Peer to Peer</a>).</p> 
           </div> 
           <div class="paragraph"> 
            <p>Implementation that determines the Data Coding value is selected based on SMPP interface version if enabled.</p> 
           </div> 
           <div class="paragraph"> 
            <p>This is an alias of <code>ogham.sms.smpp.data-coding-scheme.auto.enable</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p> 
           </div> 
          </div></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.data-coding-scheme.value</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Use the same Data Coding Scheme value for all messages. If set, disables automatic detection (see <code>ogham.sms.smpp.data-coding-scheme.auto.enable</code>).</p> <p class="tableblock"> This is an alias of <code>ogham.sms.smpp.data-coding-scheme.value</code> but only used by Cloudhopper. If both are defined, this property takes precedence.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.name</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">A name for the session (used to name threads).</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.bind-timeout</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set the maximum amount of time (in milliseconds) to wait for the success of a bind attempt to the SMSC.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>5000</code> (5 seconds)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.connect-timeout</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set the maximum amount of time (in milliseconds) to wait for a establishing the connection.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000</code> (10 seconds)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.request-expiry-timeout</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set the amount of time (milliseconds) to wait for an endpoint to respond to a request before it expires.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>-1</code> (disabled)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.window-monitor-interval</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the amount of time (milliseconds) between executions of monitoring the window for requests that expire. It’s recommended that this generally either matches or is half the value of <code>ogham.sms.cloudhopper.session.request-expiry-timeout</code>. Therefore, at worst a request would could take up 1.5X the <code>ogham.sms.cloudhopper.session.request-expiry-timeout</code> to clear out.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>-1</code> (disabled)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.window-size</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Message exchange may be synchronous, where each peer waits for a response for each PDU being sent, or asynchronous, where multiple requests can be issued 7 without waiting and acknowledged in a skew order by the other peer; the number of unacknowledged requests is called a window</p> <p class="tableblock"> Sets the maximum number of requests permitted to be outstanding (unacknowledged) at a given time.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.window-wait-timeout</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set the amount of time (milliseconds) to wait until a slot opens up in the send window.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>60000</code> (1 minute)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.write-timeout</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set the maximum amount of time (in milliseconds) to wait for bytes to be written when creating a new SMPP session</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> (no timeout, for backwards compatibility)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.response-timeout</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set the maximum amount of time (in milliseconds) to wait until a valid response is received when a "submit" request is synchronously sends to the remote endpoint. The timeout value includes both waiting for a "window" slot, the time it takes to transmit the actual bytes on the socket, and for the remote endpoint to send a response back.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>5000</code> (5 seconds)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.unbind-timeout</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Set the maximum amount of time (in milliseconds) to wait until the session is unbounded, waiting up to a specified period of milliseconds for an unbind response from the remote endpoint. Regardless of whether a proper unbind response was received, the socket/channel is closed.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>5000</code> (5 seconds)</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.connect-retry.max-attempts</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">If the connection can’t be established then Ogham can retry several times until it reaches a maximum number of attempts.</p> <p class="tableblock"> Set this value to <code>0</code> to disable retry.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code> attempts</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ogham.sms.cloudhopper.session.connect-retry.delay-between-attempts</code></p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait (in milliseconds) before retrying reconnection. The time to wait is a fixed value.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><code>500</code></p></td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="use_the_builder_to_define_your_own_behaviors"><a class="anchor" href="#use_the_builder_to_define_your_own_behaviors"></a>6.4. Use the builder to define your own behaviors</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain what is a builder</p> </li> 
       <li> <p>Explain what is a configurer</p> </li> 
       <li> <p>Explain what is a service provider configurer</p> </li> 
       <li> <p>Explain relationship between builders and configurers</p> </li> 
       <li> <p>Explain phases ?</p> </li> 
       <li> <p>Explain how to add custom builder ? → link to extend.adoc</p> </li> 
       <li> <p>Explain how to add custom configurer ? → link to extend.adoc</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="standard_builder"><a class="anchor" href="#standard_builder"></a>6.4.1. Standard builder</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain what is the "standard" builder</p> </li> 
        <li> <p>Explain what is registered</p> </li> 
        <li> <p>Should explain what is configured by each configurer ?</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="minimal_builder"><a class="anchor" href="#minimal_builder"></a>6.4.2. Minimal builder</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain what is the "minimal" builder</p> </li> 
        <li> <p>Explain what is registered</p> </li> 
        <li> <p>Should explain what is configured by each configurer ?</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="empty_builder"><a class="anchor" href="#empty_builder"></a>6.4.3. Empty builder</h4> 
    <div class="exampleblock TODO"> 
     <div class="content"> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Explain what is the "empty" builder</p> </li> 
        <li> <p>Explain what is registered</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="intercept_messages_just_before_sending"><a class="anchor" href="#intercept_messages_just_before_sending"></a>6.5. Intercept messages just before sending</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain role of interceptors</p> </li> 
       <li> <p>Explain how to implement end register an interceptor</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="section-extend"><a class="anchor" href="#section-extend"></a>7. Extend</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="custom_email_sender_implementation"><a class="anchor" href="#custom_email_sender_implementation"></a>7.1. Custom email sender implementation</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain how to implement custom sender (with sample)</p> </li> 
       <li> <p>Explain how to add a builder for the custom sender</p> </li> 
       <li> <p>Explain implementation selection</p> </li> 
       <li> <p>Explain conditions (based on classpath, properties, custom conditions)</p> </li> 
       <li> <p>Explain how to add a default configurer for the sender</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="custom_sms_sender_implementation"><a class="anchor" href="#custom_sms_sender_implementation"></a>7.2. Custom SMS sender implementation</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain how to implement custom sender (with sample)</p> </li> 
       <li> <p>Explain how to add a builder for the custom sender</p> </li> 
       <li> <p>Explain implementation selection</p> </li> 
       <li> <p>Explain conditions (based on classpath, properties, custom conditions)</p> </li> 
       <li> <p>Explain how to add a default configurer for the sender</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="use_your_custom_template_engine"><a class="anchor" href="#use_your_custom_template_engine"></a>7.3. Use your custom template engine</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain how to implement custom engine (with sample)</p> </li> 
       <li> <p>Explain template engine selection (detector)</p> </li> 
       <li> <p>Explain how to add a builder for the custom engine</p> </li> 
       <li> <p>Explain how to add custom engine detector</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="create_your_own_configurer"><a class="anchor" href="#create_your_own_configurer"></a>7.4. Create your own configurer</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain how to implement a custom configurer</p> </li> 
       <li> <p>Explain how to register it (or how Ogham can find it automatically)</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="custom-resource-resolver"><a class="anchor" href="#custom-resource-resolver"></a>7.5. Create custom resource resolver</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain how to register custom resource resolver</p> </li> 
       <li> <p>Explain how to associate with a lookup prefix</p> </li> 
       <li> <p>Explain how to handle template engine resolution (adapters)</p> </li> 
       <li> <p>Explain how to handle relative resources</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="add_new_type_of_message"><a class="anchor" href="#add_new_type_of_message"></a>7.6. Add new type of message</h3> 
   <div class="exampleblock TODO"> 
    <div class="content"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Explain how to add a new king of message</p> </li> 
       <li> <p>Explain design process</p> </li> 
       <li> <p>Explain how to add a builder into main builder</p> </li> 
       <li> <p>Explain how to contribute to Ogham code</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>        </main>
        <div class="d-none d-sm-none d-md-none d-lg-none d-xl-block col-xl-2">
        </div>
    </div> <!-- row: end -->
</div> <!-- .main-body: end -->
    <div id="m_scrolltop" class="m-scrolltop">
		<i class="fa fa-arrow-up"></i>
    </div>
  <!-- Footer -->
<footer class="footer-light bg-light">
    <div class="container">
        <div class="row">
                        <div class="col bottom-nav">
                <ul class="nav flex-column nav-list">
                    <li class="nav-header">
Main
                    </li>
                    <li class="nav-item "><a  href="."  title="Home"  class="nav-link" >Home</a></li>
                    <li class="nav-item "><a  href="https://github.com/groupe-sii/ogham"  title="GitHub project"   class="externalLink nav-link" >GitHub project</a></li>
                    <li class="nav-item "><a  href="features.html"  title="Features"  class="nav-link" >Features</a></li>
                    <li class="nav-item "><a  href="roadmap.html"  title="Roadmap"  class="nav-link" >Roadmap</a></li>
                    <li class="nav-item "><a  href="release-notes.html"  title="Release notes"  class="nav-link" >Release notes</a></li>
                </ul>
            </div>
            <div class="col bottom-nav">
                <ul class="nav flex-column nav-list">
                    <li class="nav-header">
Download
                    </li>
                    <li class="nav-item "><a  href="user-manual.html#install"  title="Download"  class="nav-link" >Download</a></li>
                    <li class="nav-item "><a  href="license.html"  title="License"  class="nav-link" >License</a></li>
                    <li class="nav-header">
Contribute
                    </li>
                    <li class="nav-item "><a  href="contribute.html"  title="Contribute"  class="nav-link" >Contribute</a></li>
                    <li class="nav-item "><a  href="https://github.com/groupe-sii/ogham/issues"  title="Issues"   class="externalLink nav-link" >Issues</a></li>
                    <li class="nav-item "><a  href="https://github.com/groupe-sii/ogham"  title="Fork on GitHub"   class="externalLink nav-link" >Fork on GitHub</a></li>
                    <li class="nav-item "><a  href="donate.html"  title="Donate"  class="nav-link" >Donate</a></li>
                </ul>
            </div>
            <div class="col bottom-nav">
                <ul class="nav flex-column nav-list">
                    <li class="nav-header">
Documentation
                    </li>
                    <li class="nav-item active"><a  href=""  title="User manual"  class="nav-link" >User manual</a></li>
                    <li class="nav-item "><a  href="apidocs/index.html"  title="Javadoc"  class="nav-link" >Javadoc</a></li>
                </ul>
            </div>
            <div class="col bottom-nav">
                <ul class="nav flex-column nav-list">
                    <li class="nav-header">
Reports
                    </li>
                    <li class="nav-item "><a  href="https://sonarcloud.io/organizations/aurelien-baudet-github/projects"  title="Sonar Analysis"   class="externalLink nav-link" >Sonar Analysis</a></li>
                    <li class="nav-item "><a  href="https://codecov.io/gh/groupe-sii/ogham"  title="Codecov"   class="externalLink nav-link" >Codecov</a></li>
                    <li class="nav-item "><a  href="pit-reports/index.html"  title="PIT"  class="nav-link" >PIT</a></li>
                    <li class="nav-header">
Maven Reports
                    </li>
                                <li class="nav-item "><a  href="project-reports.html"  title="Project Reports"  class="nav-link" >Project Reports <i class="fas fa-angle-right"></i></a></li>
                </ul>
            </div>
            <div class="col bottom-description">
                <blockquote class="blockquote">Email, SMS, RCS or whatever made simple without knowing RFCs.<br />
				The content of the message can come from any templating engine (Thymeleaf, FreeMarker, ...).<br />
				It also provides integration with frameworks (Spring, JSF, ...).<br />
				It is designed to be easily extended.</blockquote>

                            </div> <!-- col: .container -->
        </div> <!-- END: .row -->
    </div> <!-- END: .container -->
</footer>
  <div class="container subfooter text-center">
    <div class="row">
      <div class="col-md-12">
        <p class="copyright">Copyright &copy;2021
. All Rights Reserved.</p>
        <p class="version-date">
<span class="projectVersion">Version: 3.1.0-SNAPSHOT. </span><span class="publishDate">    Last Published: 2021-01-20. </span>        </p>
        <p><a href="https://github.com/devacfr/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://devacfr.github.io" target="_blank" title="devacfr">devacfr</a>.</p>
      </div>
    </div>
  </div>

  <!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
    <script src="./js/jquery.min.js" crossorigin="anonymous"></script>
    <script src="./js/popper.min.js" crossorigin="anonymous"></script>
    <script src="./js/bootstrap.min.js" crossorigin="anonymous"></script>

  <script src="./js/lightbox.min.js" crossorigin="anonymous"></script>
            
<script src="./js/site.js"></script>        
<script src="./javascripts/progress.js"></script>        
<script src="./javascripts/sourcecode/source-utils.js"></script>        
<script src="./javascripts/sourcecode/highlight-lines.js"></script>        
<script src="./javascripts/sourcecode/collapse-lines.js"></script>        
<script src="./javascripts/tabcontainer.js"></script>        
<script src="./javascripts/toc.js"></script>        
<script src="./javascripts/sticky-title-fix.js"></script>        
<script src="./javascripts/image-viewer.js"></script>  <script src="./js/reflow-skin.js" crossorigin="anonymous"></script>
    <script src="./js/anchor.min.js" crossorigin="anonymous"></script>
    </body>
</html>
